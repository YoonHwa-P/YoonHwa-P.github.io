<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Life in the Mars</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="salmon"><meta name="application-name" content="YoonHwa"><meta name="msapplication-TileImage" content="/img/main.jpg"><meta name="msapplication-TileColor" content="salmon"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="YoonHwa"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="나는 화성인이다."><meta property="og:type" content="blog"><meta property="og:title" content="Life in the Mars"><meta property="og:url" content="https://yoonhwa-p.github.io/"><meta property="og:site_name" content="Life in the Mars"><meta property="og:description" content="나는 화성인이다."><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://yoonhwa-p.github.io/img/og_image.png"><meta property="article:author" content="YoonHwa"><meta property="article:tag" content="programming, bio"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://YoonHwa-P.github.io"},"headline":"Life in the Mars","image":["https://yoonhwa-p.github.io/img/og_image.png"],"author":{"@type":"Person","name":"YoonHwa"},"publisher":{"@type":"Organization","name":"Life in the Mars","logo":{"@type":"ImageObject","url":"https://yoonhwa-p.github.io/imeges/main.jpg"}},"description":"나는 화성인이다."}</script><link rel="icon" href="/../imeges/main.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://cdn.rawgit.com/innks/NanumSquareRound/master/nanumsquareround.css"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-71105E54VD" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-71105E54VD');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><script data-ad-client="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9661048314566450" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/../imeges/main.jpg" alt="Life in the Mars" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-12-06T03:21:20.000Z" title="2021. 12. 6. 오후 12:21:20">2021-12-06</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2021-12-13T07:25:58.815Z" title="2021. 12. 13. 오후 4:25:58">2021-12-13</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/python/">python</a></span><span class="level-item">5분안에 읽기 (약 760 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/12/06/python/pythonLectureD1/">Python Class and function</a></h1><div class="content"><h2 id="day-1-Lecture-01"><a href="#day-1-Lecture-01" class="headerlink" title="day 1 Lecture (01)"></a>day 1 Lecture (01)</h2><p><br><br><hr></p>
<h3 id="1-새로운-Project-시작"><a href="#1-새로운-Project-시작" class="headerlink" title="1. 새로운 Project 시작"></a>1. 새로운 Project 시작</h3><ul>
<li>python project를 새로 시작 해 보자. </li>
</ul>
<br>

<p><img src="/../../imeges/python/create_NewProject.png" alt="create_NewProject"></p>
<br>

<p><img src="/../../imeges/python/create_NewProject_file.png" alt="create_NewProject_file"></p>
<p>pycham을 실행하여 project file을 만들어도 되지만, 원하는 directory에 file 을 만들고, 그 file에서 pycharm을 실행 해도 된다. </p>
<h3 id="2-main-py"><a href="#2-main-py" class="headerlink" title="2. main.py :"></a>2. main.py :</h3><h4 id="stop-point"><a href="#stop-point" class="headerlink" title="stop point"></a>stop point</h4><p><img src="/../../imeges/python/main_py.png" alt="main.py"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This is a sample Python script.</span></span><br><span class="line"><span class="comment"># Press Shift+F10 to execute it or replace it with your code.</span></span><br><span class="line"><span class="comment"># Press Double Shift to search everywhere for classes, files, tool windows, actions, and settings.</span></span><br><span class="line"><span class="comment"># 인공지능 / 머신러닝 --&gt; 리서치 관점 (논문리뷰, 정리, End User) / Engineer 관점</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_hi</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="comment"># Use a breakpoint in the code line below to debug your script.</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Hi, <span class="subst">&#123;name&#125;</span>&#x27;</span>)  <span class="comment"># Press Ctrl+F8 to toggle the breakpoint.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># f string</span></span><br><span class="line"><span class="comment"># Press the green button in the gutter to run the script.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener" href="https://www.jetbrains.com/help/pycharm/using-breakpoints.html">BreakPoint</a></li>
</ul>
<h4 id="def-name-name-함수-정의-하기"><a href="#def-name-name-함수-정의-하기" class="headerlink" title="def name(name): 함수 정의 하기"></a>def name(name): 함수 정의 하기</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_hi</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Hi, <span class="subst">&#123;name&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    print_hi(<span class="string">&#x27;PyCharm&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hi&quot;</span>, name)</span><br></pre></td></tr></table></figure>


<ul>
<li>Ctrl + shift + F10  : Run</li>
</ul>
<ul>
<li><p>def 로 함수 정의 이름(print_hi), 인수(name)을 설정 :</p>
<ul>
<li>원하는 동작(print(f’Hi, {name})) 넣기</li>
</ul>
</li>
<li><p>함수 실행 : 왜 이렇게 해야 하는가를 공부 해 오자.</p>
<ul>
<li>if <strong>name</strong> == ‘<strong>main</strong>‘:<br>  print_hi(‘PyCharm’)</li>
</ul>
</li>
<li><p>print(“hi”, print_hi(‘YH’))</p>
</li>
</ul>
<blockquote>
<p>Hi, PyCharm <br><br>Hi, YH <br><br>hi None <br></p>
</blockquote>
<h3 id="3-Import"><a href="#3-Import" class="headerlink" title="3. Import."></a>3. Import.</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">numpy == <span class="number">1.21</span><span class="number">.4</span></span><br><span class="line">pandas ==<span class="number">1.3</span><span class="number">.4</span></span><br><span class="line">seaborn==<span class="number">0.11</span><span class="number">.2</span></span><br><span class="line">matplotlib==<span class="number">3.5</span><span class="number">.0</span></span><br><span class="line">scipy ==<span class="number">1.7</span><span class="number">.3</span></span><br><span class="line">scikit-learn == <span class="number">1.0</span><span class="number">.1</span></span><br></pre></td></tr></table></figure>


<h4> 가상환경 설정을 하는 이유 </h4>

<p>Python PKG : 20~30 만개 있다. </p>
<ul>
<li>   라이브러리 : 종속성이 있다.</li>
<li>   범용성이 좋아서 data analysis, web site development, 앱, 게임 등 개발, GUI, 개발 그 외 여러가지 가능</li>
<li>   Matplotlib (기초가 되는 라이브러리, 3.5.0)를 참조하여 seaborn, plotly, …</li>
<li>   버전 관리 불가. </li>
</ul>
<ul>
<li>data 분석을 위한 가상 환경<br>같은 Local machine 위에<br>Game 개발을 위한 가상 환경 조성 (다른 버전을 사용 할 수 있다. )</li>
</ul>
<p>PKG 설정: </p>
<p><a target="_blank" rel="noopener" href="https://pypi.org/">https://pypi.org</a> 에 들어가서 PKG 버전을보고 설치 하면 된다. </p>
<h3 id="4-venu-가상-환경-설정"><a href="#4-venu-가상-환경-설정" class="headerlink" title="4. venu : 가상 환경 설정"></a>4. venu : 가상 환경 설정</h3><p><img src="/../../imeges/python/venv_En.png" alt="venv_En"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#terminal</span></span><br><span class="line"></span><br><span class="line">$ source ./venv/Scripts/activate</span><br><span class="line">(venv)</span><br><span class="line"></span><br><span class="line"><span class="comment">#terminal</span></span><br><span class="line">$ which python</span><br><span class="line">/c/Users/brill/Desktop/PyThon_Function/venv/Scripts/python</span><br><span class="line">(venv)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>가상환경 설정 </p>
<ul>
<li><p><strong>$ which python</strong><br>  /c/ProgramData/Anaconda3/python</p>
</li>
<li><p><strong>$ source ./venv/Scripts/activate</strong></p>
<p style="color:#FF0000";>(venv)</p></li>
<li><p>$ which python</p>
</li>
</ul>
<blockquote>
<p>/c/Users/brill/Desktop/PyThon_Function/venv/Scripts/python</p>
<p style="color:#FF0000";>(venv)</p>
</blockquote>
<p style="color:#FF0000";>(venv)</p> 가 있어야 가상환경 설정이 된것이다. 


<p><img src="/../../imeges/python/raise_ValueError.png" alt="raise_ValueError"></p>
<h3 id="terminal에서-pandas-import-하는-방법"><a href="#terminal에서-pandas-import-하는-방법" class="headerlink" title="terminal에서 pandas import 하는 방법"></a>terminal에서 pandas import 하는 방법</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brill@DESKTOP-1IO6A45 MINGW64 ~/Desktop/PyThon_Function (master)</span><br><span class="line">$ pip install pandas</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Requirement already satisfied: pandas in c:\users\brill\desktop\python_function\venv\lib\site-packages (1<br>.3.4)<br>Requirement already satisfied: pytz&gt;=2017.3 in c:\users\brill\desktop\python_function\venv\lib\site-packa<br>ges (from pandas) (2021.3)<br>Requirement already satisfied: numpy&gt;=1.17.3 in c:\users\brill\desktop\python_function\venv\lib\site-pack<br>ages (from pandas) (1.21.4)<br>Requirement already satisfied: python-dateutil&gt;=2.7.3 in c:\users\brill\desktop\python_function\venv\lib<br>site-packages (from pandas) (2.8.2)<br>Requirement already satisfied: six&gt;=1.5 in c:\users\brill\desktop\python_function\venv\lib\site-packages<br>(from python-dateutil&gt;=2.7.3-&gt;pandas) (1.16.0)<br>WARNING: You are using pip version 21.1.2; however, version 21.3.1 is available.<br>You should consider upgrading via the ‘C:\Users\brill\Desktop\PyThon_Function\venv\Scripts\python.exe -m pip install –upgrade pip’ c<br>ommand.<br>(venv)</p>
</blockquote>
<p>pandas  등을 하나씩 install 하는 방법도 있지만, file(requirements)<br>를 만들어 install 하는 방법도 있다. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /c/Users/brill/Desktop/PyThon_Function/venv/Scripts/python</span></span><br><span class="line"><span class="comment"># -*- coding : utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">모방 : 부모 클래스를 모방 후 자식이 창조</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">newDataFrame</span>(<span class="params">pd.dataFrame</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">temp_dic = &#123;<span class="string">&quot;A&quot;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">            <span class="string">&quot;B&quot;</span>:[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    temp = pd.DataFrame(temp_dic, columns=[<span class="string">&quot;A&quot;</span>,<span class="string">&quot;B&quot;</span>])</span><br><span class="line">    <span class="built_in">print</span>(temp)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-----------------&quot;</span>)</span><br><span class="line">    temp2 = newDataFrame(temp_dic, columns=[<span class="string">&quot;B&quot;</span>, <span class="string">&quot;A&quot;</span>])</span><br><span class="line">    <span class="built_in">print</span>(temp2)</span><br></pre></td></tr></table></figure>


</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-12-05T05:21:20.000Z" title="2021. 12. 5. 오후 2:21:20">2021-12-05</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2021-12-06T11:38:43.169Z" title="2021. 12. 6. 오후 8:38:43">2021-12-06</time>&nbsp;업데이트 됨</span><span class="level-item">1분안에 읽기 (약 143 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/12/05/blog/gitHubMaw/">Think About My Mow!!</a></h1><div class="content"><p><img src="https://github-readme-stats.vercel.app/api?username=YoonHwa-P&show_icons=true&theme=radical" alt="YH&#39;s GitHub stats"></p>
<h2 id="21-12-06-Mow"><a href="#21-12-06-Mow" class="headerlink" title="21.12.06 Mow"></a>21.12.06 Mow</h2><p><img src="/../../imeges/BlogImg/Mow_21.12.06.png" alt="21.12.06_Mow"></p>
<p>The grass of the GitHub is related to Commit.</p>
<p><img src="/../../imeges/BlogImg/Mow_21.11.09.png" alt="Mow_21.11.09"></p>
<p>My the most green mow day is 2021/11/09</p>
<p>that day i created 120commits</p>
<p>because the github was created that day.</p>
<hr>
<p>I haven’t been able to do GitHub often these days.</p>
<p>This was because I focused all my energy<br>on the Kaggle competition as a team project.</p>
<p>In addition, due to the nature of the competition,<br>there was not much to commit.</p>
<p>My lawn is as green as Naver.</p>
<p>But the color of the grass<br>I want comes out when I commit more than 30.</p>
<p>When can I get out of this commit hell?</p>
<p>Please, I want to grow my lawn in a non-artificial way.</p>
<hr>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-11-29T09:41:27.000Z" title="2021. 11. 29. 오후 6:41:27">2021-11-29</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2021-12-02T08:11:52.205Z" title="2021. 12. 2. 오후 5:11:52">2021-12-02</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/R/">R</a><span> / </span><a class="link-muted" href="/categories/R/data-science/">data_science</a></span><span class="level-item">4분안에 읽기 (약 577 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/29/R/R%20for%20Ds_03%20ggplot2/">R for DS_03 ggplot2</a></h1><div class="content"><h2 id="Welcome"><a href="#Welcome" class="headerlink" title="Welcome"></a>Welcome</h2><hr>



<ul>
<li>저작권 : “R for DataScience by Hadley Wickham and Garrett Grolemund(O’Reilly). Copyright 2017 Garrett Grolemund, Hadley Wickham, 978-1-491-91039-9</li>
</ul>
<p><br><br><hr></p>
<br>

<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><hr>
<ul>
<li>how to visualise your data using ggplot2. R </li>
<li>ggplot2는 그래프를 그려주는 프로그램<br><a target="_blank" rel="noopener" href="https://byrneslab.net/classes/biol607/readings/wickham_layered-grammar.pdf">ggplot2 이론배경</a></li>
</ul>
<h3 id="3-1-1-Prerequisites"><a href="#3-1-1-Prerequisites" class="headerlink" title="3.1.1 Prerequisites"></a>3.1.1 Prerequisites</h3><hr>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">&quot;tidyverse&quot;</span>)</span><br><span class="line"></span><br><span class="line">library(tidyverse)</span><br><span class="line"><span class="comment">#&gt; ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</span></span><br><span class="line"><span class="comment">#&gt; ✔ ggplot2 3.3.2     ✔ purrr   0.3.4</span></span><br><span class="line"><span class="comment">#&gt; ✔ tibble  3.0.3     ✔ dplyr   1.0.2</span></span><br><span class="line"><span class="comment">#&gt; ✔ tidyr   1.1.2     ✔ stringr 1.4.0</span></span><br><span class="line"><span class="comment">#&gt; ✔ readr   1.4.0     ✔ forcats 0.5.0</span></span><br><span class="line"><span class="comment">#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span></span><br><span class="line"><span class="comment">#&gt; ✖ dplyr::filter() masks stats::filter()</span></span><br><span class="line"><span class="comment">#&gt; ✖ dplyr::lag()    masks stats::lag()</span></span><br><span class="line"></span><br><span class="line">install.packages(<span class="built_in">c</span>(<span class="string">&quot;nycflights13&quot;</span>, <span class="string">&quot;gapminder&quot;</span>, <span class="string">&quot;Lahman&quot;</span>))</span><br></pre></td></tr></table></figure>


<h3 id="3-2-First-steps"><a href="#3-2-First-steps" class="headerlink" title="3.2 First steps"></a>3.2 First steps</h3><hr>
<h4 id="3-2-1-The-mpg-data-frame"><a href="#3-2-1-The-mpg-data-frame" class="headerlink" title="3.2.1 The mpg data frame"></a>3.2.1 The mpg data frame</h4><ul>
<li>US Environmental Protection Agency on 38 models of car</li>
<li>A data frame is a rectangular</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mpg</span><br></pre></td></tr></table></figure>

<p><img src="/../../imeges/R_images/mpg.png" alt="mpg"></p>
<ul>
<li>displ  = car’s engine size, in litres</li>
<li>hwy = fuel efficiency in miles per gallon (mpg)</li>
</ul>
<h4 id="3-2-2-Creating-a-ggplot"><a href="#3-2-2-Creating-a-ggplot" class="headerlink" title="3.2.2 Creating a ggplot"></a>3.2.2 Creating a ggplot</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ggplot(data = mpg) +</span><br><span class="line">  geom_point(mapping = aes(x= displ, y = hwy))</span><br></pre></td></tr></table></figure>

<ul>
<li>ggplot(data = mpg) : 비어있는 Graph를 만들어 준다. </li>
<li>geom_point() : Layers 추가</li>
<li>scatterplot</li>
</ul>
<p><img src="/../../imeges/R_images/scatterplot_mpg.png" alt="scatterplot_mpg"></p>
<ul>
<li>mapping = aes(x= displ, y = hwy) : x와 y를 mapping 해 준다. </li>
</ul>
<h4 id="3-2-3-A-graphing-template"><a href="#3-2-3-A-graphing-template" class="headerlink" title="3.2.3 A graphing template"></a>3.2.3 A graphing template</h4><pre><code>ggplot(data = &lt;DATA&gt;) + 
  &lt;GEOM_FUNCTION&gt;(mapping = aes(&lt;MAPPINGS&gt;))
</code></pre>
<p>이런 식으로 쓰면 된다고 함. (모형)</p>
<h3 id="3-3-Aesthetic-mappings"><a href="#3-3-Aesthetic-mappings" class="headerlink" title="3.3 Aesthetic mappings"></a>3.3 Aesthetic mappings</h3><hr>
<p>aesthetic : 래전드 모양, 색 크기</p>
<ul>
<li>value :  data</li>
<li>level : aesthetic properties</li>
<li>size : 크기</li>
<li>color = colour, aesthetic의 색</li>
<li>alpha = shape , aesthetic의 모양 </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ggplot(data = mpg) +</span><br><span class="line">  geom_point(mapping = aes(x = displ, y = hwy, color = <span class="built_in">class</span>))</span><br></pre></td></tr></table></figure>

<p><img src="/../../imeges/R_images/mpg_color.png" alt="mpg_color"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ggplot(data = mpg) +</span><br><span class="line">  geom_point(mapping = aes(x = displ, y = hwy, size = <span class="built_in">class</span>))</span><br></pre></td></tr></table></figure>

<p><img src="/../../imeges/R_images/mpg_Size.png" alt="mpg_Size"></p>
<p> colour , color : 모두 써도 됨.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ggplot(data = mpg) +</span><br><span class="line">  geom_point(mapping = aes(x = displ, y= hwy, alpha = <span class="built_in">class</span>))</span><br></pre></td></tr></table></figure>


<p><img src="/../../imeges/R_images/mpg_alpha.png" alt="mpg_alpha"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ggplot(data = mpg) +</span><br><span class="line">  geom_point(mapping = aes(x = displ, y = hwy, shape = <span class="built_in">class</span>))</span><br></pre></td></tr></table></figure>
<p><img src="/../../imeges/R_images/mpg_shape.png" alt="mpg_shape"></p>
<hr>
<p>(수동으로 색 설정)</p>
<p>래전드를 생성 하지 않으면서 color만 바꿀 수 있다. </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ggplot(data = mpg) + </span><br><span class="line">  geom_point(mapping = aes(x = displ, y = hwy), color = <span class="string">&quot;blue&quot;</span>)</span><br></pre></td></tr></table></figure>


<p><img src="/../../imeges/R_images/Bulet25_.png" alt="mpg3.1_Bulet25"></p>
<br>
<br>


<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ggplot(data = mpg) + </span><br><span class="line">  geom_point(mapping = aes(x = displ, y = hwy, color = <span class="string">&quot;blue&quot;</span>))</span><br></pre></td></tr></table></figure>

<p>mpg 내의 data가 color이라는 column이 있다. </p>
<p>그 data가 “blue”인 data들의 displ과 hwy의 Graph</p>
<p><img src="/../../imeges/R_images/mpg_Color_Blue.png" alt="mpg_Color_Blue"></p>
<hr>
<p><a target="_blank" rel="noopener" href="https://r4ds.had.co.nz/data-visualisation.html#a-graphing-template">아직 덜 했다 !</a></p>
<p><a target="_blank" rel="noopener" href="https://bookdown.org/yihui/rmarkdown/">rmarkdown_Book</a></p>
<h3 id="R-publishing"><a href="#R-publishing" class="headerlink" title="R publishing"></a>R publishing</h3><p><a target="_blank" rel="noopener" href="https://rpubs.com/YoonHwa-P/Rggplot">Rggplot</a><br><img src="../../imeges/R_images/R_PUBS.png" alt="RPubs"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-11-29T08:21:20.000Z" title="2021. 11. 29. 오후 5:21:20">2021-11-29</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2021-12-14T05:54:02.996Z" title="2021. 12. 14. 오후 2:54:02">2021-12-14</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/R/">R</a><span> / </span><a class="link-muted" href="/categories/R/data-science/">data_science</a></span><span class="level-item">3분안에 읽기 (약 401 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/29/R/R_R4ds_Welcom/">R for DS_01 welcome &amp; Introduction</a></h1><div class="content"><h2 id="Welcome"><a href="#Welcome" class="headerlink" title="Welcome"></a>Welcome</h2><hr>

<p><img src="/../../imeges/R_images/R_Welcome.png" alt="R_Welcome"></p>
<ul>
<li>저작권 : “R for DataScience by Hadley Wickham and Garrett Grolemund(O’Reilly). Copyright 2017 Garrett Grolemund, Hadley Wickham, 978-1-491-91039-9</li>
</ul>
<p><br><br><hr></p>
<br>

<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><hr>

<pre><code>Data science is an exciting discipline that allows you to turn raw data into understanding, insight, and knowledge. The goal of “R for Data Science” is to help you learn the most important tools in R that will allow you to do data science. After reading this book, you’ll have the tools to tackle a wide variety of data science challenges, using the best parts of R.
</code></pre>
<p>R을 이용한 data science를 해 봅시다. </p>
<ul>
<li>ggplot2를 더 잘 쓰고 싶다면<br><a target="_blank" rel="noopener" href="https://byrneslab.net/classes/biol607/readings/wickham_layered-grammar.pdf">A Layered Grammar of Graphics</a><br>을 읽어보세요.</li>
</ul>
<h3 id="1-1-What-you-will-learn"><a href="#1-1-What-you-will-learn" class="headerlink" title="1.1 What you will learn"></a>1.1 What you will learn</h3><hr>

<p><img src="/../../imeges/R_images/R4ds_Learn.png" alt="R4ds_Learn"></p>
<h3 id="1-2-How-this-book-is-organised"><a href="#1-2-How-this-book-is-organised" class="headerlink" title="1.2 How this book is organised"></a>1.2 How this book is organised</h3><h3 id="1-3-What-you-won’t-learn"><a href="#1-3-What-you-won’t-learn" class="headerlink" title="1.3 What you won’t learn"></a>1.3 What you won’t learn</h3><h3 id="1-4-Prerequisites"><a href="#1-4-Prerequisites" class="headerlink" title="1.4 Prerequisites"></a>1.4 Prerequisites</h3><h4 id="1-4-1-R"><a href="#1-4-1-R" class="headerlink" title="1.4.1 R"></a>1.4.1 R</h4><ul>
<li><a target="_blank" rel="noopener" href="https://cloud.r-project.org/">https://cloud.r-project.org</a>,<h4 id="1-4-2-RStudio"><a href="#1-4-2-RStudio" class="headerlink" title="1.4.2 RStudio"></a>1.4.2 RStudio</h4></li>
<li><a target="_blank" rel="noopener" href="http://www.rstudio.com/download">http://www.rstudio.com/download</a>.</li>
<li><a target="_blank" rel="noopener" href="https://cran.r-project.org/bin/windows/Rtools/rtools40.html">https://cran.r-project.org/bin/windows/Rtools/rtools40.html</a></li>
<li>위에 Rtools(64 bit) 실행</li>
</ul>
<ul>
<li>설치 해야 할 programs : 확인<br><img src="/../../imeges/R_images/Rprograms_install.png" alt="Rprograms_install"></li>
</ul>
<h4 id="1-4-3-The-tidyverse"><a href="#1-4-3-The-tidyverse" class="headerlink" title="1.4.3 The tidyverse"></a>1.4.3 The tidyverse</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">&quot;tidyverse&quot;</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><a target="_blank" rel="noopener" href="https://cloud.r-project.org/">https://cloud.r-project.org/</a></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">library(tidyverse)</span><br><span class="line"><span class="comment">#&gt; ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</span></span><br><span class="line"><span class="comment">#&gt; ✔ ggplot2 3.3.2     ✔ purrr   0.3.4</span></span><br><span class="line"><span class="comment">#&gt; ✔ tibble  3.0.3     ✔ dplyr   1.0.2</span></span><br><span class="line"><span class="comment">#&gt; ✔ tidyr   1.1.2     ✔ stringr 1.4.0</span></span><br><span class="line"><span class="comment">#&gt; ✔ readr   1.4.0     ✔ forcats 0.5.0</span></span><br><span class="line"><span class="comment">#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span></span><br><span class="line"><span class="comment">#&gt; ✖ dplyr::filter() masks stats::filter()</span></span><br><span class="line"><span class="comment">#&gt; ✖ dplyr::lag()    masks stats::lag()</span></span><br></pre></td></tr></table></figure>

<ul>
<li>tidyverse : ggplot2, tibble, tidyr, readr, purrr, and dplyr packages<h4 id="1-4-4-Other-packages"><a href="#1-4-4-Other-packages" class="headerlink" title="1.4.4 Other packages"></a>1.4.4 Other packages</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="built_in">c</span>(<span class="string">&quot;nycflights13&quot;</span>, <span class="string">&quot;gapminder&quot;</span>, <span class="string">&quot;Lahman&quot;</span>))</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-5-Running-R-code"><a href="#1-5-Running-R-code" class="headerlink" title="1.5 Running R code"></a>1.5 Running R code</h3><h3 id="1-6-Getting-help-and-learning-more"><a href="#1-6-Getting-help-and-learning-more" class="headerlink" title="1.6 Getting help and learning more"></a>1.6 Getting help and learning more</h3><h3 id="1-7-Acknowledgements"><a href="#1-7-Acknowledgements" class="headerlink" title="1.7 Acknowledgements"></a>1.7 Acknowledgements</h3><h3 id="1-8-Colophon"><a href="#1-8-Colophon" class="headerlink" title="1.8 Colophon"></a>1.8 Colophon</h3><p><a target="_blank" rel="noopener" href="https://rpubs.com/YoonHwa-P">My_rpubs</a></p>
<hr>
<p>ref. </p>
<p><a target="_blank" rel="noopener" href="https://r4ds.had.co.nz/introduction.html">introduction</a></p>
<p><a target="_blank" rel="noopener" href="https://stat545.com/r-basics.html">Part 3 more</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-11-29T06:21:20.000Z" title="2021. 11. 29. 오후 3:21:20">2021-11-29</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2021-12-02T08:11:52.208Z" title="2021. 12. 2. 오후 5:11:52">2021-12-02</time>&nbsp;업데이트 됨</span><span class="level-item">10분안에 읽기 (약 1523 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/29/R/loan_classification/">loan_classification</a></h1><div class="content"><h2 id="1-병렬처리를-위한-패키지-불러오기"><a href="#1-병렬처리를-위한-패키지-불러오기" class="headerlink" title="1. 병렬처리를 위한 패키지 불러오기"></a>1. 병렬처리를 위한 패키지 불러오기</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">library(caret) <span class="comment"># 머신러닝을 위한 패키지</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">## Loading required package: ggplot2</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">## Loading required package: lattice</span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">library(tidyverse) <span class="comment"># 데이터 핸들링 및 시각화를 위한 패키지</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">## ✓ tibble  3.1.6     ✓ dplyr   1.0.7</span><br><span class="line">## ✓ tidyr   1.1.4     ✓ stringr 1.4.0</span><br><span class="line">## ✓ readr   2.1.0     ✓ forcats 0.5.1</span><br><span class="line">## ✓ purrr   0.3.4</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span><br><span class="line">## x dplyr::filter() masks stats::filter()</span><br><span class="line">## x dplyr::lag()    masks stats::lag()</span><br><span class="line">## x purrr::lift()   masks caret::lift()</span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">library(doParallel) <span class="comment"># 병렬처리를 위한 패키지</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">## Loading required package: foreach</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">## </span><br><span class="line">## Attaching package: &#x27;foreach&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">## The following objects are masked from &#x27;package:purrr&#x27;:</span><br><span class="line">## </span><br><span class="line">##     accumulate, when</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">## Loading required package: iterators</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">## Loading required package: parallel</span><br></pre></td></tr></table></figure>

<ul>
<li>병렬처리<ul>
<li>주 목적: 속도 때문에 씀</li>
<li>원리 및 기타 설명은 다음 링크를 참고한다. </li>
<li><a target="_blank" rel="noopener" href="https://freshrimpsushi.tistory.com/1266">https://freshrimpsushi.tistory.com/1266</a></li>
</ul>
</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">detectCores() <span class="comment"># 현재 자기 컴퓨터의 코어 개수를 반환한다</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">## [1] 8</span><br></pre></td></tr></table></figure>

<ul>
<li>병렬처리에 쓸 코어를 등록한다. </li>
<li>보통 50% 쓰는 것을 추천한다. (이유: 모형이 개발되는 동안 다른 간단한 작업도 해야 함)</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cl &lt;- parallel::makeCluster(<span class="number">6</span>, setup_timeout = <span class="number">0.5</span>)</span><br><span class="line">registerDoParallel(cl)</span><br></pre></td></tr></table></figure>

<h2 id="2-데이터-가져오기"><a href="#2-데이터-가져오기" class="headerlink" title="2. 데이터 가져오기"></a>2. 데이터 가져오기</h2><ul>
<li>경로를 확인한 뒤 데이터를 가져온다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">loan_data &lt;- read.csv(<span class="string">&quot;data/cleaned_loan_data.csv&quot;</span>, stringsAsFactors = <span class="literal">FALSE</span>)</span><br><span class="line"><span class="built_in">dim</span>(loan_data)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">## [1] 29091     8</span><br></pre></td></tr></table></figure>

<h2 id="3-데이터-전처리"><a href="#3-데이터-전처리" class="headerlink" title="3. 데이터 전처리"></a>3. 데이터 전처리</h2><ul>
<li>경로를 확인한 뒤 데이터를 가져온다. </li>
<li>먼저 중복값을 확인한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sapply(loan_data, <span class="keyword">function</span>(x) <span class="built_in">sum</span>(<span class="built_in">is.na</span>(x)))</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">##    loan_status      loan_amnt          grade home_ownership     annual_inc </span><br><span class="line">##              0              0              0              0              0 </span><br><span class="line">##            age        emp_cat         ir_cat </span><br><span class="line">##              0              0              0</span><br></pre></td></tr></table></figure>

<ul>
<li>데이터 타입을 확인한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loan_data %&gt;% duplicated() %&gt;% <span class="built_in">sum</span>() <span class="comment"># 374개 확인</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">## [1] 374</span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loan_data2 &lt;- loan_data %&gt;% distinct()</span><br></pre></td></tr></table></figure>

<ul>
<li>데이터 타입을 확인한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">glimpse(loan_data2)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">## Rows: 28,717</span><br><span class="line">## Columns: 8</span><br><span class="line">## $ loan_status    &lt;int&gt; 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0…</span><br><span class="line">## $ loan_amnt      &lt;int&gt; 5000, 2400, 10000, 5000, 3000, 12000, 9000, 3000, 10000…</span><br><span class="line">## $ grade          &lt;chr&gt; &quot;B&quot;, &quot;C&quot;, &quot;C&quot;, &quot;A&quot;, &quot;E&quot;, &quot;B&quot;, &quot;C&quot;, &quot;B&quot;, &quot;B&quot;, &quot;D&quot;, &quot;C&quot;, …</span><br><span class="line">## $ home_ownership &lt;chr&gt; &quot;RENT&quot;, &quot;RENT&quot;, &quot;RENT&quot;, &quot;RENT&quot;, &quot;RENT&quot;, &quot;OWN&quot;, &quot;RENT&quot;, …</span><br><span class="line">## $ annual_inc     &lt;dbl&gt; 24000.00, 12252.00, 49200.00, 36000.00, 48000.00, 75000…</span><br><span class="line">## $ age            &lt;int&gt; 33, 31, 24, 39, 24, 28, 22, 22, 28, 22, 23, 27, 30, 24,…</span><br><span class="line">## $ emp_cat        &lt;chr&gt; &quot;0-15&quot;, &quot;15-30&quot;, &quot;0-15&quot;, &quot;0-15&quot;, &quot;0-15&quot;, &quot;0-15&quot;, &quot;0-15&quot;…</span><br><span class="line">## $ ir_cat         &lt;chr&gt; &quot;8-11&quot;, &quot;Missing&quot;, &quot;11-13.5&quot;, &quot;Missing&quot;, &quot;Missing&quot;, &quot;11…</span><br></pre></td></tr></table></figure>

<ul>
<li>우선 타겟 데이터는 영어로 표현한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">loan_data2$loan_status &lt;- factor(loan_data2$loan_status, levels = <span class="built_in">c</span>(<span class="number">0</span>, <span class="number">1</span>), labels = <span class="built_in">c</span>(<span class="string">&quot;non_default&quot;</span>, <span class="string">&quot;default&quot;</span>))</span><br><span class="line">loan_data2$grade &lt;- as.factor(loan_data2$grade)</span><br><span class="line">loan_data2$home_ownership &lt;- as.factor(loan_data2$home_ownership)</span><br></pre></td></tr></table></figure>

<ul>
<li>만약 한꺼번에 하고 싶다면 다음과 같이 할 수 있다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">loan_data2 &lt;- loan_data2 %&gt;% </span><br><span class="line">  mutate_if(<span class="built_in">is.character</span>, as.factor)</span><br></pre></td></tr></table></figure>

<ul>
<li>chr 데이터가 모두 factor로 바뀌었는지 확인한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">glimpse(loan_data2)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">## Rows: 28,717</span><br><span class="line">## Columns: 8</span><br><span class="line">## $ loan_status    &lt;fct&gt; non_default, non_default, non_default, non_default, non…</span><br><span class="line">## $ loan_amnt      &lt;int&gt; 5000, 2400, 10000, 5000, 3000, 12000, 9000, 3000, 10000…</span><br><span class="line">## $ grade          &lt;fct&gt; B, C, C, A, E, B, C, B, B, D, C, A, B, A, B, B, B, B, B…</span><br><span class="line">## $ home_ownership &lt;fct&gt; RENT, RENT, RENT, RENT, RENT, OWN, RENT, RENT, RENT, RE…</span><br><span class="line">## $ annual_inc     &lt;dbl&gt; 24000.00, 12252.00, 49200.00, 36000.00, 48000.00, 75000…</span><br><span class="line">## $ age            &lt;int&gt; 33, 31, 24, 39, 24, 28, 22, 22, 28, 22, 23, 27, 30, 24,…</span><br><span class="line">## $ emp_cat        &lt;fct&gt; 0-15, 15-30, 0-15, 0-15, 0-15, 0-15, 0-15, 0-15, 0-15, …</span><br><span class="line">## $ ir_cat         &lt;fct&gt; 8-11, Missing, 11-13.5, Missing, Missing, 11-13.5, 11-1…</span><br></pre></td></tr></table></figure>

<h2 id="4-데이터-분리"><a href="#4-데이터-분리" class="headerlink" title="4. 데이터 분리"></a>4. 데이터 분리</h2><ul>
<li>훈련 데이터와 테스트 데이터로 분리한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">set.seed(<span class="number">2021</span>)</span><br><span class="line">inx   &lt;- createDataPartition(loan_data2$loan_status, p = <span class="number">0.6</span>, <span class="built_in">list</span> = <span class="built_in">F</span>)</span><br><span class="line">train &lt;- loan_data2[ inx, ]</span><br><span class="line">test  &lt;- loan_data2[-inx, ]</span><br></pre></td></tr></table></figure>

<h2 id="5-모형-개발-준비"><a href="#5-모형-개발-준비" class="headerlink" title="5. 모형 개발 준비"></a>5. 모형 개발 준비</h2><ul>
<li>caret 패키지에서의 모형 개발 관련해서는 다음 웹사이트에서 확인 하기를 바란다. <ul>
<li>Ref. <a target="_blank" rel="noopener" href="http://appliedpredictivemodeling.com/">http://appliedpredictivemodeling.com/</a></li>
</ul>
</li>
</ul>
<h3 id="1-Controller"><a href="#1-Controller" class="headerlink" title="(1) Controller"></a>(1) Controller</h3><ul>
<li>trainControl 함수를 활용하여 기본 세팅을 진행한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">control &lt;- trainControl(</span><br><span class="line">  method  = <span class="string">&quot;repeatedcv&quot;</span>,</span><br><span class="line">  number  = <span class="number">10</span>, <span class="comment"># 10겹</span></span><br><span class="line">  repeats = <span class="number">3</span>, <span class="comment"># 3번</span></span><br><span class="line">  search  = <span class="string">&quot;grid&quot;</span>,</span><br><span class="line">  classProbs = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure>

<h3 id="2-Feature-Engineering"><a href="#2-Feature-Engineering" class="headerlink" title="(2) Feature Engineering"></a>(2) Feature Engineering</h3><ul>
<li>통계처리를 진행한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">preProc &lt;- <span class="built_in">c</span>(<span class="string">&quot;BoxCox&quot;</span>, </span><br><span class="line">             <span class="string">&quot;center&quot;</span>,</span><br><span class="line">             <span class="string">&quot;scale&quot;</span>,</span><br><span class="line">             <span class="string">&quot;spatialSign&quot;</span>,</span><br><span class="line">             <span class="string">&quot;corr&quot;</span>,</span><br><span class="line">             <span class="string">&quot;zv&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="3-독립-변수와-종속-변수의-정의"><a href="#3-독립-변수와-종속-변수의-정의" class="headerlink" title="(3) 독립 변수와 종속 변수의 정의"></a>(3) 독립 변수와 종속 변수의 정의</h3><ul>
<li> 독립변수와 종속 변수를 정의한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frml &lt;- loan_status ~ loan_amnt + grade + home_ownership + annual_inc + age + emp_cat + ir_cat</span><br></pre></td></tr></table></figure>

<h2 id="6-모형개발"><a href="#6-모형개발" class="headerlink" title="6. 모형개발"></a>6. 모형개발</h2><ul>
<li>개발준비가 끝났다면, 다양한 모델을 개발하도록 한다. </li>
<li></li>
</ul>
<h3 id="1-로지스틱회귀분석"><a href="#1-로지스틱회귀분석" class="headerlink" title="(1) 로지스틱회귀분석"></a>(1) 로지스틱회귀분석</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">logis &lt;- train(</span><br><span class="line">  frml, </span><br><span class="line">  data = train, </span><br><span class="line">  method = <span class="string">&quot;glm&quot;</span>, </span><br><span class="line">  metric = <span class="string">&quot;Accuracy&quot;</span>, </span><br><span class="line">  trControl = control, </span><br><span class="line">  preProcess = preProc</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">logis</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">## Generalized Linear Model </span><br><span class="line">## </span><br><span class="line">## 17231 samples</span><br><span class="line">##     7 predictor</span><br><span class="line">##     2 classes: &#x27;non_default&#x27;, &#x27;default&#x27; </span><br><span class="line">## </span><br><span class="line">## Pre-processing: Box-Cox transformation (3), centered (20), scaled (20),</span><br><span class="line">##  spatial sign transformation (20) </span><br><span class="line">## Resampling: Cross-Validated (10 fold, repeated 3 times) </span><br><span class="line">## Summary of sample sizes: 15509, 15508, 15508, 15507, 15508, 15507, ... </span><br><span class="line">## Resampling results:</span><br><span class="line">## </span><br><span class="line">##   Accuracy   Kappa        </span><br><span class="line">##   0.8878377  -0.0004200657</span><br></pre></td></tr></table></figure>
<h3 id="2-의사결정나무"><a href="#2-의사결정나무" class="headerlink" title="(2) 의사결정나무"></a>(2) 의사결정나무</h3><ul>
<li>의사결정 나무에서 하이퍼파라미터를 정의한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpartGrid &lt;- expand.grid(cp = <span class="built_in">c</span>(<span class="number">0.001</span>, <span class="number">0.005</span>, <span class="number">0.01</span>))</span><br><span class="line">modelLookup(<span class="string">&quot;rpart&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">##   model parameter                label forReg forClass probModel</span><br><span class="line">## 1 rpart        cp Complexity Parameter   TRUE     TRUE      TRUE</span><br></pre></td></tr></table></figure>

<ul>
<li>이제 모형을 개발한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">set.seed(<span class="number">2021</span>)</span><br><span class="line">rpt &lt;- train(</span><br><span class="line">  frml, </span><br><span class="line">  data = train,</span><br><span class="line">  method     = <span class="string">&quot;rpart&quot;</span>,</span><br><span class="line">  metric     = <span class="string">&quot;Accuracy&quot;</span>,</span><br><span class="line">  trControl  = control,</span><br><span class="line">  preProcess = preProc,</span><br><span class="line">  tuneGrid   = rpartGrid)</span><br><span class="line"></span><br><span class="line">rpt</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">## CART </span><br><span class="line">## </span><br><span class="line">## 17231 samples</span><br><span class="line">##     7 predictor</span><br><span class="line">##     2 classes: &#x27;non_default&#x27;, &#x27;default&#x27; </span><br><span class="line">## </span><br><span class="line">## Pre-processing: Box-Cox transformation (3), centered (20), scaled (20),</span><br><span class="line">##  spatial sign transformation (20) </span><br><span class="line">## Resampling: Cross-Validated (10 fold, repeated 3 times) </span><br><span class="line">## Summary of sample sizes: 15508, 15507, 15508, 15508, 15508, 15508, ... </span><br><span class="line">## Resampling results across tuning parameters:</span><br><span class="line">## </span><br><span class="line">##   cp     Accuracy   Kappa      </span><br><span class="line">##   0.001  0.8872189  0.008546392</span><br><span class="line">##   0.005  0.8880506  0.000000000</span><br><span class="line">##   0.010  0.8880506  0.000000000</span><br><span class="line">## </span><br><span class="line">## Accuracy was used to select the optimal model using the largest value.</span><br><span class="line">## The final value used for the model was cp = 0.01.</span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ggplot(rpt)</span><br></pre></td></tr></table></figure>

<p><img src="../../../../Desktop/R_edu/source_2021/project/team_03/loan_classification_files/figure-html/unnamed-chunk-18-1.png"><!-- --></p>
<h3 id="3-랜덤포레스트"><a href="#3-랜덤포레스트" class="headerlink" title="(3) 랜덤포레스트"></a>(3) 랜덤포레스트</h3><ul>
<li>이번에는 랜덤포레스트를 사용하기 위한 하이퍼파라미터를 정의한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rfGrid &lt;- expand.grid(mtry = <span class="built_in">c</span>(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>))</span><br><span class="line">modelLookup(<span class="string">&quot;rf&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">##   model parameter                         label forReg forClass probModel</span><br><span class="line">## 1    rf      mtry #Randomly Selected Predictors   TRUE     TRUE      TRUE</span><br></pre></td></tr></table></figure>

<ul>
<li>랜덤포레스트 모델을 개발한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">rf &lt;- train(</span><br><span class="line">  frml, </span><br><span class="line">  data = train, </span><br><span class="line">  method = <span class="string">&quot;rf&quot;</span>, </span><br><span class="line">  metric = <span class="string">&quot;Accuracy&quot;</span>, </span><br><span class="line">  trControl = control, </span><br><span class="line">  preProcess = preProc, </span><br><span class="line">  tuneGrid = rfGrid</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">rf</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">## Random Forest </span><br><span class="line">## </span><br><span class="line">## 17231 samples</span><br><span class="line">##     7 predictor</span><br><span class="line">##     2 classes: &#x27;non_default&#x27;, &#x27;default&#x27; </span><br><span class="line">## </span><br><span class="line">## Pre-processing: Box-Cox transformation (3), centered (20), scaled (20),</span><br><span class="line">##  spatial sign transformation (20) </span><br><span class="line">## Resampling: Cross-Validated (10 fold, repeated 3 times) </span><br><span class="line">## Summary of sample sizes: 15508, 15508, 15507, 15508, 15509, 15508, ... </span><br><span class="line">## Resampling results across tuning parameters:</span><br><span class="line">## </span><br><span class="line">##   mtry  Accuracy   Kappa      </span><br><span class="line">##   3     0.8768692  0.005206944</span><br><span class="line">##   4     0.8774109  0.005965678</span><br><span class="line">##   5     0.8777978  0.008642398</span><br><span class="line">## </span><br><span class="line">## Accuracy was used to select the optimal model using the largest value.</span><br><span class="line">## The final value used for the model was mtry = 5.</span><br></pre></td></tr></table></figure>


<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ggplot(rf)</span><br></pre></td></tr></table></figure>

<p><img src="../../../../Desktop/R_edu/source_2021/project/team_03/loan_classification_files/figure-html/unnamed-chunk-21-1.png"><!-- --></p>
<h2 id="7-모형-Resampling"><a href="#7-모형-Resampling" class="headerlink" title="7. 모형 Resampling"></a>7. 모형 Resampling</h2><ul>
<li>3개의 모형을 비교하도록 한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">resamps &lt;- resamples(</span><br><span class="line">  <span class="built_in">list</span>(glm = logis,</span><br><span class="line">       rpt = rpt,</span><br><span class="line">       rf = rf))</span><br><span class="line"></span><br><span class="line">summary(resamps)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">## </span><br><span class="line">## Call:</span><br><span class="line">## summary.resamples(object = resamps)</span><br><span class="line">## </span><br><span class="line">## Models: glm, rpt, rf </span><br><span class="line">## Number of resamples: 30 </span><br><span class="line">## </span><br><span class="line">## Accuracy </span><br><span class="line">##          Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA&#x27;s</span><br><span class="line">## glm 0.8861789 0.8879861 0.8879861 0.8878377 0.8879861 0.8885017    0</span><br><span class="line">## rpt 0.8879861 0.8879861 0.8879861 0.8880506 0.8879861 0.8885665    0</span><br><span class="line">## rf  0.8723157 0.8758701 0.8772134 0.8777978 0.8797156 0.8839234    0</span><br><span class="line">## </span><br><span class="line">## Kappa </span><br><span class="line">##             Min.      1st Qu.    Median          Mean    3rd Qu.       Max.</span><br><span class="line">## glm -0.004571755  0.000000000 0.0000000 -0.0004200657 0.00000000 0.00000000</span><br><span class="line">## rpt  0.000000000  0.000000000 0.0000000  0.0000000000 0.00000000 0.00000000</span><br><span class="line">## rf  -0.024423256 -0.003628695 0.0129503  0.0086423981 0.01672265 0.03835002</span><br><span class="line">##     NA&#x27;s</span><br><span class="line">## glm    0</span><br><span class="line">## rpt    0</span><br><span class="line">## rf     0</span><br></pre></td></tr></table></figure>


<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bwplot(resamps, layout = <span class="built_in">c</span>(<span class="number">2</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure>

<p><img src="../../../../Desktop/R_edu/source_2021/project/team_03/loan_classification_files/figure-html/unnamed-chunk-23-1.png"><!-- --></p>
<h2 id="8-최종모형-선정-및-모형평가"><a href="#8-최종모형-선정-및-모형평가" class="headerlink" title="8. 최종모형 선정 및 모형평가"></a>8. 최종모형 선정 및 모형평가</h2><h3 id="1-Confusion-Matrix"><a href="#1-Confusion-Matrix" class="headerlink" title="(1) Confusion Matrix"></a>(1) Confusion Matrix</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pred_rpt &lt;- predict(rf, test, type = <span class="string">&quot;prob&quot;</span>)</span><br><span class="line">pred_rpt$loan_status &lt;- ifelse(pred_rpt$non_default &gt; <span class="number">0.85</span>, <span class="number">0</span>, <span class="number">1</span>) <span class="comment"># cut-off를 조정하며 맞춰보자</span></span><br><span class="line">pred_rpt$loan_status &lt;- factor(pred_rpt$loan_status, levels = <span class="built_in">c</span>(<span class="number">0</span>, <span class="number">1</span>), labels = <span class="built_in">c</span>(<span class="string">&quot;non_default&quot;</span>, <span class="string">&quot;default&quot;</span>))</span><br><span class="line">confusionMatrix(pred_rpt$loan_status, test$loan_status, positive = <span class="string">&quot;non_default&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">## Confusion Matrix and Statistics</span><br><span class="line">## </span><br><span class="line">##              Reference</span><br><span class="line">## Prediction    non_default default</span><br><span class="line">##   non_default        7428     787</span><br><span class="line">##   default            2772     499</span><br><span class="line">##                                           </span><br><span class="line">##                Accuracy : 0.6901          </span><br><span class="line">##                  95% CI : (0.6816, 0.6986)</span><br><span class="line">##     No Information Rate : 0.888           </span><br><span class="line">##     P-Value [Acc &gt; NIR] : 1               </span><br><span class="line">##                                           </span><br><span class="line">##                   Kappa : 0.0694          </span><br><span class="line">##                                           </span><br><span class="line">##  Mcnemar&#x27;s Test P-Value : &lt;2e-16          </span><br><span class="line">##                                           </span><br><span class="line">##             Sensitivity : 0.7282          </span><br><span class="line">##             Specificity : 0.3880          </span><br><span class="line">##          Pos Pred Value : 0.9042          </span><br><span class="line">##          Neg Pred Value : 0.1526          </span><br><span class="line">##              Prevalence : 0.8880          </span><br><span class="line">##          Detection Rate : 0.6467          </span><br><span class="line">##    Detection Prevalence : 0.7152          </span><br><span class="line">##       Balanced Accuracy : 0.5581          </span><br><span class="line">##                                           </span><br><span class="line">##        &#x27;Positive&#x27; Class : non_default     </span><br><span class="line">## </span><br></pre></td></tr></table></figure>

<h3 id="2-ROC-Curve-amp-AUC"><a href="#2-ROC-Curve-amp-AUC" class="headerlink" title="(2) ROC Curve &amp; AUC"></a>(2) ROC Curve &amp; AUC</h3><ul>
<li>이번에는 ROC Curve와 AUC를 계산하도록 한다. </li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">library(ROCR)</span><br><span class="line">pr &lt;- prediction(<span class="built_in">as.numeric</span>(pred_rpt$loan_status) - <span class="number">1</span>, <span class="built_in">as.numeric</span>(test$loan_status) - <span class="number">1</span>)</span><br><span class="line">prf &lt;- performance(pr, measure = <span class="string">&quot;tpr&quot;</span>, x.measure = <span class="string">&quot;fpr&quot;</span>)</span><br><span class="line">plot(prf, col = <span class="string">&quot;blue&quot;</span>)</span><br><span class="line">abline(a = <span class="number">0</span>, b = <span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p><img src="../../../../Desktop/R_edu/source_2021/project/team_03/loan_classification_files/figure-html/unnamed-chunk-25-1.png"><!-- --></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># AUC = Area Under Curve의 뜻으로</span></span><br><span class="line">auc &lt;- performance(pr, measure = <span class="string">&quot;auc&quot;</span>)</span><br><span class="line">auc &lt;- auc@y.values[[<span class="number">1</span>]]; </span><br><span class="line">auc</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">## [1] 0.5581301</span><br></pre></td></tr></table></figure>














</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-11-28T04:18:29.000Z" title="2021. 11. 28. 오후 1:18:29">2021-11-28</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2021-11-28T05:54:44.090Z" title="2021. 11. 28. 오후 2:54:44">2021-11-28</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/python-plotly/">python - plotly</a></span><span class="level-item">한 시간안에 읽기 (약 13435 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/28/kgg/KaggleCompetition_ver33byYH_Finall/">Newbie as a data scientist in East Asia! (kaggle Competition)</a></h1><div class="content"><h2 id="Newbie-as-a-data-scientist-in-East-Asia"><a href="#Newbie-as-a-data-scientist-in-East-Asia" class="headerlink" title="Newbie as a data scientist in East Asia!"></a>Newbie as a data scientist in East Asia!</h2><p><img src="/../imeges/img/inotebookIMG.png" alt="inotebookIMG"><br><a target="_blank" rel="noopener" href="https://www.kaggle.com/yoonhwayam/newbies-as-a-data-scientist-in-east-asia/notebook">notebook</a></p>
<hr>
<p>Hello, Kaggers! Nice to meet you! </p>
<p>We are a team in East Asia that wants to be <strong>data scientists</strong> </p>
<p>As newbies, we want to know what and/or how Kaggler is!</p>
<p>so, let’s have a time to learn about Kaggle as a senior with us from now.</p>
<p>If you want to support us <em>(or feel qute)</em> , I ask for a comment! (PLZ) ^0^</p>
<p>And !! Since we are <strong>not native English speakers</strong>, please ask questions if there is a context that you don’t understand because it’s not smooth.</p>
<p>I’ll do my best to answer.</p>
<h1 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1 Introduction"></a>1 Introduction</h1><ol>
<li>what is the Kaggle<br>a subsidiary of <strong>Google LLC</strong>, is an online <strong>community of data scientists and machine learning practitioners</strong>.</li>
</ol>
<p>If we use kaggle, we can take the following advantages.</p>
<pre><code>1) to find and publish data sets
2) to explore and build models in a web-based data-science environment
3) to work with other data scientists and machine learning engineers
4) to enter competitions to solve data science challenges
</code></pre>
<p>so, As data scientist beginners, we try to participate in the Kaggle competition.</p>
<hr>
<ol start="2">
<li><strong>21 Kaggle</strong> Machine Learning and Data Science Survey</li>
</ol>
<ul>
<li>The most comprehensive dataset available for ML and data science status</li>
</ul>
<p>This is the theme of the competition we will participate in this time.</p>
<p>To become a data scientist, we compared what kind of job Kagglers has, how much experience he has, and how much money he earns by dividing into the world and East Asia.</p>
<p>In addition, there are detailed comparisons in East Asia, and ultimately, we will to find out what data the Kaggle competition data shows.</p>
<p>The 2021 survey, like 2017, 2018, 2019, and 2020, launched an industry-wide survey that comprehensively presents the current status of data science and machine learning.</p>
<p>The survey was conducted from 09/01/2021 to 10/04/2021, and after cleaning the data, Kaggle received 25,973 responses!</p>
<p>This year, Kaggle will award $30,000 in prize money to winner in this competition.</p>
<p>we want to receive $30,000 for winning the competition, but we just hope it will help us become a <em>data scientist</em> because it is difficult for a rookie.</p>
<p>Ref.</p>
<p>[1] <a target="_blank" rel="noopener" href="https://www.kaggle.com/docs/competitions">Kgg_competitions</a></p>
<p>[2] <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Kaggle">Kgg_definition</a></p>
<p>[3] <a target="_blank" rel="noopener" href="https://www.kaggle.com/c/kaggle-survey-2021">kaggle-survey-2021</a></p>
<h1 id="1-2-Contents"><a href="#1-2-Contents" class="headerlink" title="1.2 Contents"></a>1.2 Contents</h1><hr>
<blockquote>
<pre><code>Introduction
Contents
Summary
Data Import and Preprocessing
Plots and Description
</code></pre>
</blockquote>
<blockquote>
<pre><code>Kaggle&#39;s transformation. (World/East_Asia)
    1 user transformation
    2 Gender transformation
    3 Job transformation
    4 Age  transformation
    5 Degree transformation
    6 Experience transformation
    7 Salary transformation
    8 Language transformation
</code></pre>
</blockquote>
<blockquote>
<pre><code>Position of Data Scientist in East Asia
    1 Salary
    2 Salary-Experience
    3 Degree
    4 Salary-Degree
    5 Language
</code></pre>
</blockquote>
<blockquote>
<pre><code>Discussion
Close
</code></pre>
</blockquote>
<h1 id="1-3-Summary"><a href="#1-3-Summary" class="headerlink" title="1.3 Summary"></a>1.3 Summary</h1><hr>
<h3> used data </h3>

<p>We used all the data for five years. (2017~2021)</p>
<h3>  used Language and Library </h3>

<ul>
<li>Numpy</li>
<li>Metplotlib</li>
<li>seaborn</li>
<li>Plotly<ul>
<li>plotly.express : An interface where you can draw a graph easily and quickly.</li>
<li>plotly.graph_objects : You can customize it in the way you want because you can do more detailed work than express.</li>
<li>plotly.figure_factory : Used before express existed and remains in the module for compatibility with previous versions</li>
<li>plotly.subplots : A module that displays multiple graphs in one figure.</li>
<li>plotly.offline : Save locally and create HTML that opens in a web browser and make it standalone</li>
</ul>
</li>
</ul>
<h3> Grouping data sections </h3>

<ul>
<li>East Asia and World<ul>
<li>East Asia : [‘China’,’Taiwan’, ‘South Korea’, ‘Japan’]</li>
<li>World : all data</li>
</ul>
</li>
<li>Gender<ul>
<li>[Male, Female, Others]</li>
</ul>
</li>
<li>Job<ul>
<li><strong>Data_Analyst</strong> =[‘Data Analyst’,’Data Miner,Information technology’,’Data Miner’,<pre><code>  &#39;Predictive Modeler&#39;,&#39;Information technology, networking, or system administration&#39;, 
  &#39;A business discipline (accounting, economics, finance, etc.)&#39;, &#39;Business Analyst&#39;, Humanities&#39;, &#39;Statistician&#39;, &#39;Mathematics or statistics&#39;, &#39;Medical or life sciences (biology, chemistry, medicine, etc.)&#39;, Physics or astronomy&#39;,  &#39;Social sciences (anthropology, psychology, sociology, etc.)&#39;, &#39;Environmental science or geology&#39;, &#39;Humanities (history, literature, philosophy, etc.)&#39;]
</code></pre>
</li>
<li><strong>Data_Scientist</strong> =[‘Data Scientist’,  ‘Research Scientist’, ‘Researcher’,’Machine Learning Engineer’, ‘Scientist/Researcher’]</li>
<li><strong>Developer</strong>=[‘Developer Relations/Advocacy’,’Data Engineer’,’Engineer’,’Engineering (non-computer focused)’,<br>  ‘Programmer’,’Software Engineer’, ‘Computer Scientist’,’Computer science (software engineering, etc.)’,  ‘Fine arts or performing arts’,’Product Manager’, ‘Software Developer/Software Engineer’, ‘Product/Project Manager’,’Program/Project Manager’,’DBA/Database Engineer’]</li>
<li><strong>Not_Employed</strong> =[‘Currently not employed’, ‘Not employed’, ‘Student’]</li>
<li><strong>Others</strong> = [‘I never declared a major’, ‘Other’]</li>
</ul>
</li>
<li>Age<ul>
<li>[18-21, 20s, 30s, 40s, 50s, 60s&lt;]</li>
</ul>
</li>
<li>Degree<ul>
<li>[‘<del>college’, ‘Bachelor’s degree’,’Master’s degree’, ‘Doctoral degree</del>‘, ‘etc’]</li>
</ul>
</li>
<li>Experience<ul>
<li>[&lt;1, 1-3, 3-5, 5-10, 10+]</li>
</ul>
</li>
<li>Salary<ul>
<li>[&lt;999, 1,000-20,000, 20,000-59,999, 60,000-99,999, 100,000-199,999, 200,000~]</li>
</ul>
</li>
</ul>
<p><img src="/../imeges/img/All.png" alt="All"></p>
<p><img src="/../imeges/img/East_Asia_Data_Scientist.png" alt="East_Asia_Data_Scientist"></p>
<h1 id="2-data-Import-and-pre-treatments"><a href="#2-data-Import-and-pre-treatments" class="headerlink" title="2. data Import and pre-treatments"></a>2. data Import and pre-treatments</h1><hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> matplotlib.pylab <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> plotly.io <span class="keyword">as</span> pio</span><br><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> plotly.figure_factory <span class="keyword">as</span> ff</span><br><span class="line"><span class="keyword">from</span> plotly.subplots <span class="keyword">import</span> make_subplots</span><br><span class="line"><span class="keyword">from</span> plotly.offline <span class="keyword">import</span> init_notebook_mode, iplot</span><br><span class="line">init_notebook_mode(connected=<span class="literal">True</span>)</span><br><span class="line">pio.templates.default = <span class="string">&quot;none&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">for</span> dirname, _, filenames <span class="keyword">in</span> os.walk(<span class="string">&#x27;/kaggle/input&#x27;</span>):</span><br><span class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> filenames:</span><br><span class="line">        <span class="built_in">print</span>(os.path.join(dirname, filename))</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df17= pd.read_csv(<span class="string">&quot;/kaggle/input/kaggle-survey-2017/multipleChoiceResponses.csv&quot;</span>, encoding=<span class="string">&quot;ISO-8859-1&quot;</span>)</span><br><span class="line">df18= pd.read_csv(<span class="string">&quot;/kaggle/input/kaggle-survey-2018/multipleChoiceResponses.csv&quot;</span>, )</span><br><span class="line">df19= pd.read_csv(<span class="string">&quot;/kaggle/input/kaggle-survey-2019/multiple_choice_responses.csv&quot;</span>, )</span><br><span class="line">df20= pd.read_csv(<span class="string">&quot;/kaggle/input/kaggle-survey-2020/kaggle_survey_2020_responses.csv&quot;</span>, )</span><br><span class="line">df21= pd.read_csv(<span class="string">&quot;/kaggle/input/kaggle-survey-2021/kaggle_survey_2021_responses.csv&quot;</span>, )</span><br></pre></td></tr></table></figure>

<h1 id="3-plots-and-description"><a href="#3-plots-and-description" class="headerlink" title="3. plots and description"></a>3. plots and description</h1><hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#질문 제거하기, replace</span></span><br><span class="line">df17= df17.iloc[<span class="number">1</span>:, :].replace(<span class="string">&quot;People &#x27;s Republic of China&quot;</span>,<span class="string">&#x27;China&#x27;</span>)</span><br><span class="line">df18= df18.iloc[<span class="number">1</span>:, :].replace(<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;South Korea&#x27;</span>)</span><br><span class="line">df19= df19.iloc[<span class="number">1</span>:, :].replace(<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;South Korea&#x27;</span>)</span><br><span class="line">df20= df20.iloc[<span class="number">1</span>:, :].replace(<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;South Korea&#x27;</span>)</span><br><span class="line">df21= df21.iloc[<span class="number">1</span>:, :]</span><br><span class="line"></span><br><span class="line"><span class="comment">## East Asia에는 대한민국, 일본, 중국, 타이완, 몽골, 북조선 총 6개의 국가가 속해 있다. </span></span><br><span class="line"><span class="comment">## 이유는 알 수 없지만, 18년도엔 타이완이 없다. </span></span><br><span class="line">EastAsia17 = [<span class="string">&#x27;China&#x27;</span>,<span class="string">&quot;People &#x27;s Republic of China&quot;</span>, <span class="string">&#x27;Taiwan&#x27;</span>, <span class="string">&#x27;South Korea&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>]</span><br><span class="line">EastAsia18= [<span class="string">&#x27;China&#x27;</span>, <span class="string">&#x27;South Korea&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>, <span class="string">&#x27;Republic of Korea&#x27;</span>] </span><br><span class="line">EastAsia19 = [<span class="string">&#x27;China&#x27;</span>,<span class="string">&#x27;Taiwan&#x27;</span>, <span class="string">&#x27;South Korea&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>, <span class="string">&#x27;Republic of Korea&#x27;</span>]</span><br><span class="line">EastAsia20 = [<span class="string">&#x27;China&#x27;</span>,<span class="string">&#x27;Taiwan&#x27;</span>, <span class="string">&#x27;South Korea&#x27;</span>,<span class="string">&#x27;Republic of Korea&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>]</span><br><span class="line">EastAsia21 = [<span class="string">&#x27;China&#x27;</span>,<span class="string">&#x27;Taiwan&#x27;</span>, <span class="string">&#x27;South Korea&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>]</span><br><span class="line">EastAsia = [<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;China&#x27;</span>,<span class="string">&#x27;Taiwan&#x27;</span>, <span class="string">&#x27;South Korea&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>, <span class="string">&quot;People &#x27;s Republic of China&quot;</span> ]</span><br><span class="line"></span><br><span class="line">df21_Ea = df21[df21[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df21_Wo = df21[~df21[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df21[<span class="string">&#x27;region&#x27;</span>]=[<span class="string">&quot;EastAsia&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> EastAsia <span class="keyword">else</span> <span class="string">&quot;World&quot;</span> <span class="keyword">for</span> x <span class="keyword">in</span> df21[<span class="string">&#x27;Q3&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">df20_Ea = df20[df20[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df20_Wo = df20[~df20[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df20[<span class="string">&#x27;region&#x27;</span>]=[<span class="string">&quot;EastAsia&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> EastAsia <span class="keyword">else</span> <span class="string">&quot;World&quot;</span> <span class="keyword">for</span> x <span class="keyword">in</span> df20[<span class="string">&#x27;Q3&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">df19_Ea = df19[df19[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df19_Wo = df19[~df19[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df19[<span class="string">&#x27;region&#x27;</span>]=[<span class="string">&quot;EastAsia&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> EastAsia <span class="keyword">else</span> <span class="string">&quot;World&quot;</span> <span class="keyword">for</span> x <span class="keyword">in</span> df19[<span class="string">&#x27;Q3&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">df18_Ea = df18[df18[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df18_Wo = df18[~df18[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df18[<span class="string">&#x27;region&#x27;</span>]=[<span class="string">&quot;EastAsia&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> EastAsia <span class="keyword">else</span> <span class="string">&quot;World&quot;</span> <span class="keyword">for</span> x <span class="keyword">in</span> df18[<span class="string">&#x27;Q3&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">df17_Ea = df17[df17[<span class="string">&#x27;Country&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df17_Wo = df17[~df17[<span class="string">&#x27;Country&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df17[<span class="string">&#x27;region&#x27;</span>]=[<span class="string">&quot;EastAsia&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> EastAsia <span class="keyword">else</span> <span class="string">&quot;World&quot;</span> <span class="keyword">for</span> x <span class="keyword">in</span> df17[<span class="string">&#x27;Country&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">df21[<span class="string">&#x27;year&#x27;</span>] = <span class="string">&#x27;2021&#x27;</span></span><br><span class="line">df20[<span class="string">&#x27;year&#x27;</span>] = <span class="string">&#x27;2020&#x27;</span></span><br><span class="line">df19[<span class="string">&#x27;year&#x27;</span>] = <span class="string">&#x27;2019&#x27;</span></span><br><span class="line">df18[<span class="string">&#x27;year&#x27;</span>] = <span class="string">&#x27;2018&#x27;</span></span><br><span class="line">df17[<span class="string">&#x27;year&#x27;</span>] = <span class="string">&#x27;2017&#x27;</span></span><br><span class="line"></span><br><span class="line">years = [<span class="string">&#x27;2017&#x27;</span>, <span class="string">&#x27;2018&#x27;</span>, <span class="string">&#x27;2019&#x27;</span>, <span class="string">&#x27;2020&#x27;</span>, <span class="string">&#x27;2021&#x27;</span>]</span><br><span class="line"></span><br><span class="line">df21_Ea = df21[df21[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia21)]</span><br><span class="line">Ea21= (</span><br><span class="line">    df21_Ea[<span class="string">&#x27;Q3&#x27;</span>].value_counts().to_frame()</span><br><span class="line">    .reset_index().rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;21&#x27;</span>&#125;))</span><br><span class="line"></span><br><span class="line">df20_Ea=df20[df20[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">Ea20= (</span><br><span class="line">    df20_Ea[<span class="string">&#x27;Q3&#x27;</span>].replace(<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;South Korea&#x27;</span>)</span><br><span class="line">    .value_counts().to_frame().reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;20&#x27;</span>&#125;))</span><br><span class="line"></span><br><span class="line">df19_Ea=df19[df19[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">Ea19= (df19_Ea[<span class="string">&#x27;Q3&#x27;</span>].replace(<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;South Korea&#x27;</span>)</span><br><span class="line">       .value_counts().to_frame().reset_index()</span><br><span class="line">       .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;19&#x27;</span>&#125;))</span><br><span class="line"></span><br><span class="line">df18_Ea=df18[df18[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">Ea18= (df18_Ea[<span class="string">&#x27;Q3&#x27;</span>].replace(<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;South Korea&#x27;</span>)</span><br><span class="line">       .value_counts().to_frame().reset_index()</span><br><span class="line">       .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;18&#x27;</span>&#125;))</span><br><span class="line">Ea18.value_counts()</span><br><span class="line"><span class="comment">#df18 열에 taiwan = 0을 추가 해야 합니다. </span></span><br><span class="line"></span><br><span class="line">df17_Ea = df17[df17[<span class="string">&#x27;Country&#x27;</span>].isin(EastAsia)]</span><br><span class="line">Ea17= (df17_Ea[<span class="string">&#x27;Country&#x27;</span>].replace(<span class="string">&quot;People &#x27;s Republic of China&quot;</span>,<span class="string">&#x27;China&#x27;</span>)</span><br><span class="line">       .value_counts().to_frame().reset_index()</span><br><span class="line">       .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Country&#x27;</span>:<span class="string">&#x27;17&#x27;</span>&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">#data를 합쳐서 하나의 dataframe으로 만들어 줌.</span></span><br><span class="line">df5years = pd.merge(Ea17, Ea18, on=<span class="string">&#x27;Country&#x27;</span>, how=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line">df5year =pd.merge(Ea19,Ea20, on=<span class="string">&#x27;Country&#x27;</span>, how=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line">df5year=pd.merge(df5year, Ea21, on=<span class="string">&#x27;Country&#x27;</span>, how=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line"></span><br><span class="line">df5years = pd.merge(df5years, df5year, on=<span class="string">&#x27;Country&#x27;</span>, how=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Ea21 = <span class="built_in">len</span>(df21_Ea)</span><br><span class="line">Wo21 = <span class="built_in">len</span>(df21) - <span class="built_in">len</span>(df21_Ea)</span><br><span class="line"></span><br><span class="line">Ea20 = <span class="built_in">len</span>(df20_Ea)</span><br><span class="line">Wo20 = <span class="built_in">len</span>(df20) - <span class="built_in">len</span>(df20_Ea)</span><br><span class="line"></span><br><span class="line">Ea19 = <span class="built_in">len</span>(df19_Ea)</span><br><span class="line">Wo19 = <span class="built_in">len</span>(df19) - <span class="built_in">len</span>(df19_Ea)</span><br><span class="line"></span><br><span class="line">Ea18 = <span class="built_in">len</span>(df18_Ea)</span><br><span class="line">Wo18 = <span class="built_in">len</span>(df18) -  <span class="built_in">len</span>(df18_Ea)</span><br><span class="line"></span><br><span class="line">Ea17 = <span class="built_in">len</span>(df17_Ea)</span><br><span class="line">Wo17 = <span class="built_in">len</span>(df17) - <span class="built_in">len</span>(df17_Ea)</span><br><span class="line"></span><br><span class="line">years = [<span class="string">&#x27;2017&#x27;</span>,<span class="string">&#x27;2018&#x27;</span>,<span class="string">&#x27;2019&#x27;</span>,<span class="string">&#x27;2020&#x27;</span>, <span class="string">&#x27;2021&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">percent</span> (<span class="params">a, b</span>):</span></span><br><span class="line">    result =a/(a+b)*<span class="number">100</span></span><br><span class="line">    result = np.<span class="built_in">round</span>(result, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">percentR</span> (<span class="params">b, a</span>):</span></span><br><span class="line">    result =a/(a+b)*<span class="number">100</span></span><br><span class="line">    result = np.<span class="built_in">round</span>(result, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">percent = [percent(Ea17, Wo17), percent(Ea18, Wo18), percent(Ea19, Wo19), </span><br><span class="line">                                                 percent(Ea20, Wo20), percent(Ea21, Wo21)]</span><br></pre></td></tr></table></figure>

<h1 id="3-1-Kaggle’s-transformation-World-East-Asia"><a href="#3-1-Kaggle’s-transformation-World-East-Asia" class="headerlink" title="3.1 Kaggle’s transformation (World/East Asia)"></a>3.1 Kaggle’s transformation (World/East Asia)</h1><hr>
<h1 id="3-1-1-user-transformation"><a href="#3-1-1-user-transformation" class="headerlink" title="3.1.1 user transformation"></a>3.1.1 user transformation</h1><h2> Number of respondents </h2>
    
<p>(bar, scatter plot : number of respondents to World and East Asia,<br>Map plot : number of respondents to East Asia)</p>
<p><strong>World and East Asia: The same trend.</strong></p>
<p>East Asia: 15% of the total continent and 20.3% of the population (16/78.7: Ea/Wo)</p>
<p>2018 Issue: Significant increase in respondents-&gt;Hypothesis: Due to the rapid increase in China.</p>
<p>2018 Outliers Considering: 2022 Kaggle survey Respondents: Increased in both World and East Asia</p>
<p>I wish our team the honor of becoming a respondent to the Kaggle survey in 2022….</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">fig = go.Figure()</span><br><span class="line">y=[<span class="built_in">len</span>(df17_Ea),<span class="built_in">len</span>(df18_Ea), <span class="built_in">len</span>(df19_Ea),<span class="built_in">len</span>(df20_Ea),<span class="built_in">len</span>(df21_Ea)]</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x=years, y=y,</span><br><span class="line">                base=<span class="number">0</span>,</span><br><span class="line">                marker_color=<span class="string">&#x27;#F2D64B&#x27;</span>,</span><br><span class="line">                yaxis = <span class="string">&quot;y1&quot;</span>,</span><br><span class="line">                name=<span class="string">&#x27;East Asia&#x27;</span>,</span><br><span class="line">                text= percent,</span><br><span class="line">                texttemplate=<span class="string">&#x27;%&#123;text&#125;  %&#x27;</span>, </span><br><span class="line">                textposition=<span class="string">&#x27;outside&#x27;</span>,</span><br><span class="line">                hovertemplate=<span class="string">&#x27;&lt;b&gt;KaggleUser&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>+ <span class="string">&#x27;&lt;b&gt;Count&lt;/b&gt;: %&#123;y&#125;&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(name = <span class="string">&quot;World&quot;</span>,</span><br><span class="line">           x=years, </span><br><span class="line">           y=[<span class="built_in">len</span>(df17), <span class="built_in">len</span>(df18), <span class="built_in">len</span>(df19), <span class="built_in">len</span>(df20), <span class="built_in">len</span>(df21)],</span><br><span class="line">           marker_color=<span class="string">&#x27;#979DA6&#x27;</span>,</span><br><span class="line">           mode = <span class="string">&#x27;lines+markers&#x27;</span>, <span class="comment"># please check option here</span></span><br><span class="line">           yaxis = <span class="string">&quot;y2&quot;</span>))</span><br><span class="line"></span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Count&lt;/b&gt;: %&#123;y&#125;&lt;br&gt;&lt;extra&gt;&lt;/extra&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Year&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig.update_layout(yaxis  = <span class="built_in">dict</span>(title = <span class="string">&quot;Kaggle User in East Asia&quot;</span>,showgrid = <span class="literal">False</span>, <span class="built_in">range</span>=[<span class="number">0</span>, <span class="built_in">len</span>(df21_Ea)*<span class="number">1.2</span>]),</span><br><span class="line">                  yaxis2 = <span class="built_in">dict</span>(title = <span class="string">&quot;Kaggle User in World&quot;</span>, overlaying = <span class="string">&quot;y1&quot;</span>, side = <span class="string">&quot;right&quot;</span>, </span><br><span class="line">                  showgrid = <span class="literal">False</span>, </span><br><span class="line">                  zeroline = <span class="literal">False</span>, <span class="built_in">range</span>=[<span class="number">0</span>, <span class="built_in">len</span>(df21)*<span class="number">1.2</span>]))</span><br><span class="line"></span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;&lt;b&gt;Kaggle Users&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">20</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">200</span>, l=<span class="number">100</span>, r=<span class="number">50</span>, b=<span class="number">200</span>),</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">700</span>)</span><br><span class="line"></span><br><span class="line">fig.update_layout(legend=<span class="built_in">dict</span>(</span><br><span class="line">    orientation=<span class="string">&quot;h&quot;</span>,</span><br><span class="line">    yanchor=<span class="string">&quot;bottom&quot;</span>,</span><br><span class="line">    y=<span class="number">1.1</span>,</span><br><span class="line">    xanchor=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    x=<span class="number">1</span>))</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.9</span>,</span><br><span class="line">                                    y=-<span class="number">0.25</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">world_map</span>(<span class="params">locations,counts,title</span>):</span></span><br><span class="line">    data = [ <span class="built_in">dict</span>(</span><br><span class="line">            <span class="built_in">type</span> = <span class="string">&#x27;choropleth&#x27;</span>,</span><br><span class="line">            locations = locations,</span><br><span class="line">            z = counts,</span><br><span class="line">            colorscale = <span class="string">&#x27;Reds&#x27;</span>,</span><br><span class="line">            locationmode = <span class="string">&#x27;country names&#x27;</span>,</span><br><span class="line">            autocolorscale = <span class="literal">False</span>,</span><br><span class="line">            reversescale = <span class="literal">False</span>,</span><br><span class="line">            marker = <span class="built_in">dict</span>(</span><br><span class="line">                line = <span class="built_in">dict</span>(color = <span class="string">&#x27;#F7F7F7&#x27;</span>, width = <span class="number">1.5</span>)),</span><br><span class="line">                colorbar = <span class="built_in">dict</span>(autotick = <span class="literal">True</span>, legth = <span class="number">3</span>, <span class="built_in">len</span>=<span class="number">0.75</span>, title = <span class="string">&#x27;respodents&#x27;</span>,</span><br><span class="line">                               <span class="built_in">max</span> = <span class="number">1000</span>, <span class="built_in">min</span> = <span class="number">0</span>))]</span><br><span class="line">    layout = <span class="built_in">dict</span>(</span><br><span class="line">        title=title,</span><br><span class="line">        titlefont=&#123;<span class="string">&#x27;size&#x27;</span>: <span class="number">28</span>&#125;,</span><br><span class="line">        width=<span class="number">700</span>, </span><br><span class="line">        height=<span class="number">600</span>,</span><br><span class="line">        paper_bgcolor=<span class="string">&#x27;#FFFFFF&#x27;</span>, </span><br><span class="line">        margin=<span class="built_in">dict</span>(l=<span class="number">50</span>, r=<span class="number">50</span>, t=<span class="number">100</span>, b=<span class="number">100</span>),</span><br><span class="line">        geo = <span class="built_in">dict</span>(</span><br><span class="line">            showframe = <span class="literal">True</span>,</span><br><span class="line">            showcoastlines = <span class="literal">True</span>,</span><br><span class="line">            fitbounds=<span class="string">&quot;locations&quot;</span>))</span><br><span class="line">   </span><br><span class="line">    fig = <span class="built_in">dict</span>(data=data, layout=layout)</span><br><span class="line">    iplot(fig, validate=<span class="literal">False</span>, filename=<span class="string">&#x27;world-map&#x27;</span>)</span><br><span class="line"></span><br><span class="line">z = df21_Ea[<span class="string">&#x27;Q3&#x27;</span>].value_counts()</span><br><span class="line"> </span><br><span class="line">world_map(locations=z.index, counts=z.values, title= <span class="string">&#x27;&lt;b&gt;EastAsia Countries&lt;b&gt;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2>18’ : </h2>

<p>User change between United States and India.</p>
<p>China’s markedly increase in 2018</p>
<ul>
<li>There is no Taiwan, but only China has increased. : East Asian political situation Issue can be suspected.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">A18 = (</span><br><span class="line">    df18[<span class="string">&#x27;Q3&#x27;</span>]</span><br><span class="line">    .replace(&#123;<span class="string">&#x27;Republic of Korea&#x27;</span>:<span class="string">&#x27;South Korea&#x27;</span>,</span><br><span class="line">             <span class="string">&#x27;I do not wish to disclose my location&#x27;</span> : <span class="string">&#x27;Other&#x27;</span>&#125;)</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;2018&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index()</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">A19 = (</span><br><span class="line">    df19[<span class="string">&#x27;Q3&#x27;</span>]</span><br><span class="line">    .replace(<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;South Korea&#x27;</span>)</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;2019&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index()</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">A17 = (</span><br><span class="line">    df17[<span class="string">&#x27;Country&#x27;</span>]</span><br><span class="line">    .replace(&#123;<span class="string">&#x27;United States&#x27;</span>: <span class="string">&#x27;United States of America&#x27;</span>,</span><br><span class="line">              <span class="string">&#x27;Hong Kong&#x27;</span>: <span class="string">&#x27;Hong Kong (S.A.R.)&#x27;</span>, </span><br><span class="line">              <span class="string">&#x27;United Kingdom&#x27;</span>:<span class="string">&#x27;United Kingdom of Great Britain and Northern Ireland&#x27;</span>,</span><br><span class="line">             &#125;)</span><br><span class="line">    .replace(<span class="string">&quot;People &#x27;s Republic of China&quot;</span>,<span class="string">&#x27;China&#x27;</span>)</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;Country&#x27;</span>:<span class="string">&#x27;2017&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index()</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">A18A19=pd.merge(A18,A19, how=<span class="string">&#x27;outer&#x27;</span>,on=<span class="string">&#x27;type&#x27;</span>).fillna(<span class="number">0</span>)</span><br><span class="line">A18A17=pd.merge(A18,A17, how=<span class="string">&#x27;outer&#x27;</span>,on=<span class="string">&#x27;type&#x27;</span>).fillna(<span class="number">0</span>)</span><br><span class="line">A18A19[<span class="string">&#x27;minus&#x27;</span>]= A18A19[<span class="string">&#x27;2018&#x27;</span>]-A18A19[<span class="string">&#x27;2019&#x27;</span>]</span><br><span class="line">A18A17[<span class="string">&#x27;minus&#x27;</span>]= A18A17[<span class="string">&#x27;2018&#x27;</span>]-A18A17[<span class="string">&#x27;2017&#x27;</span>]</span><br><span class="line"></span><br><span class="line">A18A17=A18A17.sort_values(by=<span class="string">&quot;minus&quot;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">A18A19=A18A19.sort_values(by=<span class="string">&quot;minus&quot;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[  </span><br><span class="line">        go.Bar(x =A18A19[<span class="string">&#x27;type&#x27;</span>],</span><br><span class="line">        y = A18A19[<span class="string">&#x27;minus&#x27;</span>],</span><br><span class="line">        marker_color=<span class="string">&#x27;#979DA6&#x27;</span>,</span><br><span class="line">        name = <span class="string">&#x27;2018-2019&#x27;</span>, base=<span class="number">0</span>),</span><br><span class="line">        go.Bar(x =A18A17[<span class="string">&#x27;type&#x27;</span>],</span><br><span class="line">        y = A18A17[<span class="string">&#x27;minus&#x27;</span>],</span><br><span class="line">               marker_color=<span class="string">&#x27;#F2D64B&#x27;</span>,</span><br><span class="line">        name = <span class="string">&#x27;2018-2017&#x27;</span>, base=<span class="number">0</span>)</span><br><span class="line">        ])</span><br><span class="line"></span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;&lt;b&gt;        Predicting outliers (2018)&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">20</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">200</span>, l=<span class="number">100</span>, r=<span class="number">10</span>, b=<span class="number">200</span>),</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">700</span>,</span><br><span class="line">                  xaxis_title=<span class="literal">None</span>,</span><br><span class="line">                  yaxis_title=<span class="literal">None</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">fig.update_layout(legend=<span class="built_in">dict</span>(</span><br><span class="line">    orientation=<span class="string">&quot;h&quot;</span>,</span><br><span class="line">    yanchor=<span class="string">&quot;bottom&quot;</span>,</span><br><span class="line">    y=<span class="number">1.1</span>,</span><br><span class="line">    xanchor=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    x=<span class="number">1</span>))</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.5</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h2>Total population: </h2>

<p>1.4 billion (85%) in China, 130 million in Japan, 0.5 billion in Korea, and 0.2 billion in Taiwan.</p>
<ul>
<li>China: The number of respondents is smaller than the population.</li>
<li>Japan: Starting in 2019, overtaking China</li>
<li>Taiwan : 2018 data 0 =? Diplomatic issues? The growth trend is weak.</li>
<li>Korea : Respondents at a similar level to Japan’s population.</li>
<li>East Asia: The number of respondents will increase further.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line">total17 = ( </span><br><span class="line">    df17[<span class="string">&#x27;region&#x27;</span>]</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;respodents&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index()</span><br><span class="line">)</span><br><span class="line">total18 = (</span><br><span class="line">    df18[<span class="string">&#x27;region&#x27;</span>]</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;respodents&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index()</span><br><span class="line">)</span><br><span class="line">total19 = (</span><br><span class="line">    df19[<span class="string">&#x27;region&#x27;</span>]</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;respodents&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index()</span><br><span class="line">)</span><br><span class="line">total20 = (</span><br><span class="line">    df20[<span class="string">&#x27;region&#x27;</span>]</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;respodents&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index()</span><br><span class="line">)</span><br><span class="line">total21 = (</span><br><span class="line">    df21[<span class="string">&#x27;region&#x27;</span>]</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;respodents&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index()</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line">colors = [<span class="string">&#x27;#F2D64B&#x27;</span>,<span class="string">&#x27;#979DA6&#x27;</span>]</span><br><span class="line"></span><br><span class="line">fig = make_subplots(rows=<span class="number">1</span>, cols=<span class="number">5</span>, specs=[[&#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;]],</span><br><span class="line">                   subplot_titles=(<span class="string">&quot;2017&quot;</span>, <span class="string">&quot;2018&quot;</span>, <span class="string">&quot;2019&quot;</span>, <span class="string">&quot;2020&quot;</span>, <span class="string">&quot;2021&quot;</span>))</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors),labels=total21[<span class="string">&#x27;type&#x27;</span>], values=total21[<span class="string">&#x27;respodents&#x27;</span>], name=<span class="string">&quot;2021&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>), <span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors),labels=total20[<span class="string">&#x27;type&#x27;</span>], values=total20[<span class="string">&#x27;respodents&#x27;</span>], name=<span class="string">&quot;2020&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>), <span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors),labels=total19[<span class="string">&#x27;type&#x27;</span>], values=total19[<span class="string">&#x27;respodents&#x27;</span>], name=<span class="string">&quot;2019&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>), <span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors),labels=total18[<span class="string">&#x27;type&#x27;</span>], values=total18[<span class="string">&#x27;respodents&#x27;</span>], name=<span class="string">&quot;2018&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>), <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors),labels=total17[<span class="string">&#x27;type&#x27;</span>], values=total17[<span class="string">&#x27;respodents&#x27;</span>], name=<span class="string">&quot;2017&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>), <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">fig.update_traces(hole=<span class="number">.0</span>, hoverinfo=<span class="string">&quot;label+percent+name&quot;</span>, textposition=<span class="string">&#x27;inside&#x27;</span>, textinfo=<span class="string">&#x27;percent+label&#x27;</span>,</span><br><span class="line">                  textfont_size=<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;&lt;b&gt;World vs EastAsia&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">23</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">300</span>, l=<span class="number">0</span>, r=<span class="number">0</span>, b=<span class="number">200</span>),</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">700</span>)</span><br><span class="line"></span><br><span class="line">fig.update_layout(legend=<span class="built_in">dict</span>(</span><br><span class="line">    orientation=<span class="string">&quot;h&quot;</span>,</span><br><span class="line">    yanchor=<span class="string">&quot;bottom&quot;</span>,</span><br><span class="line">    y=<span class="number">1.3</span>,</span><br><span class="line">    xanchor=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    x=<span class="number">1</span>))</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.25</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">fig = go.Figure(data=[</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;2017&#x27;</span>, x=df5years[<span class="string">&#x27;Country&#x27;</span>], y=df5years[<span class="string">&#x27;17&#x27;</span>], marker_color=<span class="string">&#x27;#F2798F&#x27;</span>,text=df5years[<span class="string">&#x27;17&#x27;</span>].tolist(), textposition=<span class="string">&#x27;outside&#x27;</span>),</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;2018&#x27;</span>, x=df5years[<span class="string">&#x27;Country&#x27;</span>], y=df5years[<span class="string">&#x27;18&#x27;</span>], marker_color=<span class="string">&#x27;#88BFBA&#x27;</span>,text=df5years[<span class="string">&#x27;18&#x27;</span>].fillna(<span class="number">0</span>).astype(<span class="built_in">int</span>).tolist(), textposition=<span class="string">&#x27;outside&#x27;</span>,),</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;2019&#x27;</span>, x=df5years[<span class="string">&#x27;Country&#x27;</span>], y=df5years[<span class="string">&#x27;19&#x27;</span>], marker_color=<span class="string">&#x27;#CDD9A3&#x27;</span>,text=df5years[<span class="string">&#x27;19&#x27;</span>].tolist(), textposition=<span class="string">&#x27;outside&#x27;</span>),</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;2020&#x27;</span>, x=df5years[<span class="string">&#x27;Country&#x27;</span>], y=df5years[<span class="string">&#x27;20&#x27;</span>], marker_color=<span class="string">&#x27;#F28705&#x27;</span>,text=df5years[<span class="string">&#x27;20&#x27;</span>].tolist(), textposition=<span class="string">&#x27;outside&#x27;</span>,),</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;2021&#x27;</span>, x=df5years[<span class="string">&#x27;Country&#x27;</span>], y=df5years[<span class="string">&#x27;21&#x27;</span>], marker_color=<span class="string">&#x27;#D9946C&#x27;</span>,text=df5years[<span class="string">&#x27;21&#x27;</span>].tolist(), textposition=<span class="string">&#x27;outside&#x27;</span>)])</span><br><span class="line"></span><br><span class="line">fig.update_layout(barmode=<span class="string">&#x27;group&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;&lt;b&gt;Kaggle User in East Asia&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">23</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">200</span>, l=<span class="number">100</span>, r=<span class="number">10</span>, b=<span class="number">200</span>),</span><br><span class="line">                  height=<span class="number">600</span>, width=<span class="number">700</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Count&lt;/b&gt;: %&#123;y&#125;&#x27;</span>)</span><br><span class="line">fig.update_layout(legend=<span class="built_in">dict</span>(</span><br><span class="line">    orientation=<span class="string">&quot;v&quot;</span>,</span><br><span class="line">    yanchor=<span class="string">&quot;bottom&quot;</span>,</span><br><span class="line">    y=<span class="number">1.15</span>,</span><br><span class="line">    xanchor=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    x=<span class="number">1</span>))</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.5</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h1 id="3-1-2-Gender-transformation"><a href="#3-1-2-Gender-transformation" class="headerlink" title="3.1.2 Gender transformation"></a>3.1.2 Gender transformation</h1><hr>
<h2>World: The proportion of female respondents increases (still below 20%) </h2>

<p>The number of respondents is increasing in all genders.</p>
<p>Our team is also a team with high female members and wants to contribute as a respondent in 2022.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line">Gender_17 = (</span><br><span class="line">    df17[<span class="string">&#x27;GenderSelect&#x27;</span>]</span><br><span class="line">    .replace([<span class="string">&#x27;A different identity&#x27;</span>, <span class="string">&#x27;Prefer to self-describe&#x27;</span>, <span class="string">&#x27;Non-binary, genderqueer, or gender non-conforming&#x27;</span>], <span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">    .fillna(<span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;GenderSelect&#x27;</span>:<span class="string">&#x27;Gender&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index())</span><br><span class="line">Gender_18 = (</span><br><span class="line">    df18[<span class="string">&#x27;Q1&#x27;</span>]</span><br><span class="line">    .replace([<span class="string">&#x27;Prefer not to say&#x27;</span>, <span class="string">&#x27;Prefer to self-describe&#x27;</span>], <span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">    .fillna(<span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;Gender&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index())</span><br><span class="line">Gender_19 = (</span><br><span class="line">    df19[<span class="string">&#x27;Q2&#x27;</span>]</span><br><span class="line">    .replace([<span class="string">&#x27;Prefer not to say&#x27;</span>,<span class="string">&#x27;Prefer to self-describe&#x27;</span>],<span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">    .fillna(<span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;Q2&#x27;</span>:<span class="string">&#x27;Gender&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index())</span><br><span class="line">Gender_20 = (</span><br><span class="line">    df20[<span class="string">&#x27;Q2&#x27;</span>]</span><br><span class="line">    .replace([<span class="string">&#x27;Prefer not to say&#x27;</span>, <span class="string">&#x27;Prefer to self-describe&#x27;</span>, <span class="string">&#x27;Nonbinary&#x27;</span>], <span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">    .replace([<span class="string">&#x27;Man&#x27;</span>, <span class="string">&#x27;Woman&#x27;</span>], [<span class="string">&#x27;Male&#x27;</span>, <span class="string">&#x27;Female&#x27;</span>])</span><br><span class="line">    .fillna(<span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;Q2&#x27;</span>:<span class="string">&#x27;Gender&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index())</span><br><span class="line">Gender_21 = (</span><br><span class="line">    df21[<span class="string">&#x27;Q2&#x27;</span>]</span><br><span class="line">    .replace([<span class="string">&#x27;Prefer not to say&#x27;</span>, <span class="string">&#x27;Prefer to self-describe&#x27;</span>, <span class="string">&#x27;Nonbinary&#x27;</span>], <span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">    .replace([<span class="string">&#x27;Man&#x27;</span>, <span class="string">&#x27;Woman&#x27;</span>], [<span class="string">&#x27;Male&#x27;</span>, <span class="string">&#x27;Female&#x27;</span>])</span><br><span class="line">    .fillna(<span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;Q2&#x27;</span>:<span class="string">&#x27;Gender&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index())</span><br><span class="line"></span><br><span class="line">colors = [<span class="string">&#x27;#D9946C&#x27;</span>,<span class="string">&#x27;#88BFBA&#x27;</span>, <span class="string">&#x27;#CDD9A3&#x27;</span>]</span><br><span class="line"></span><br><span class="line">fig = make_subplots(rows=<span class="number">1</span>, cols=<span class="number">5</span>, specs=[[&#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;]],)</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors), labels=Gender_21[<span class="string">&#x27;type&#x27;</span>], values=Gender_21[<span class="string">&#x27;Gender&#x27;</span>], name=<span class="string">&quot;2021&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>, text=np.array(Gender_21[<span class="string">&#x27;Gender&#x27;</span>].<span class="built_in">sum</span>()), title=<span class="string">&quot;2021&quot;</span>, titleposition=<span class="string">&#x27;bottom center&#x27;</span>),</span><br><span class="line">              <span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors), labels=Gender_20[<span class="string">&#x27;type&#x27;</span>], values=Gender_20[<span class="string">&#x27;Gender&#x27;</span>], name=<span class="string">&quot;2020&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>, text=np.array(Gender_20[<span class="string">&#x27;Gender&#x27;</span>].<span class="built_in">sum</span>()), title=<span class="string">&quot;2020&quot;</span>, titleposition=<span class="string">&#x27;bottom center&#x27;</span>),</span><br><span class="line">              <span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors), labels=Gender_19[<span class="string">&#x27;type&#x27;</span>], values=Gender_19[<span class="string">&#x27;Gender&#x27;</span>], name=<span class="string">&quot;2019&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>, text=np.array(Gender_19[<span class="string">&#x27;Gender&#x27;</span>].<span class="built_in">sum</span>()), title=<span class="string">&quot;2019&quot;</span>, titleposition=<span class="string">&#x27;bottom center&#x27;</span>),</span><br><span class="line">              <span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors), labels=Gender_18[<span class="string">&#x27;type&#x27;</span>], values=Gender_18[<span class="string">&#x27;Gender&#x27;</span>], name=<span class="string">&quot;2018&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>, text=np.array(Gender_18[<span class="string">&#x27;Gender&#x27;</span>].<span class="built_in">sum</span>()), title=<span class="string">&quot;2018&quot;</span>, titleposition=<span class="string">&#x27;bottom center&#x27;</span>),</span><br><span class="line">              <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors), labels=Gender_17[<span class="string">&#x27;type&#x27;</span>], values=Gender_17[<span class="string">&#x27;Gender&#x27;</span>], name=<span class="string">&quot;2017&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>, text=np.array(Gender_17[<span class="string">&#x27;Gender&#x27;</span>].<span class="built_in">sum</span>()), title=<span class="string">&quot;2017&quot;</span>, titleposition=<span class="string">&#x27;bottom center&#x27;</span>),</span><br><span class="line">              <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">fig.update_traces(hole=<span class="number">.0</span>, hoverinfo=<span class="string">&quot;label+percent+name&quot;</span>, </span><br><span class="line">                  textinfo=<span class="string">&#x27;label+percent+value&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;&lt;b&gt;World Gender&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">23</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">300</span>, l=<span class="number">100</span>, r=<span class="number">0</span>, b=<span class="number">200</span>),</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">fig.update_layout(legend=<span class="built_in">dict</span>(</span><br><span class="line">    orientation=<span class="string">&quot;v&quot;</span>,</span><br><span class="line">    yanchor=<span class="string">&quot;bottom&quot;</span>,</span><br><span class="line">    y=<span class="number">1.3</span>,</span><br><span class="line">    xanchor=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    x=<span class="number">1</span>))</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.85</span>,</span><br><span class="line">                                    y=-<span class="number">0.5</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h3>
    
<pre><code>- Male (1004-&gt;2037 : 2017-&gt;2021) double increase

- Female 183-&gt;327 : 2017-&gt;2021 increased 1.8 times

- Others (8-&gt;64 : 2017-&gt;2021) 8x increase
</code></pre>
</h3>
[Compare the high and low points]

<ul>
<li><p>It can be seen that the number of female respondents and the ratio of male respondents hardly change, which is a difference compared to World data.</p>
</li>
<li><p>It can be seen that the degree of gender freedom in East Asia has increased relatively.</p>
</li>
<li><p>Compared to World data, it can be seen that in 2021 (1.87: 2.6= Wo: Ea), compared to 2017 (1.96: 0.7 = Ea), which was relatively conservative.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line">gender21= df21_Ea.loc[:, [<span class="string">&#x27;Q3&#x27;</span>, <span class="string">&#x27;Q2&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q2&#x27;</span>:<span class="string">&#x27;Gender&#x27;</span>&#125;)</span><br><span class="line">gender20= df20_Ea.loc[:, [<span class="string">&#x27;Q3&#x27;</span>, <span class="string">&#x27;Q2&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q2&#x27;</span>:<span class="string">&#x27;Gender&#x27;</span>&#125;)</span><br><span class="line">gender19= df19_Ea.loc[:, [<span class="string">&#x27;Q3&#x27;</span>, <span class="string">&#x27;Q2&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q2&#x27;</span>:<span class="string">&#x27;Gender&#x27;</span>&#125;)</span><br><span class="line">gender18= df18_Ea.loc[:, [<span class="string">&#x27;Q3&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;Gender&#x27;</span>&#125;)</span><br><span class="line">gender17= df17_Ea.loc[:, [<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;GenderSelect&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;GenderSelect&#x27;</span>:<span class="string">&#x27;Gender&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">Gender5y= pd.concat([gender17, gender18, gender19, gender20, gender21])</span><br><span class="line">Gender5y= (Gender5y.replace([<span class="string">&#x27;Prefer not to say&#x27;</span>, <span class="string">&#x27;Prefer to self-describe&#x27;</span>, <span class="string">&#x27;Nonbinary&#x27;</span>, <span class="string">&#x27;A different identity&#x27;</span>], <span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">           .replace([<span class="string">&#x27;Man&#x27;</span>, <span class="string">&#x27;Woman&#x27;</span>], [<span class="string">&#x27;Male&#x27;</span>, <span class="string">&#x27;Female&#x27;</span>])</span><br><span class="line">           .groupby([<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;Gender&#x27;</span>])</span><br><span class="line">           .size()</span><br><span class="line">           .reset_index()</span><br><span class="line">           .rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;))</span><br><span class="line"></span><br><span class="line">gen17_5y = Gender5y[Gender5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2017&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">gen18_5y = Gender5y[Gender5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2018&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">gen19_5y = Gender5y[Gender5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2019&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">gen20_5y = Gender5y[Gender5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2020&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">gen21_5y = Gender5y[Gender5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2021&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">Gen5y_ = pd.concat([gen17_5y, gen18_5y, gen19_5y, gen20_5y, gen21_5y], ignore_index = <span class="literal">True</span>)</span><br><span class="line">Gen5y_= pd.pivot(Gen5y_, index = <span class="string">&quot;year&quot;</span>, columns = <span class="string">&quot;Gender&quot;</span>, values = <span class="string">&quot;Count&quot;</span>).reset_index()</span><br><span class="line">Gen5y_</span><br><span class="line"></span><br><span class="line">Gen5y_[<span class="string">&#x27;year&#x27;</span>].unique()</span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(</span><br><span class="line">    x = Gen5y_[<span class="string">&#x27;year&#x27;</span>],</span><br><span class="line">    y = Gen5y_[<span class="string">&#x27;Male&#x27;</span>].tolist(),</span><br><span class="line">    name = <span class="string">&#x27;Male&#x27;</span>,</span><br><span class="line">marker_color=<span class="string">&#x27;#88BFBA&#x27;</span>, text=Gen5y_[<span class="string">&#x27;Male&#x27;</span>].tolist(), textposition=<span class="string">&#x27;outside&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(</span><br><span class="line">    x = Gen5y_[<span class="string">&#x27;year&#x27;</span>],</span><br><span class="line">    y = Gen5y_[<span class="string">&#x27;Female&#x27;</span>].tolist(),</span><br><span class="line">    name = <span class="string">&#x27;Female&#x27;</span>,</span><br><span class="line">marker_color=<span class="string">&#x27;#D9946C&#x27;</span>, text=Gen5y_[<span class="string">&#x27;Female&#x27;</span>].tolist(), textposition=<span class="string">&#x27;outside&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(</span><br><span class="line">    x = Gen5y_[<span class="string">&#x27;year&#x27;</span>],</span><br><span class="line">    y = Gen5y_[<span class="string">&#x27;Others&#x27;</span>].tolist(),</span><br><span class="line">    name = <span class="string">&#x27;Others&#x27;</span>,</span><br><span class="line">marker_color=<span class="string">&#x27;#CDD9A3&#x27;</span>, text=Gen5y_[<span class="string">&#x27;Others&#x27;</span>].tolist(), textposition=<span class="string">&#x27;outside&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.update_layout(barmode=<span class="string">&quot;group&quot;</span>) </span><br><span class="line"></span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;&lt;b&gt;Gender by year&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">22</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">200</span>, l=<span class="number">100</span>, r=<span class="number">10</span>, b=<span class="number">200</span>),</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">700</span>,</span><br><span class="line">                  xaxis_title=<span class="literal">None</span>,</span><br><span class="line">                  yaxis_title=<span class="literal">None</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.5</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h1 id="3-1-3-Job-transformation"><a href="#3-1-3-Job-transformation" class="headerlink" title="3.1.3 Job transformation"></a>3.1.3 Job transformation</h1><hr>
<h2> 21' World Vs East Asia Age Ratio: Bar plot </h2>

<ul>
<li><p>Not Employed : More than 30% in both East Asia and the world, the highest.</p>
<p>  <em>Because “Students” is included.</em></p>
</li>
<li><p>Data Scientist : High percentage in the world and East Asia.</p>
</li>
<li><p>Relatively low proportion in East Asia.<br>  <strong><strong>= Absolute lack of numbers</strong></strong></p>
</li>
</ul>
<p style="color:#FF0000";>
We would like to move forward by selecting a **data scientist** with insufficient numbers in East Asia.
</p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line">Data_Analyst =[<span class="string">&#x27;Data Analyst&#x27;</span>,<span class="string">&#x27;Data Miner,Information technology&#x27;</span>,<span class="string">&#x27;Data Miner&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Predictive Modeler&#x27;</span>,<span class="string">&#x27;Information technology, networking, or system administration&#x27;</span>, </span><br><span class="line">                <span class="string">&#x27;A business discipline (accounting, economics, finance, etc.)&#x27;</span>, <span class="string">&#x27;Business Analyst&#x27;</span>, <span class="string">&#x27;Humanities&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Statistician&#x27;</span>, <span class="string">&#x27;Mathematics or statistics&#x27;</span>, <span class="string">&#x27;Medical or life sciences (biology, chemistry, medicine, etc.)&#x27;</span>, </span><br><span class="line">                <span class="string">&#x27;Physics or astronomy&#x27;</span>,  <span class="string">&#x27;Social sciences (anthropology, psychology, sociology, etc.)&#x27;</span>, <span class="string">&#x27;Environmental science or geology&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Humanities (history, literature, philosophy, etc.)&#x27;</span>]</span><br><span class="line">Data_Scientist =[<span class="string">&#x27;Data Scientist&#x27;</span>,  <span class="string">&#x27;Research Scientist&#x27;</span>, <span class="string">&#x27;Researcher&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Machine Learning Engineer&#x27;</span>, <span class="string">&#x27;Scientist/Researcher&#x27;</span>]</span><br><span class="line">Developer=[<span class="string">&#x27;Developer Relations/Advocacy&#x27;</span>,<span class="string">&#x27;Data Engineer&#x27;</span>,<span class="string">&#x27;Engineer&#x27;</span>,<span class="string">&#x27;Engineering (non-computer focused)&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;Programmer&#x27;</span>,<span class="string">&#x27;Software Engineer&#x27;</span>, <span class="string">&#x27;Computer Scientist&#x27;</span>,<span class="string">&#x27;Computer science (software engineering, etc.)&#x27;</span>, </span><br><span class="line">           <span class="string">&#x27;Fine arts or performing arts&#x27;</span>,<span class="string">&#x27;Product Manager&#x27;</span>, <span class="string">&#x27;Software Developer/Software Engineer&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;Product/Project Manager&#x27;</span>,<span class="string">&#x27;Program/Project Manager&#x27;</span>,<span class="string">&#x27;DBA/Database Engineer&#x27;</span>]</span><br><span class="line">Not_Employed =[<span class="string">&#x27;Currently not employed&#x27;</span>, <span class="string">&#x27;Not employed&#x27;</span>, <span class="string">&#x27;Student&#x27;</span>]</span><br><span class="line">Others = [<span class="string">&#x27;I never declared a major&#x27;</span>, <span class="string">&#x27;Other&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df21job_Ea = df21_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q5&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q5&#x27;</span>:<span class="string">&#x27;2021&#x27;</span>&#125;).fillna(<span class="string">&#x27;Other&#x27;</span>)</span><br><span class="line">df20job_Ea = df20_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q5&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q5&#x27;</span>:<span class="string">&#x27;2020&#x27;</span>&#125;).fillna(<span class="string">&#x27;Other&#x27;</span>)</span><br><span class="line">df19job_Ea = df19_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q5&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q5&#x27;</span>:<span class="string">&#x27;2019&#x27;</span>&#125;).fillna(<span class="string">&#x27;Other&#x27;</span>)</span><br><span class="line">df18job_Ea = df18_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q5&#x27;</span>]].rename(columns=&#123; <span class="string">&#x27;Q5&#x27;</span>:<span class="string">&#x27;2018&#x27;</span>&#125;).fillna(<span class="string">&#x27;Other&#x27;</span>)</span><br><span class="line">df17job_Ea = df17_Ea.loc[:,[<span class="string">&#x27;Country&#x27;</span>,<span class="string">&#x27;CurrentJobTitleSelect&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;CurrentJobTitleSelect&#x27;</span>:<span class="string">&#x27;2017&#x27;</span>&#125;).fillna(<span class="string">&#x27;Other&#x27;</span>)</span><br><span class="line"></span><br><span class="line">df21job_Ea.value_counts(<span class="string">&#x27;2021&#x27;</span>)</span><br><span class="line">df21job_Ea[<span class="string">&#x27;JOB&#x27;</span>]=[<span class="string">&quot;Data Analyst&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Analyst</span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Data Scientist&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Scientist <span class="comment"># Data Scientist</span></span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Developer&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Developer</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;NotEmployed&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Not_Employed</span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Others&quot;</span> </span><br><span class="line">                   <span class="keyword">for</span> x <span class="keyword">in</span> df21job_Ea[<span class="string">&#x27;2021&#x27;</span>]]</span><br><span class="line">df21job_Ea.value_counts(<span class="string">&#x27;JOB&#x27;</span>)</span><br><span class="line"></span><br><span class="line">df20job_Ea.value_counts(<span class="string">&#x27;2020&#x27;</span>)</span><br><span class="line">df20job_Ea[<span class="string">&#x27;JOB&#x27;</span>]=[<span class="string">&quot;Data Analyst&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Analyst</span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Data Scientist&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Scientist </span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Developer&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Developer</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;NotEmployed&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Not_Employed</span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Other&quot;</span></span><br><span class="line">                   <span class="keyword">for</span> x <span class="keyword">in</span> df20job_Ea[<span class="string">&#x27;2020&#x27;</span>]]</span><br><span class="line">df20job_Ea[[<span class="string">&#x27;2020&#x27;</span>,<span class="string">&#x27;JOB&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">df19job_Ea.value_counts(<span class="string">&#x27;2019&#x27;</span>)</span><br><span class="line">df19job_Ea[<span class="string">&#x27;JOB&#x27;</span>]=[<span class="string">&quot;Data Analyst&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Analyst</span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Data Scientist&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Scientist </span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Developer&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Developer</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;NotEmployed&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Not_Employed</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;Other&quot;</span></span><br><span class="line">                   <span class="keyword">for</span> x <span class="keyword">in</span> df19job_Ea[<span class="string">&#x27;2019&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">df19jobTest = df19job_Ea.loc[df19job_Ea.JOB == <span class="string">&#x27;Other&#x27;</span>]</span><br><span class="line">df19jobTest[<span class="string">&#x27;2019&#x27;</span>].value_counts()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df18job_Ea.value_counts(<span class="string">&#x27;2018&#x27;</span>)</span><br><span class="line">df18job_Ea[<span class="string">&#x27;JOB&#x27;</span>]=[<span class="string">&quot;Data Analyst&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Analyst</span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Data Scientist&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Scientist </span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Developer&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Developer</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;NotEmployed&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Not_Employed</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;Other&quot;</span></span><br><span class="line">                   <span class="keyword">for</span> x <span class="keyword">in</span> df18job_Ea[<span class="string">&#x27;2018&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">df18jobTest = df18job_Ea.loc[df18job_Ea.JOB == <span class="string">&#x27;Other&#x27;</span>]</span><br><span class="line">df18jobTest[<span class="string">&#x27;2018&#x27;</span>].value_counts()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df17job_Ea.value_counts(<span class="string">&#x27;2017&#x27;</span>)</span><br><span class="line">df17job_Ea[<span class="string">&#x27;JOB&#x27;</span>]=[<span class="string">&quot;Data Analyst&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Analyst</span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Data Scientist&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Scientist </span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Developer&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Developer</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;NotEmployed&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Not_Employed</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;Other&quot;</span></span><br><span class="line">                   <span class="keyword">for</span> x <span class="keyword">in</span> df17job_Ea[<span class="string">&#x27;2017&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">df17jobTest = df17job_Ea.loc[df17job_Ea.JOB == <span class="string">&#x27;Other&#x27;</span>]</span><br><span class="line">df17jobTest[<span class="string">&#x27;2017&#x27;</span>].value_counts()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df21jobTest = df21job_Ea.loc[df21job_Ea.JOB == <span class="string">&#x27;Other&#x27;</span>]</span><br><span class="line">df21jobTest[<span class="string">&#x27;2021&#x27;</span>].head()</span><br><span class="line">df21job_Ea.value_counts(<span class="string">&#x27;JOB&#x27;</span>)</span><br><span class="line"></span><br><span class="line">dfjob21 =df21job_Ea.groupby([<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;).rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;country&#x27;</span>&#125;)</span><br><span class="line">dfjob20 =df20job_Ea.groupby([<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;).rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;country&#x27;</span>&#125;)</span><br><span class="line">dfjob19 =df19job_Ea.groupby([<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;).rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;country&#x27;</span>&#125;)</span><br><span class="line">dfjob18 =df18job_Ea.groupby([<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;).rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;country&#x27;</span>&#125;)</span><br><span class="line">dfjob17 =df17job_Ea.groupby([<span class="string">&#x27;Country&#x27;</span>,<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;).rename(columns=&#123;<span class="string">&#x27;Country&#x27;</span>:<span class="string">&#x27;country&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">df21_Ea_job =df21job_Ea.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df20_Ea_job =df20job_Ea.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df19_Ea_job =df19job_Ea.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df18_Ea_job =df18job_Ea.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df17_Ea_job =df17job_Ea.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line">df21_DA=df21[df21[<span class="string">&#x27;Q5&#x27;</span>].isin(Data_Analyst)]</span><br><span class="line">df21_DS=df21[df21[<span class="string">&#x27;Q5&#x27;</span>].isin(Data_Scientist)]</span><br><span class="line">df21_D=df21[df21[<span class="string">&#x27;Q5&#x27;</span>].isin(Developer)]</span><br><span class="line">df21_N=df21[df21[<span class="string">&#x27;Q5&#x27;</span>].isin(Not_Employed)]</span><br><span class="line">df21_O=df21[df21[<span class="string">&#x27;Q5&#x27;</span>].isin(Others)]</span><br><span class="line"></span><br><span class="line">World_ = np.array([df21_DA[<span class="string">&#x27;Q5&#x27;</span>].count(), df21_DS[<span class="string">&#x27;Q5&#x27;</span>].count(), df21_D[<span class="string">&#x27;Q5&#x27;</span>].count(), df21_N[<span class="string">&#x27;Q5&#x27;</span>].count(), df21_O[<span class="string">&#x27;Q5&#x27;</span>].count()]) </span><br><span class="line">East_Asia_ = df21_Ea_job[<span class="string">&#x27;Count&#x27;</span>].to_numpy()</span><br><span class="line">World =((World_/World_.<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">1</span>)</span><br><span class="line">East_Asia =((East_Asia_/East_Asia_.<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">1</span>)</span><br><span class="line">y = df21_Ea_job.JOB.to_numpy()</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[</span><br><span class="line">    go.Bar(y=y, x=World, orientation=<span class="string">&#x27;h&#x27;</span>, name=<span class="string">&quot;World&quot;</span>, base=<span class="number">0</span>, hovertemplate=<span class="string">&#x27;&lt;b&gt;World&lt;/b&gt;: %&#123;x&#125;%&lt;br&gt;&#x27;</span>, marker_color=<span class="string">&#x27;#979DA6&#x27;</span>, text=World, textposition=<span class="string">&#x27;outside&#x27;</span>),</span><br><span class="line">    go.Bar(y=y, x=-East_Asia, orientation=<span class="string">&#x27;h&#x27;</span>, name=<span class="string">&quot;East Asia&quot;</span>, base=<span class="number">0</span>, hovertemplate=<span class="string">&#x27;&lt;b&gt;East Asia&lt;/b&gt;: %&#123;x&#125;%&lt;br&gt;&#x27;</span>, marker_color=<span class="string">&#x27;#F2D64B&#x27;</span>, text=East_Asia, textposition=<span class="string">&#x27;outside&#x27;</span>)])</span><br><span class="line"></span><br><span class="line">fig.update_layout(barmode=<span class="string">&#x27;stack&#x27;</span>)</span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;&lt;b&gt;World vs EastAsia&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">22</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">200</span>, l=<span class="number">100</span>, r=<span class="number">50</span>, b=<span class="number">200</span>),</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">750</span>,</span><br><span class="line">                  xaxis_title=<span class="literal">None</span>,</span><br><span class="line">                  yaxis_title=<span class="literal">None</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_layout(legend=<span class="built_in">dict</span>(</span><br><span class="line">    orientation=<span class="string">&quot;h&quot;</span>,</span><br><span class="line">    yanchor=<span class="string">&quot;bottom&quot;</span>,</span><br><span class="line">    y=<span class="number">1.1</span>,</span><br><span class="line">    xanchor=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    x=<span class="number">1</span>))</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.5</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h2> World Job Ratio: Heat Map </h2> 

<p>The trend of increasing each job except Others. <br><br>Data Scientist has a high proportion, and the trend is to increase further in 2022. <br></p>
<h2> East Asia Job Ratio: Heat Map </h2> 
East Asia : Increasing the ratio of data scientist. <br>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line">df21job= df21.loc[:,[<span class="string">&#x27;region&#x27;</span>,<span class="string">&#x27;Q5&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q5&#x27;</span>:<span class="string">&#x27;2021&#x27;</span>&#125;).fillna(<span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">df20job= df20.loc[:,[<span class="string">&#x27;region&#x27;</span>,<span class="string">&#x27;Q5&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q5&#x27;</span>:<span class="string">&#x27;2020&#x27;</span>&#125;).fillna(<span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">df19job= df19.loc[:,[<span class="string">&#x27;region&#x27;</span>,<span class="string">&#x27;Q5&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q5&#x27;</span>:<span class="string">&#x27;2019&#x27;</span>&#125;).fillna(<span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">df18job= df18.loc[:,[<span class="string">&#x27;region&#x27;</span>,<span class="string">&#x27;Q6&#x27;</span>]].rename(columns=&#123; <span class="string">&#x27;Q6&#x27;</span>:<span class="string">&#x27;2018&#x27;</span>&#125;).fillna(<span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line">df17job= df17.loc[:,[<span class="string">&#x27;region&#x27;</span>,<span class="string">&#x27;CurrentJobTitleSelect&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;CurrentJobTitleSelect&#x27;</span>:<span class="string">&#x27;2017&#x27;</span>&#125;).fillna(<span class="string">&#x27;Others&#x27;</span>)</span><br><span class="line"></span><br><span class="line">df21job[<span class="string">&#x27;JOB&#x27;</span>]=[<span class="string">&quot;Data Analyst&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Analyst</span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Data Scientist&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Scientist <span class="comment"># Data Scientist</span></span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Developer&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Developer</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;NotEmployed&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Not_Employed</span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Others&quot;</span> </span><br><span class="line">                   <span class="keyword">for</span> x <span class="keyword">in</span> df21job[<span class="string">&#x27;2021&#x27;</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df20job[<span class="string">&#x27;JOB&#x27;</span>]=[<span class="string">&quot;Data Analyst&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Analyst</span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Data Scientist&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Scientist </span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Developer&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Developer</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;NotEmployed&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Not_Employed</span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Others&quot;</span></span><br><span class="line">                   <span class="keyword">for</span> x <span class="keyword">in</span> df20job[<span class="string">&#x27;2020&#x27;</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df19job[<span class="string">&#x27;JOB&#x27;</span>]=[<span class="string">&quot;Data Analyst&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Analyst</span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Data Scientist&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Scientist </span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Developer&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Developer</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;NotEmployed&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Not_Employed</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;Others&quot;</span></span><br><span class="line">                   <span class="keyword">for</span> x <span class="keyword">in</span> df19job[<span class="string">&#x27;2019&#x27;</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df18job[<span class="string">&#x27;JOB&#x27;</span>]=[<span class="string">&quot;Data Analyst&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Analyst</span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Data Scientist&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Scientist </span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Developer&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Developer</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;NotEmployed&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Not_Employed</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;Others&quot;</span></span><br><span class="line">                   <span class="keyword">for</span> x <span class="keyword">in</span> df18job[<span class="string">&#x27;2018&#x27;</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df17job[<span class="string">&#x27;JOB&#x27;</span>]=[<span class="string">&quot;Data Analyst&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Analyst</span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Data Scientist&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Data_Scientist </span><br><span class="line">                   <span class="keyword">else</span> <span class="string">&quot;Developer&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Developer</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;NotEmployed&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> Not_Employed</span><br><span class="line">                    <span class="keyword">else</span> <span class="string">&quot;Others&quot;</span></span><br><span class="line">                   <span class="keyword">for</span> x <span class="keyword">in</span> df17job[<span class="string">&#x27;2017&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">df21_job =df21job.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df20_job =df20job.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df19_job =df19job.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df18_job =df18job.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df17_job =df17job.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line">merge11=pd.merge(df21_job,df20_job, how=<span class="string">&#x27;outer&#x27;</span>,on=<span class="string">&#x27;JOB&#x27;</span>)</span><br><span class="line">merge21=pd.merge(df19_job,df18_job, how=<span class="string">&#x27;outer&#x27;</span>,on=<span class="string">&#x27;JOB&#x27;</span>)</span><br><span class="line">merge31=pd.merge(merge11,merge21, how=<span class="string">&#x27;outer&#x27;</span>,on=<span class="string">&#x27;JOB&#x27;</span>)</span><br><span class="line">merge_Wo=(pd.merge(merge31,df17_job, how=<span class="string">&#x27;outer&#x27;</span>,on=<span class="string">&#x27;JOB&#x27;</span>)</span><br><span class="line">            .rename(columns = &#123;<span class="string">&#x27;Count_x_x&#x27;</span>:<span class="string">&#x27;2021&#x27;</span>,<span class="string">&#x27;Count_y_x&#x27;</span>:<span class="string">&#x27;2020&#x27;</span>,<span class="string">&#x27;Count_x_y&#x27;</span>:<span class="string">&#x27;2019&#x27;</span>,<span class="string">&#x27;Count_y_y&#x27;</span>:<span class="string">&#x27;2018&#x27;</span>,<span class="string">&#x27;Count&#x27;</span>:<span class="string">&#x27;2017&#x27;</span>&#125;).fillna(<span class="number">0</span>)</span><br><span class="line">            .reindex(columns = [<span class="string">&#x27;JOB&#x27;</span>,<span class="string">&#x27;2017&#x27;</span>,<span class="string">&#x27;2018&#x27;</span>,<span class="string">&#x27;2019&#x27;</span>,<span class="string">&#x27;2020&#x27;</span>,<span class="string">&#x27;2021&#x27;</span> ]))</span><br><span class="line"></span><br><span class="line">df21job_Ea = df21job[df21job[<span class="string">&#x27;region&#x27;</span>] == <span class="string">&#x27;EastAsia&#x27;</span>].loc[:,[<span class="string">&#x27;region&#x27;</span>,<span class="string">&#x27;JOB&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;EastAsia&#x27;</span>&#125;)</span><br><span class="line">df20job_Ea = df20job[df20job[<span class="string">&#x27;region&#x27;</span>] == <span class="string">&#x27;EastAsia&#x27;</span>].loc[:,[<span class="string">&#x27;region&#x27;</span>,<span class="string">&#x27;JOB&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;EastAsia&#x27;</span>&#125;)</span><br><span class="line">df19job_Ea = df19job[df19job[<span class="string">&#x27;region&#x27;</span>] == <span class="string">&#x27;EastAsia&#x27;</span>].loc[:,[<span class="string">&#x27;region&#x27;</span>,<span class="string">&#x27;JOB&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;EastAsia&#x27;</span>&#125;)</span><br><span class="line">df18job_Ea = df18job[df18job[<span class="string">&#x27;region&#x27;</span>] == <span class="string">&#x27;EastAsia&#x27;</span>].loc[:,[<span class="string">&#x27;region&#x27;</span>,<span class="string">&#x27;JOB&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;EastAsia&#x27;</span>&#125;)</span><br><span class="line">df17job_Ea = df17job[df17job[<span class="string">&#x27;region&#x27;</span>] == <span class="string">&#x27;EastAsia&#x27;</span>].loc[:,[<span class="string">&#x27;region&#x27;</span>,<span class="string">&#x27;JOB&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;EastAsia&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">df21job_Ea =df21job_Ea.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df20job_Ea =df20job_Ea.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df19job_Ea =df19job_Ea.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df18job_Ea =df18job_Ea.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df17job_Ea =df17job_Ea.groupby([<span class="string">&#x27;JOB&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line">merge1=pd.merge(df21job_Ea,df20job_Ea, how=<span class="string">&#x27;outer&#x27;</span>,on=<span class="string">&#x27;JOB&#x27;</span>)</span><br><span class="line">merge2=pd.merge(df19job_Ea,df18job_Ea, how=<span class="string">&#x27;outer&#x27;</span>,on=<span class="string">&#x27;JOB&#x27;</span>)</span><br><span class="line">merge3=pd.merge(merge1,merge2, how=<span class="string">&#x27;outer&#x27;</span>,on=<span class="string">&#x27;JOB&#x27;</span>)</span><br><span class="line">merge=(pd.merge(merge3,df17job_Ea, how=<span class="string">&#x27;outer&#x27;</span>,on=<span class="string">&#x27;JOB&#x27;</span>)</span><br><span class="line">         .rename(columns = &#123;<span class="string">&#x27;Count_x_x&#x27;</span>:<span class="string">&#x27;2021&#x27;</span>,<span class="string">&#x27;Count_y_x&#x27;</span>:<span class="string">&#x27;2020&#x27;</span>,<span class="string">&#x27;Count_x_y&#x27;</span>:<span class="string">&#x27;2019&#x27;</span>,<span class="string">&#x27;Count_y_y&#x27;</span>:<span class="string">&#x27;2018&#x27;</span>,<span class="string">&#x27;Count&#x27;</span>:<span class="string">&#x27;2017&#x27;</span>&#125;).fillna(<span class="number">0</span>)</span><br><span class="line">         .reindex(columns = [<span class="string">&#x27;JOB&#x27;</span>,<span class="string">&#x27;2017&#x27;</span>,<span class="string">&#x27;2018&#x27;</span>,<span class="string">&#x27;2019&#x27;</span>,<span class="string">&#x27;2020&#x27;</span>,<span class="string">&#x27;2021&#x27;</span> ]))</span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line">z1=((merge_Wo.iloc[:,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]].to_numpy()/merge_Wo.iloc[:,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]].to_numpy().<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">1</span>)</span><br><span class="line">z2=((merge.iloc[:,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]].to_numpy()/merge.iloc[:,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]].to_numpy().<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x=[<span class="string">&#x27;2017-year&#x27;</span>,<span class="string">&#x27;2018-year&#x27;</span>,<span class="string">&#x27;2019-year&#x27;</span>,<span class="string">&#x27;2020-year&#x27;</span>,<span class="string">&#x27;2021-year&#x27;</span>]</span><br><span class="line">y1=merge_Wo[<span class="string">&#x27;JOB&#x27;</span>].tolist()</span><br><span class="line">y2=merge[<span class="string">&#x27;JOB&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig1 = ff.create_annotated_heatmap(z1, x = x, y = y1, colorscale=<span class="string">&#x27;sunset&#x27;</span>)</span><br><span class="line">fig2 = ff.create_annotated_heatmap(z2, x = x, y = y2, colorscale=<span class="string">&#x27;sunset&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> annot <span class="keyword">in</span> fig2[<span class="string">&#x27;layout&#x27;</span>][<span class="string">&#x27;annotations&#x27;</span>]:</span><br><span class="line">    annot[<span class="string">&#x27;xref&#x27;</span>] = <span class="string">&#x27;x2&#x27;</span></span><br><span class="line">    </span><br><span class="line">fig = make_subplots(rows=<span class="number">1</span>, cols=<span class="number">2</span>)</span><br><span class="line">fig.add_trace(fig1.data[<span class="number">0</span>], row=<span class="number">1</span>, col=<span class="number">1</span>)</span><br><span class="line">fig.add_trace(fig2.data[<span class="number">0</span>], row=<span class="number">1</span>, col=<span class="number">2</span>)</span><br><span class="line">fig.update_layout(fig1.layout, title=<span class="string">&#x27;&lt;b&gt;           World vs EastAsia&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">22</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">200</span>, l=<span class="number">100</span>, r=<span class="number">10</span>, b=<span class="number">200</span>),</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">1150</span>, coloraxis=<span class="built_in">dict</span>(showscale=<span class="literal">True</span>, colorscale=<span class="string">&#x27;sunset&#x27;</span>))</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Job&lt;/b&gt;: %&#123;y&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Year&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;z&#125;%&#x27;</span>)</span><br><span class="line">fig.layout.annotations += fig2.layout.annotations</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.9</span>,</span><br><span class="line">                                    y=-<span class="number">0.25</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h1 id="3-1-4-Age-transformation"><a href="#3-1-4-Age-transformation" class="headerlink" title="3.1.4 Age transformation"></a>3.1.4 Age transformation</h1><hr>
<h2> > Age change in World and East Asia by year: Stacked scatter plot </h2>

<ol>
<li>In the case of Age data, there is no 2017 data.</li>
<li>70% of the World respondents said 20s to 30s.</li>
<li>70% of East Asia respondents said 20s to 30s.</li>
<li>The number of respondents increases, but the ratio seems to have stabilized.</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line"><span class="comment">#World</span></span><br><span class="line">Age21_W = df21.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Age20_W = df20.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Age19_W = df19.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Age18_W = df18.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q2&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q2&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Age5y_W= pd.concat([Age21_W, Age20_W, Age19_W, Age18_W])</span><br><span class="line">Age5y_W= (Age5y_W.replace([<span class="string">&#x27;60-69&#x27;</span>, <span class="string">&#x27;70+&#x27;</span>, <span class="string">&#x27;70-79&#x27;</span>, <span class="string">&#x27;80+&#x27;</span>], <span class="string">&#x27;60+&#x27;</span>)</span><br><span class="line">           .replace([<span class="string">&#x27;22-24&#x27;</span>, <span class="string">&#x27;25-29&#x27;</span>], <span class="string">&#x27;22-29&#x27;</span>)</span><br><span class="line">           .replace([<span class="string">&#x27;30-34&#x27;</span>, <span class="string">&#x27;35-39&#x27;</span>], <span class="string">&#x27;30-39&#x27;</span>)</span><br><span class="line">            .replace([<span class="string">&#x27;40-44&#x27;</span>, <span class="string">&#x27;45-49&#x27;</span>], <span class="string">&#x27;40-49&#x27;</span>)</span><br><span class="line">        .replace([<span class="string">&#x27;50-54&#x27;</span>, <span class="string">&#x27;55-59&#x27;</span>], <span class="string">&#x27;50-59&#x27;</span>)</span><br><span class="line">           .groupby([<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;age&#x27;</span>])</span><br><span class="line">           .size()</span><br><span class="line">           .reset_index()</span><br><span class="line">           .rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;))</span><br><span class="line"></span><br><span class="line">Age21_percent_W = Age5y_W[Age5y_W[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2021&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age21_percent_W[<span class="string">&#x27;percentage&#x27;</span>] = Age21_percent_W[<span class="string">&quot;Count&quot;</span>] / Age21_percent_W[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age21_percent_W[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age21_percent_W[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">Age20_percent_W = Age5y_W[Age5y_W[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2020&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age20_percent_W[<span class="string">&#x27;percentage&#x27;</span>] = Age20_percent_W[<span class="string">&quot;Count&quot;</span>] / Age20_percent_W[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age20_percent_W[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age20_percent_W[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">Age19_percent_W = Age5y_W[Age5y_W[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2019&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age19_percent_W[<span class="string">&#x27;percentage&#x27;</span>] = Age19_percent_W[<span class="string">&quot;Count&quot;</span>] / Age19_percent_W[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age19_percent_W[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age19_percent_W[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">Age18_percent_W = Age5y_W[Age5y_W[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2018&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age18_percent_W[<span class="string">&#x27;percentage&#x27;</span>] = Age18_percent_W[<span class="string">&quot;Count&quot;</span>] / Age18_percent_W[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age18_percent_W[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age18_percent_W[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">Age5y_percent_W = pd.concat([Age18_percent_W, Age19_percent_W, Age20_percent_W, Age21_percent_W], ignore_index = <span class="literal">True</span>)</span><br><span class="line">Age5y_percent_W= pd.pivot(Age5y_percent_W, index = <span class="string">&quot;year&quot;</span>, columns = <span class="string">&#x27;age&#x27;</span>, values = <span class="string">&quot;%&quot;</span>).reset_index()</span><br><span class="line">Age5y_percent_W</span><br><span class="line"></span><br><span class="line">Age21 = df21_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Age20 = df20_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Age19 = df19_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Age18 = df18_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q2&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q2&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Age5y= pd.concat([Age21, Age20, Age19, Age18])</span><br><span class="line">Age5y= (Age5y.replace([<span class="string">&#x27;60-69&#x27;</span>, <span class="string">&#x27;70+&#x27;</span>, <span class="string">&#x27;70-79&#x27;</span>, <span class="string">&#x27;80+&#x27;</span>], <span class="string">&#x27;60+&#x27;</span>)</span><br><span class="line">           .replace([<span class="string">&#x27;22-24&#x27;</span>, <span class="string">&#x27;25-29&#x27;</span>], <span class="string">&#x27;22-29&#x27;</span>)</span><br><span class="line">           .replace([<span class="string">&#x27;30-34&#x27;</span>, <span class="string">&#x27;35-39&#x27;</span>], <span class="string">&#x27;30-39&#x27;</span>)</span><br><span class="line">            .replace([<span class="string">&#x27;40-44&#x27;</span>, <span class="string">&#x27;45-49&#x27;</span>], <span class="string">&#x27;40-49&#x27;</span>)</span><br><span class="line">        .replace([<span class="string">&#x27;50-54&#x27;</span>, <span class="string">&#x27;55-59&#x27;</span>], <span class="string">&#x27;50-59&#x27;</span>)</span><br><span class="line">           .groupby([<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;age&#x27;</span>])</span><br><span class="line">           .size()</span><br><span class="line">           .reset_index()</span><br><span class="line">           .rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">#EastAsia</span></span><br><span class="line">Age21_percent = Age5y[Age5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2021&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age21_percent[<span class="string">&#x27;percentage&#x27;</span>] = Age21_percent[<span class="string">&quot;Count&quot;</span>] / Age21_percent[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age21_percent[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age21_percent[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">Age21_percent</span><br><span class="line"></span><br><span class="line">Age20_percent = Age5y[Age5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2020&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age20_percent[<span class="string">&#x27;percentage&#x27;</span>] = Age20_percent[<span class="string">&quot;Count&quot;</span>] / Age20_percent[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age20_percent[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age20_percent[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">Age20_percent</span><br><span class="line"></span><br><span class="line">Age19_percent = Age5y[Age5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2019&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age19_percent[<span class="string">&#x27;percentage&#x27;</span>] = Age19_percent[<span class="string">&quot;Count&quot;</span>] / Age19_percent[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age19_percent[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age19_percent[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">Age19_percent</span><br><span class="line"></span><br><span class="line">Age18_percent = Age5y[Age5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2018&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age18_percent[<span class="string">&#x27;percentage&#x27;</span>] = Age18_percent[<span class="string">&quot;Count&quot;</span>] / Age18_percent[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age18_percent[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age18_percent[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">Age18_percent</span><br><span class="line"></span><br><span class="line">Age5y_percent = pd.concat([Age18_percent, Age19_percent, Age20_percent, Age21_percent], ignore_index = <span class="literal">True</span>)</span><br><span class="line">Age5y_percent= pd.pivot(Age5y_percent, index = <span class="string">&quot;year&quot;</span>, columns = <span class="string">&#x27;age&#x27;</span>, values = <span class="string">&quot;%&quot;</span>).reset_index()</span><br><span class="line">Age5y_percent</span><br><span class="line"></span><br><span class="line">Age5y_percent_order = Age5y_percent_W[<span class="string">&#x27;year&#x27;</span>].tolist()</span><br><span class="line">Age5y_order = Age5y_W[<span class="string">&#x27;age&#x27;</span>].unique().tolist()</span><br><span class="line"></span><br><span class="line"><span class="comment">#graph1</span></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent_W[<span class="string">&#x27;18-21&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;18-21&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#F2798F&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent_W[<span class="string">&#x27;22-29&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;20s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#88BFBA&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent_W[<span class="string">&#x27;30-39&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;30s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#CDD9A3&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent_W[<span class="string">&#x27;40-49&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;40s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#F28705&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent_W[<span class="string">&#x27;50-59&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;50s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#D9946C&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent_W[<span class="string">&#x27;60+&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;60s&lt;&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#F2D64B&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;y&#125;%&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Year&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>)</span><br><span class="line">fig.update_layout(yaxis_range = (<span class="number">0</span>, <span class="number">100</span>), height=<span class="number">500</span>, width=<span class="number">700</span>,</span><br><span class="line">                 title_text=<span class="string">&quot;&lt;b&gt;World&lt;/b&gt;&quot;</span>, title_font_size=<span class="number">20</span>,</span><br><span class="line">                 title_x=<span class="number">0.5</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.2</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br><span class="line"></span><br><span class="line"><span class="comment">#graph2</span></span><br><span class="line">Age5y_percent_order = Age5y_percent[<span class="string">&#x27;year&#x27;</span>].tolist()</span><br><span class="line">Age5y_order = Age5y[<span class="string">&#x27;age&#x27;</span>].unique().tolist()</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent[<span class="string">&#x27;18-21&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;18-21&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#F2798F&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent[<span class="string">&#x27;22-29&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;20s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#88BFBA&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent[<span class="string">&#x27;30-39&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;30s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#CDD9A3&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent[<span class="string">&#x27;40-49&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;40s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#F28705&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent[<span class="string">&#x27;50-59&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;50s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#D9946C&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent[<span class="string">&#x27;60+&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;60s&lt;&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#F2D64B&#x27;</span>))</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;y&#125;%&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Year&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>)</span><br><span class="line">fig.update_layout(yaxis_range = (<span class="number">0</span>, <span class="number">100</span>), height=<span class="number">500</span>, width=<span class="number">700</span>,</span><br><span class="line">                 title_text=<span class="string">&quot;&lt;b&gt;East Asia&lt;/b&gt;&quot;</span>, title_font_size=<span class="number">20</span>,</span><br><span class="line">                 title_x=<span class="number">0.5</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.2</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h2> 17'East Asia Age Ratio: Heat Map </h2>

<ul>
<li><strong>East Asia</strong> : 50% or more. Those in their 20s and 30s.</li>
<li><strong>Korea</strong>: Those in their 20s are the highest.<br>  The number of respondents in their 50s and older is also large.</li>
<li><strong>Taiwan</strong> : The number of respondents in their 30s and older is relatively small.</li>
<li><strong>China</strong>: 70% or more of respondents in their 30s or younger.<br>  Related to life expectancy?</li>
<li><strong>Japan</strong>: Like an aging country, all ages are evenly distributed.<br>  Even if you’re older, there are many respondents to Kaggle.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data processing</span></span><br><span class="line">df21Age_Ea = df21_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;2021&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line"></span><br><span class="line">df21Age_Ea=(df21Age_Ea.replace([<span class="string">&#x27;60-69&#x27;</span>, <span class="string">&#x27;70+&#x27;</span>, <span class="string">&#x27;70-79&#x27;</span>, <span class="string">&#x27;80+&#x27;</span>], <span class="string">&#x27;60+&#x27;</span>)</span><br><span class="line">           .replace([<span class="string">&#x27;22-24&#x27;</span>, <span class="string">&#x27;25-29&#x27;</span>], <span class="string">&#x27;22-29&#x27;</span>)</span><br><span class="line">           .replace([<span class="string">&#x27;30-34&#x27;</span>, <span class="string">&#x27;35-39&#x27;</span>], <span class="string">&#x27;30-39&#x27;</span>)</span><br><span class="line">            .replace([<span class="string">&#x27;40-44&#x27;</span>, <span class="string">&#x27;45-49&#x27;</span>], <span class="string">&#x27;40-49&#x27;</span>)</span><br><span class="line">        .replace([<span class="string">&#x27;50-54&#x27;</span>, <span class="string">&#x27;55-59&#x27;</span>], <span class="string">&#x27;50-59&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 연령-지역 %</span></span><br><span class="line">dfKo_Age21= df21Age_Ea[df21Age_Ea[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&#x27;South Korea&#x27;</span>]</span><br><span class="line">dfKo_Age21_per=dfKo_Age21[<span class="string">&#x27;2021&#x27;</span>].value_counts().to_frame().reset_index()</span><br><span class="line">dfKo_Age21_per[<span class="string">&#x27;South Korea&#x27;</span>]=((dfKo_Age21_per[<span class="string">&#x27;2021&#x27;</span>] / <span class="built_in">len</span>(dfKo_Age21))*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">dfTw_Age21= df21Age_Ea[df21Age_Ea[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&#x27;Taiwan&#x27;</span>]</span><br><span class="line">dfTw_Age21_per=dfTw_Age21[<span class="string">&#x27;2021&#x27;</span>].value_counts().to_frame().reset_index()</span><br><span class="line">dfTw_Age21_per[<span class="string">&#x27;Taiwan&#x27;</span>]=((dfTw_Age21_per[<span class="string">&#x27;2021&#x27;</span>] / <span class="built_in">len</span>(dfTw_Age21))*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line">dfTw_Age21_per</span><br><span class="line"></span><br><span class="line">dfCh_Age21= df21Age_Ea[df21Age_Ea[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&#x27;China&#x27;</span>]</span><br><span class="line">dfCh_Age21_per=dfCh_Age21[<span class="string">&#x27;2021&#x27;</span>].value_counts().to_frame().reset_index()</span><br><span class="line">dfCh_Age21_per[<span class="string">&#x27;China&#x27;</span>]=((dfCh_Age21_per[<span class="string">&#x27;2021&#x27;</span>] / <span class="built_in">len</span>(dfCh_Age21))*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line">dfCh_Age21_per</span><br><span class="line"></span><br><span class="line">df21Age_Ea.head()</span><br><span class="line">dfJp_Age21= df21Age_Ea[df21Age_Ea[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&#x27;Japan&#x27;</span>]</span><br><span class="line">dfJp_Age21_per=dfJp_Age21[<span class="string">&#x27;2021&#x27;</span>].value_counts().to_frame().reset_index()</span><br><span class="line">dfJp_Age21_per[<span class="string">&#x27;Japan&#x27;</span>]=((dfJp_Age21_per[<span class="string">&#x27;2021&#x27;</span>] / <span class="built_in">len</span>(dfJp_Age21))*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line">dfJp_Age21_per</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">merge1= pd.merge(dfKo_Age21_per,dfTw_Age21_per, on=<span class="string">&#x27;index&#x27;</span>, how=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line">merge2= pd.merge(dfCh_Age21_per,dfJp_Age21_per, on=<span class="string">&#x27;index&#x27;</span>, how=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line">merge= pd.merge(merge1,merge2, on=<span class="string">&#x27;index&#x27;</span>, how=<span class="string">&#x27;outer&#x27;</span>).fillna(<span class="number">0</span>).sort_values(by=[<span class="string">&#x27;index&#x27;</span>],ascending=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line">x1=[<span class="string">&#x27;South Korea&#x27;</span>,<span class="string">&#x27;Taiwan&#x27;</span>,<span class="string">&#x27;China&#x27;</span>,<span class="string">&#x27;Japan&#x27;</span>]</span><br><span class="line">y1=merge.sort_values(by=[<span class="string">&#x27;index&#x27;</span>], ascending=<span class="literal">True</span>)[<span class="string">&#x27;index&#x27;</span>].tolist()</span><br><span class="line">z1=merge.iloc[:,[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>]].to_numpy()</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Heatmap(</span><br><span class="line">                   z=z1,</span><br><span class="line">                   x=x1,</span><br><span class="line">                   y=y1,</span><br><span class="line">                   hoverongaps = <span class="literal">True</span>,</span><br><span class="line">                   opacity=<span class="number">1.0</span>, xgap=<span class="number">2.5</span>, ygap=<span class="number">2.5</span>))</span><br><span class="line">fig = ff.create_annotated_heatmap(z1, x = x1, y = y1, colorscale=<span class="string">&#x27;sunset&#x27;</span>)</span><br><span class="line">fig.update_layout(height=<span class="number">500</span>, width=<span class="number">600</span>,</span><br><span class="line">                 title_text=<span class="string">&quot;&lt;b&gt;East Asia Age (2021)&lt;/b&gt;&quot;</span>, title_font_size=<span class="number">20</span>,</span><br><span class="line">                 title_x=<span class="number">0.5</span>)</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Age&lt;/b&gt;: %&#123;y&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Country&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;z&#125;%&#x27;</span>)</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.2</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>17’East Asia’s age ratio: Box plot</p>
</blockquote>
<blockquote>
<p>2017: Data is not a section but an individual number.  <br><br>If you divide the interval, you can add it to the previous graph. <br><br>It was data that I could draw a bar plot, so I drew it. <br><br>You can see a 100-year-old in China, but they don’t remove missing values on purpose.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 연도별 나이 </span></span><br><span class="line">df21Age_Ea = df21_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;2021&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">df20Age_Ea = df20_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;2020&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">df19Age_Ea = df19_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;2019&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">df18Age_Ea = df18_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q2&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q2&#x27;</span>:<span class="string">&#x27;2018&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">df17Age_Ea = df17_Ea.loc[:,[<span class="string">&#x27;Country&#x27;</span>,<span class="string">&#x27;Age&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Country&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Age&#x27;</span>:<span class="string">&#x27;2017&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#data frame 정리</span></span><br><span class="line">dfAge21 =df21Age_Ea.groupby([<span class="string">&#x27;East_Asia&#x27;</span>,<span class="string">&#x27;2021&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">dfAge20 =df20Age_Ea.groupby([<span class="string">&#x27;East_Asia&#x27;</span>,<span class="string">&#x27;2020&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">dfAge19 =df19Age_Ea.groupby([<span class="string">&#x27;East_Asia&#x27;</span>,<span class="string">&#x27;2019&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">dfAge18 =df18Age_Ea.groupby([<span class="string">&#x27;East_Asia&#x27;</span>,<span class="string">&#x27;2018&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">dfAge17 =(df17Age_Ea.groupby([<span class="string">&#x27;East_Asia&#x27;</span>,<span class="string">&#x27;2017&#x27;</span>])</span><br><span class="line">          .size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;))</span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">x = [<span class="string">&#x27;China&#x27;</span>,<span class="string">&#x27;Japan&#x27;</span>,<span class="string">&#x27;South Korea&#x27;</span>,<span class="string">&#x27;Taiwan&#x27;</span>]</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Box( y=dfAge17[<span class="string">&#x27;2017&#x27;</span>][dfAge17[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&quot;Japan&quot;</span>].to_numpy(),</span><br><span class="line">    name=<span class="string">&#x27;Japan&#x27;</span>,</span><br><span class="line">    marker=<span class="built_in">dict</span>(color=<span class="string">&#x27;#CDD9A3&#x27;</span>)))</span><br><span class="line">fig.add_trace(go.Box(y=dfAge17[<span class="string">&#x27;2017&#x27;</span>][dfAge17[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&quot;China&quot;</span>].to_numpy(),</span><br><span class="line">    name=<span class="string">&#x27;China&#x27;</span>,</span><br><span class="line">    marker=<span class="built_in">dict</span>(color=<span class="string">&#x27;#88BFBA&#x27;</span>)))</span><br><span class="line">fig.add_trace(go.Box(y=dfAge17[<span class="string">&#x27;2017&#x27;</span>][dfAge17[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&quot;South Korea&quot;</span>].to_numpy(),</span><br><span class="line">    name=<span class="string">&#x27;South Korea&#x27;</span>,</span><br><span class="line">    marker=<span class="built_in">dict</span>(color=<span class="string">&#x27;#F2798F&#x27;</span>)))</span><br><span class="line">fig.add_trace(go.Box(y=dfAge17[<span class="string">&#x27;2017&#x27;</span>][dfAge17[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&quot;Taiwan&quot;</span>].to_numpy(),</span><br><span class="line">    name=<span class="string">&#x27;Taiwan&#x27;</span>,</span><br><span class="line">    marker=<span class="built_in">dict</span>(color=<span class="string">&#x27;#F28705&#x27;</span></span><br><span class="line">    ),))</span><br><span class="line"></span><br><span class="line">fig.update_layout(yaxis = <span class="built_in">dict</span>(<span class="built_in">range</span>=[<span class="number">0</span>, <span class="number">120</span>]))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.update_layout(yaxis_range = (<span class="number">0</span>, <span class="number">110</span>), height=<span class="number">600</span>, width=<span class="number">700</span>,</span><br><span class="line">                  title_text=<span class="string">&quot;&lt;b&gt;Age in East Asia (2017)&lt;/b&gt;&quot;</span>, title_font_size=<span class="number">20</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">100</span>, l=<span class="number">50</span>, r=<span class="number">50</span>, b=<span class="number">100</span>),</span><br><span class="line">                  title_x=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_layout(legend=<span class="built_in">dict</span>(</span><br><span class="line">    orientation=<span class="string">&quot;v&quot;</span>,</span><br><span class="line">    yanchor=<span class="string">&quot;bottom&quot;</span>,</span><br><span class="line">    y=<span class="number">0.8</span>,</span><br><span class="line">    xanchor=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    x=<span class="number">1</span>))</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.2</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h1 id="3-1-5-Degree-transformation"><a href="#3-1-5-Degree-transformation" class="headerlink" title="3.1.5 Degree transformation"></a>3.1.5 Degree transformation</h1><hr>
<h2> World job ratio in each country: pie plot </h2>

<ul>
<li>World: 90% or higher Bachelor’s degree</li>
<li>East Asia: 85% bachelor’s degree or higher</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line">degree_wo = (df21[<span class="string">&#x27;Q4&#x27;</span>]</span><br><span class="line">             .replace([<span class="string">&#x27;No formal education past high school&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">             .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Professional doctorate&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>)</span><br><span class="line">             .value_counts().to_frame())</span><br><span class="line">degree_ea = (df21_Ea[<span class="string">&#x27;Q4&#x27;</span>]</span><br><span class="line">             .replace([<span class="string">&#x27;No formal education past high school&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">             .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Professional doctorate&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>)</span><br><span class="line">             .value_counts().to_frame())</span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line">colors = [<span class="string">&#x27;#F2798F&#x27;</span>,<span class="string">&#x27;#88BFBA&#x27;</span>, <span class="string">&#x27;#CDD9A3&#x27;</span>, <span class="string">&#x27;#F28705&#x27;</span>, <span class="string">&#x27;#D9946C&#x27;</span>]</span><br><span class="line">fig = make_subplots(rows=<span class="number">1</span>, cols=<span class="number">2</span>, specs=[[&#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;pie&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;pie&#x27;</span>&#125;]], subplot_titles=(<span class="string">&quot;World&quot;</span>, <span class="string">&quot;East Asia&quot;</span>))</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors), labels=degree_wo.index, values=degree_wo[<span class="string">&#x27;Q4&#x27;</span>].to_numpy(), name=<span class="string">&quot;World&quot;</span>),</span><br><span class="line">              <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors), labels=degree_ea.index, values=degree_ea[<span class="string">&#x27;Q4&#x27;</span>].to_numpy(), name=<span class="string">&quot;East Asia&quot;</span>),</span><br><span class="line">              <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig.update_traces(hole=<span class="number">.0</span>, hoverinfo=<span class="string">&quot;label+percent+name&quot;</span>)</span><br><span class="line"></span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;&lt;b&gt;World vs East Asia&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">22</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">200</span>, l=<span class="number">30</span>, r=<span class="number">0</span>, b=<span class="number">200</span>),</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">700</span>)</span><br><span class="line">fig.update_layout(legend=<span class="built_in">dict</span>(</span><br><span class="line">    orientation=<span class="string">&quot;h&quot;</span>,</span><br><span class="line">    yanchor=<span class="string">&quot;bottom&quot;</span>,</span><br><span class="line">    y=<span class="number">1.1</span>,</span><br><span class="line">    xanchor=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    x=<span class="number">1.0</span>))</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.5</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2> Percentage of East Asia degrees by year: sunburst plot </h2>

<p>The highest percentage of respondents with <strong>master’s degrees</strong> per year</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line">df21_Ea_degree=(df21_Ea[<span class="string">&#x27;Q4&#x27;</span>].replace([<span class="string">&#x27;No formal education past high school&#x27;</span>, <span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">                             .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>,<span class="string">&#x27;Professional doctorate&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>)</span><br><span class="line">                             .value_counts().to_frame().rename(columns=&#123;<span class="string">&#x27;Q4&#x27;</span>:<span class="string">&#x27;2021&#x27;</span>&#125;))</span><br><span class="line">df20_Ea_degree=(df20_Ea[<span class="string">&#x27;Q4&#x27;</span>].replace([<span class="string">&#x27;No formal education past high school&#x27;</span>, <span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">                             .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>, <span class="string">&#x27;Professional degree&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>)</span><br><span class="line">                             .value_counts().to_frame().rename(columns=&#123;<span class="string">&#x27;Q4&#x27;</span>:<span class="string">&#x27;2020&#x27;</span>&#125;))</span><br><span class="line">df19_Ea_degree=(df19_Ea[<span class="string">&#x27;Q4&#x27;</span>].replace([<span class="string">&#x27;No formal education past high school&#x27;</span>,<span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">                             .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>, <span class="string">&#x27;Professional degree&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>)</span><br><span class="line">                             .value_counts().to_frame().rename(columns=&#123;<span class="string">&#x27;Q4&#x27;</span>:<span class="string">&#x27;2019&#x27;</span>&#125;))</span><br><span class="line">df18_Ea_degree=(df18_Ea[<span class="string">&#x27;Q4&#x27;</span>].replace([<span class="string">&#x27;No formal education past high school&#x27;</span>, <span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">                             .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>, <span class="string">&#x27;Professional degree&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>)</span><br><span class="line">                             .value_counts().to_frame().rename(columns=&#123;<span class="string">&#x27;Q4&#x27;</span>:<span class="string">&#x27;2018&#x27;</span>&#125;))</span><br><span class="line">df17_Ea_degree=(df17_Ea[<span class="string">&#x27;FormalEducation&#x27;</span>]</span><br><span class="line">                .replace([<span class="string">&#x27;No formal education past high school&#x27;</span>, <span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">                .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>, <span class="string">&#x27;Professional degree&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>)</span><br><span class="line">                .value_counts().to_frame()</span><br><span class="line">                .rename(columns=&#123;<span class="string">&#x27;FormalEducation&#x27;</span>:<span class="string">&#x27;2017&#x27;</span>&#125; ,index = &#123;<span class="string">&#x27;I did not complete any formal education past high school&#x27;</span>:<span class="string">&#x27;No formal education past high school&#x27;</span>,<span class="string">&#x27;Master\&#x27;s degree&#x27;</span>:<span class="string">&#x27;Master’s degree&#x27;</span>,<span class="string">&#x27;Bachelor\&#x27;s degree&#x27;</span>:<span class="string">&#x27;Bachelor’s degree&#x27;</span>,<span class="string">&#x27;Some college/university study without earning a bachelor\&#x27;s degree&#x27;</span>:<span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>&#125;)  )</span><br><span class="line">                </span><br><span class="line">concat1 = pd.concat([df21_Ea_degree,df20_Ea_degree],axis=<span class="number">1</span>, join=<span class="string">&#x27;outer&#x27;</span>)  </span><br><span class="line">concat2 = pd.concat([df19_Ea_degree,df18_Ea_degree],axis=<span class="number">1</span>, join=<span class="string">&#x27;outer&#x27;</span>)  </span><br><span class="line">concat3 = pd.concat([concat1,concat2],axis=<span class="number">1</span>, join=<span class="string">&#x27;outer&#x27;</span>) </span><br><span class="line">df21_Ea_degree_yearly_=concat3.join(df17_Ea_degree).fillna(<span class="number">0</span>).transpose() <span class="comment">#.transpose() 행 열 바꾸기</span></span><br><span class="line"></span><br><span class="line">df21_Ea_degree_yearly=df21_Ea_degree_yearly_.stack().to_frame().reset_index().rename(columns=&#123;<span class="string">&#x27;level_0&#x27;</span>:<span class="string">&#x27;year&#x27;</span>,<span class="string">&#x27;level_1&#x27;</span>:<span class="string">&#x27;degree&#x27;</span>,<span class="number">0</span>:<span class="string">&#x27;value&#x27;</span>&#125;)</span><br><span class="line">df21_Ea_degree_yearly</span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line">fig = px.sunburst(df21_Ea_degree_yearly, path=[<span class="string">&#x27;year&#x27;</span>,<span class="string">&#x27;degree&#x27;</span>], values=df21_Ea_degree_yearly[<span class="string">&#x27;value&#x27;</span>].tolist())</span><br><span class="line">fig.update_layout( margin = <span class="built_in">dict</span>(t=<span class="number">10</span>, l=<span class="number">10</span>, r=<span class="number">10</span>, b=<span class="number">10</span>),colorway=(<span class="string">&quot;#F2798F&quot;</span>,<span class="string">&quot;#88BFBA&quot;</span>,<span class="string">&quot;#CDD9A3&quot;</span>,<span class="string">&#x27;#F28705&#x27;</span>,<span class="string">&#x27;#D9946C&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;&lt;b&gt;         Degree&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">25</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">100</span>, l=<span class="number">100</span>, r=<span class="number">50</span>, b=<span class="number">100</span>),</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">700</span>)</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Name&lt;/b&gt;: %&#123;id&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Count&lt;/b&gt;: %&#123;value&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Parent&lt;/b&gt;: %&#123;parent&#125;&#x27;</span>) </span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.2</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h3> Plus we could see the advantages of Plotly in this graph. 
</h3>

<p>Matplotlib draws a static graph, but Plotly can dynamically click and move, and it supports zooming out, zooming in, and downloading graphs.</p>
<p>Because all of our graphs are made of plotly, the viewer can represent or remove items in the graph if desired.<br>   <strong>With a click</strong></p>
<h2> East Asia Degree Ratio: Bar plot</h2>

<p>40% of master’s degrees or higher, and respondents have a high educational background.</p>
<ul>
<li>China and Japan have similar trends to East Asia and the World. <br><br>  The number of people itself is large, so a representative trend seems to appear here. <br><br>  However, it is noteworthy that the two countries have the same tendency. <br></li>
</ul>
<ul>
<li><p>Korea: It is the only country among the four countries with a high degree of education below Ph.D., bachelor’s degree, and junior college. Only masters are low.<br>  (Polarization of education?)</p>
</li>
<li><p>Taiwan: 1st place in master’s ratio (55%), 2nd place in Ph.D. or higher (13.8%).<br>  = The highest level of education.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line">df21Edu_Ea = df21_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q4&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q4&#x27;</span>:<span class="string">&#x27;Dgree&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">df21Edu_Ea =(df21Edu_Ea.replace(&#123;<span class="string">&#x27;I prefer not to answer&#x27;</span>:<span class="string">&#x27;etc&#x27;</span>&#125;).replace([<span class="string">&#x27;No formal education past high school&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">             .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Professional doctorate&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>))</span><br><span class="line"></span><br><span class="line">df21Edu_Ea= (df21Edu_Ea</span><br><span class="line">           .groupby([<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Dgree&#x27;</span>])</span><br><span class="line">           .size()</span><br><span class="line">           .reset_index()</span><br><span class="line">           .rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 연령-지역 %</span></span><br><span class="line">dfKo_Edu21= df21Edu_Ea[df21Edu_Ea[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&#x27;South Korea&#x27;</span>]</span><br><span class="line">dfKo_Edu21[<span class="string">&#x27;%&#x27;</span>]=((dfKo_Edu21[<span class="string">&#x27;Count&#x27;</span>] / dfKo_Edu21[<span class="string">&#x27;Count&#x27;</span>].<span class="built_in">sum</span>()*<span class="number">100</span>)).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line">dfKo_Edu21=dfKo_Edu21.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">dfTw_Edu21= df21Edu_Ea[df21Edu_Ea[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&#x27;Taiwan&#x27;</span>]</span><br><span class="line">dfTw_Edu21[<span class="string">&#x27;%&#x27;</span>]=((dfTw_Edu21[<span class="string">&#x27;Count&#x27;</span>] / dfTw_Edu21[<span class="string">&#x27;Count&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line">dfTw_Edu21=dfTw_Edu21.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">dfCh_Edu21= df21Edu_Ea[df21Edu_Ea[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&#x27;China&#x27;</span>]</span><br><span class="line">dfCh_Edu21[<span class="string">&#x27;%&#x27;</span>]=((dfCh_Edu21[<span class="string">&#x27;Count&#x27;</span>] / dfCh_Edu21[<span class="string">&#x27;Count&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line">dfCh_Edu21=dfCh_Edu21.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">dfJp_Edu21= df21Edu_Ea[df21Edu_Ea[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&#x27;Japan&#x27;</span>]</span><br><span class="line">dfJp_Edu21[<span class="string">&#x27;%&#x27;</span>]=((dfJp_Edu21[<span class="string">&#x27;Count&#x27;</span>] / dfJp_Edu21[<span class="string">&#x27;Count&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line">dfJp_Edu21=dfJp_Edu21.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># #data 완성</span></span><br><span class="line"><span class="comment"># dfEdu_21_per = pd.concat([dfKo_Edu21, dfTw_Edu21, dfCh_Edu21, dfJp_Edu21], ignore_index = True)</span></span><br><span class="line"><span class="comment"># dfEdu_21_per= pd.pivot(dfEdu_21_per, index = &quot;Dgree&quot;, columns = &#x27;East_Asia&#x27;, values = &quot;%&quot;).reset_index()</span></span><br><span class="line"><span class="comment"># dfEdu_21_per</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line">fig = make_subplots(rows = <span class="number">1</span>, cols = <span class="number">4</span>, </span><br><span class="line">                    shared_yaxes=<span class="literal">True</span>, </span><br><span class="line">                    vertical_spacing = <span class="number">0.05</span>)</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfCh_Edu21[<span class="string">&#x27;Dgree&#x27;</span>], </span><br><span class="line">                     y = dfCh_Edu21[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     text = dfCh_Edu21[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;outside&#x27;</span>,</span><br><span class="line">                     name=<span class="string">&#x27;China&#x27;</span>,</span><br><span class="line">                     marker_color=<span class="string">&#x27;#88BFBA&#x27;</span>), </span><br><span class="line">                     row = <span class="number">1</span>, col = <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfJp_Edu21[<span class="string">&#x27;Dgree&#x27;</span>], </span><br><span class="line">                     y = dfJp_Edu21[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     text = dfJp_Edu21[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;outside&#x27;</span>,</span><br><span class="line">                     name=<span class="string">&#x27;Japan&#x27;</span>,</span><br><span class="line">                     marker_color=<span class="string">&#x27;#CDD9A3&#x27;</span>), </span><br><span class="line">                      row = <span class="number">1</span>, col = <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfKo_Edu21[<span class="string">&#x27;Dgree&#x27;</span>], </span><br><span class="line">                     y = dfKo_Edu21[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     text = dfKo_Edu21[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;outside&#x27;</span>,</span><br><span class="line">                     name=<span class="string">&#x27;South Korea&#x27;</span>,</span><br><span class="line">                     marker_color=<span class="string">&#x27;#F28705&#x27;</span>), </span><br><span class="line">                      row = <span class="number">1</span>, col = <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfTw_Edu21[<span class="string">&#x27;Dgree&#x27;</span>], </span><br><span class="line">                     y = dfTw_Edu21[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     text = dfTw_Edu21[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;outside&#x27;</span>,</span><br><span class="line">                     name=<span class="string">&#x27;Taiwan&#x27;</span>,</span><br><span class="line">                     marker_color=<span class="string">&#x27;#D9946C&#x27;</span>), </span><br><span class="line">                     row = <span class="number">1</span>, col = <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">fig.update_layout(showlegend=<span class="literal">True</span>,title=<span class="string">&#x27;&lt;b&gt;Degree in East Asia&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">22</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">200</span>, l=<span class="number">100</span>, r=<span class="number">50</span>, b=<span class="number">200</span>),</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">700</span>)</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;y&#125;%&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Degree&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_layout(legend=<span class="built_in">dict</span>(</span><br><span class="line">    orientation=<span class="string">&quot;h&quot;</span>,</span><br><span class="line">    yanchor=<span class="string">&quot;bottom&quot;</span>,</span><br><span class="line">    y=<span class="number">1.1</span>,</span><br><span class="line">    xanchor=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    x=<span class="number">1</span>))</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.5</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h1 id="3-1-6-Experience-transformation"><a href="#3-1-6-Experience-transformation" class="headerlink" title="3.1.6 Experience transformation"></a>3.1.6 Experience transformation</h1><hr>
<h2> Trends in World & East Asia Career: Stacked Scatter plot </h2>
- < 2 years: 50% of the total. <br>
- 3-5 years: Decrease in the world, maintain East Asia ratio <br>
- 2021 'etc data' disappeared. <br>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Exp data 전처리</span></span><br><span class="line"><span class="comment"># Exp 뽑아오기</span></span><br><span class="line">Exp21_Wo = df21.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q6&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q6&#x27;</span>:<span class="string">&#x27;Exp&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Exp20_Wo = df20.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q6&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q6&#x27;</span>:<span class="string">&#x27;Exp&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Exp19_Wo = df19.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q15&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q15&#x27;</span>:<span class="string">&#x27;Exp&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Exp18_Wo = df18.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q8&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q8&#x27;</span>:<span class="string">&#x27;Exp&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Exp17_Wo = df17.loc[:,[<span class="string">&#x27;Country&#x27;</span>,<span class="string">&#x27;Tenure&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Country&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Tenure&#x27;</span>:<span class="string">&#x27;Exp&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Exp21_Wo= Exp21_Wo.replace(&#123;<span class="string">&#x27;I have never written code&#x27;</span>: <span class="string">&#x27;&lt; 1 years&#x27;</span>,  <span class="string">&#x27;1-3 years&#x27;</span>: <span class="string">&#x27;1-2 years&#x27;</span>&#125;).replace([<span class="string">&#x27;10-20 years&#x27;</span>, <span class="string">&#x27;20+ years&#x27;</span>], <span class="string">&#x27;10+ years&#x27;</span> )</span><br><span class="line">Exp20_Wo= Exp20_Wo.replace(&#123;<span class="string">&#x27;I have never written code&#x27;</span>: <span class="string">&#x27;&lt; 1 years&#x27;</span>&#125;).replace([<span class="string">&#x27;10-20 years&#x27;</span>, <span class="string">&#x27;20+ years&#x27;</span>], <span class="string">&#x27;10+ years&#x27;</span> )</span><br><span class="line">Exp19_Wo= Exp19_Wo.replace(&#123;<span class="string">&#x27;I have never written code&#x27;</span>: <span class="string">&#x27;&lt; 1 years&#x27;</span>&#125;).replace([<span class="string">&#x27;10-20 years&#x27;</span>, <span class="string">&#x27;20+ years&#x27;</span>], <span class="string">&#x27;10+ years&#x27;</span> )</span><br><span class="line">Exp18_Wo= (Exp18_Wo.replace(&#123;<span class="string">&#x27;0-1&#x27;</span>: <span class="string">&#x27;&lt; 1 years&#x27;</span>, <span class="string">&#x27;1-2&#x27;</span>: <span class="string">&#x27;1-2 years&#x27;</span>, <span class="string">&#x27;5-10&#x27;</span>:<span class="string">&#x27;5-10 years&#x27;</span>&#125;)</span><br><span class="line">        .replace([<span class="string">&#x27;2-3&#x27;</span>, <span class="string">&#x27;3-4&#x27;</span>,  <span class="string">&#x27;4-5&#x27;</span>],<span class="string">&#x27;3-5 years&#x27;</span>)</span><br><span class="line">       .replace([<span class="string">&#x27;10-15&#x27;</span>, <span class="string">&#x27;15-20&#x27;</span>,<span class="string">&#x27;20-25&#x27;</span>, <span class="string">&#x27;30 +&#x27;</span>,<span class="string">&#x27;25-30&#x27;</span>],<span class="string">&#x27;10+ years&#x27;</span>))</span><br><span class="line">Exp17_Wo=(Exp17_Wo.replace(&#123;<span class="string">&#x27;More than 10 years&#x27;</span>:<span class="string">&#x27;10+ years&#x27;</span>, <span class="string">&#x27;1 to 2 years&#x27;</span>:<span class="string">&#x27;1-2 years&#x27;</span>,  <span class="string">&#x27;Less than a year&#x27;</span>:<span class="string">&#x27;&lt; 1 years&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;3 to 5 years&#x27;</span>:<span class="string">&#x27;3-5 years&#x27;</span>, <span class="string">&quot;I don&#x27;t write code to analyze data&quot;</span>:<span class="string">&#x27;&lt; 1 years&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;6 to 10 years&#x27;</span>:<span class="string">&#x27;5-10 years&#x27;</span>&#125;))</span><br><span class="line">                                                                                                                   </span><br><span class="line"><span class="comment">#data 정제(한꺼번에 이름바꾸기)</span></span><br><span class="line">Exp5y_Wo= pd.concat([Exp17_Wo, Exp18_Wo, Exp19_Wo, Exp20_Wo, Exp21_Wo]).reset_index()</span><br><span class="line">Exp5y_Wo=(Exp5y_Wo.groupby([<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;Exp&#x27;</span>])</span><br><span class="line">           .size()</span><br><span class="line">           .reset_index()</span><br><span class="line">           .rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">#percent data 넣기</span></span><br><span class="line">Exp21_per_W= Exp5y_Wo[Exp5y_Wo[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2021&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Exp21_per_W[<span class="string">&#x27;percentage&#x27;</span>] = Exp21_per_W[<span class="string">&quot;Count&quot;</span>] / Exp21_per_W[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Exp21_per_W[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Exp21_per_W[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">Exp20_per_W = Exp5y_Wo[Exp5y_Wo[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2020&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Exp20_per_W[<span class="string">&#x27;percentage&#x27;</span>] = Exp20_per_W[<span class="string">&quot;Count&quot;</span>] / Exp20_per_W[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Exp20_per_W[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Exp20_per_W[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">Exp19_per_W = Exp5y_Wo[Exp5y_Wo[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2019&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Exp19_per_W[<span class="string">&#x27;percentage&#x27;</span>] = Exp19_per_W[<span class="string">&quot;Count&quot;</span>] / Exp19_per_W[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Exp19_per_W[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Exp19_per_W[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">Exp18_per_W = Exp5y_Wo[Exp5y_Wo[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2018&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Exp18_per_W[<span class="string">&#x27;percentage&#x27;</span>] = Exp18_per_W[<span class="string">&quot;Count&quot;</span>] / Exp18_per_W[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Exp18_per_W[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Exp18_per_W[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">Exp17_per_W = Exp5y_Wo[Exp5y_Wo[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2017&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Exp17_per_W[<span class="string">&#x27;percentage&#x27;</span>] = Exp17_per_W[<span class="string">&quot;Count&quot;</span>] / Exp17_per_W[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Exp17_per_W[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Exp17_per_W[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#data 완성</span></span><br><span class="line">Exp5y_per_W = pd.concat([Exp17_per_W, Exp18_per_W, Exp19_per_W, Exp20_per_W, Exp21_per_W], ignore_index = <span class="literal">True</span>)</span><br><span class="line">Exp5y_per_W= pd.pivot(Exp5y_per_W, index = <span class="string">&quot;year&quot;</span>, columns = <span class="string">&#x27;Exp&#x27;</span>, values = <span class="string">&quot;%&quot;</span>).reset_index()</span><br><span class="line">Exp5y_per_W.fillna(<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">Exp5y_percent_order = Exp5y_per_W[<span class="string">&#x27;year&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Exp5y_percent_order, </span><br><span class="line">    y = Exp5y_per_W[<span class="string">&#x27;&lt; 1 years&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;&lt; 1 years&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">0.5</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#F2798F&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Exp5y_percent_order, </span><br><span class="line">    y = Exp5y_per_W[<span class="string">&#x27;1-2 years&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;1-2 years&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">0.5</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#88BFBA&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Exp5y_percent_order, </span><br><span class="line">    y = Exp5y_per_W[<span class="string">&#x27;3-5 years&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;3-5 years&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">0.5</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#CDD9A3&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Exp5y_percent_order, </span><br><span class="line">    y = Exp5y_per_W[<span class="string">&#x27;5-10 years&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;5-10 years&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">0.5</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#F28705&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Exp5y_percent_order, </span><br><span class="line">    y = Exp5y_per_W[<span class="string">&#x27;10+ years&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;10+ years&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">0.5</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#D9946C&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Exp5y_percent_order, </span><br><span class="line">    y = Exp5y_per_W[<span class="string">&#x27;etc&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;etc&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#F2D64B&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;y&#125;%&lt;br&gt;&#x27;</span>)</span><br><span class="line">fig.update_layout(yaxis_range = (<span class="number">0</span>, <span class="number">100</span>), title_font_size=<span class="number">20</span>,</span><br><span class="line">                  title_text=<span class="string">&quot;&lt;b&gt;Experience in world&lt;/b&gt;&quot;</span>,</span><br><span class="line">                  height=<span class="number">500</span>, width=<span class="number">700</span>,</span><br><span class="line">                  title_x=<span class="number">0.5</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.2</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line">Exp21 = df21_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q6&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q6&#x27;</span>:<span class="string">&#x27;Exp&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Exp20 = df20_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q6&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q6&#x27;</span>:<span class="string">&#x27;Exp&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Exp19 = df19_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q15&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q15&#x27;</span>:<span class="string">&#x27;Exp&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Exp18 = df18_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q8&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q8&#x27;</span>:<span class="string">&#x27;Exp&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Exp17 = df17_Ea.loc[:,[<span class="string">&#x27;Country&#x27;</span>,<span class="string">&#x27;Tenure&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Country&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Tenure&#x27;</span>:<span class="string">&#x27;Exp&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Exp21Uni=[<span class="string">&#x27;3-5 years&#x27;</span>, <span class="string">&#x27;&lt; 1 years&#x27;</span>, <span class="string">&#x27;1-3 years&#x27;</span>, <span class="string">&#x27;10-20 years&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;I have never written code&#x27;</span>, <span class="string">&#x27;5-10 years&#x27;</span>, <span class="string">&#x27;20+ years&#x27;</span>]</span><br><span class="line">Exp20Uni= [<span class="string">&#x27;3-5 years&#x27;</span>, <span class="string">&#x27;&lt; 1 years&#x27;</span>, <span class="string">&#x27;5-10 years&#x27;</span>, <span class="string">&#x27;1-2 years&#x27;</span>, <span class="string">&#x27;etc&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;20+ years&#x27;</span>, <span class="string">&#x27;10-20 years&#x27;</span>, <span class="string">&#x27;I have never written code&#x27;</span>]</span><br><span class="line">Exp19Uni=[<span class="string">&#x27;1-2 years&#x27;</span>, <span class="string">&#x27;5-10 years&#x27;</span>, <span class="string">&#x27;&lt; 1 years&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;I have never written code&#x27;</span>, <span class="string">&#x27;3-5 years&#x27;</span>, <span class="string">&#x27;10-20 years&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;20+ years&#x27;</span>, <span class="string">&#x27;etc&#x27;</span>]</span><br><span class="line">Exp18Uni=[<span class="string">&#x27;0-1&#x27;</span>, <span class="string">&#x27;2-3&#x27;</span>, <span class="string">&#x27;1-2&#x27;</span>, <span class="string">&#x27;5-10&#x27;</span>, <span class="string">&#x27;3-4&#x27;</span>, <span class="string">&#x27;10-15&#x27;</span>, <span class="string">&#x27;15-20&#x27;</span>, <span class="string">&#x27;4-5&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;20-25&#x27;</span>, <span class="string">&#x27;30 +&#x27;</span>, <span class="string">&#x27;etc&#x27;</span>, <span class="string">&#x27;25-30&#x27;</span>]</span><br><span class="line">Exp17Uni=[<span class="string">&#x27;More than 10 years&#x27;</span>, <span class="string">&#x27;1 to 2 years&#x27;</span>, <span class="string">&#x27;etc&#x27;</span>, <span class="string">&#x27;Less than a year&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;3 to 5 years&#x27;</span>, <span class="string">&quot;I don&#x27;t write code to analyze data&quot;</span>,</span><br><span class="line">       <span class="string">&#x27;6 to 10 years&#x27;</span>]</span><br><span class="line"></span><br><span class="line">Exp21= Exp21.replace(&#123;<span class="string">&#x27;I have never written code&#x27;</span>: <span class="string">&#x27;&lt; 1 years&#x27;</span>,  <span class="string">&#x27;1-3 years&#x27;</span>: <span class="string">&#x27;1-2 years&#x27;</span>&#125;).replace([<span class="string">&#x27;10-20 years&#x27;</span>, <span class="string">&#x27;20+ years&#x27;</span>], <span class="string">&#x27;10+ years&#x27;</span> )</span><br><span class="line">Exp20= Exp20.replace(&#123;<span class="string">&#x27;I have never written code&#x27;</span>: <span class="string">&#x27;&lt; 1 years&#x27;</span>&#125;).replace([<span class="string">&#x27;10-20 years&#x27;</span>, <span class="string">&#x27;20+ years&#x27;</span>], <span class="string">&#x27;10+ years&#x27;</span> )</span><br><span class="line">Exp19= Exp19.replace(&#123;<span class="string">&#x27;I have never written code&#x27;</span>: <span class="string">&#x27;&lt; 1 years&#x27;</span>&#125;).replace([<span class="string">&#x27;10-20 years&#x27;</span>, <span class="string">&#x27;20+ years&#x27;</span>], <span class="string">&#x27;10+ years&#x27;</span> )</span><br><span class="line">Exp18= (Exp18.replace(&#123;<span class="string">&#x27;0-1&#x27;</span>: <span class="string">&#x27;&lt; 1 years&#x27;</span>, <span class="string">&#x27;1-2&#x27;</span>: <span class="string">&#x27;1-2 years&#x27;</span>, <span class="string">&#x27;5-10&#x27;</span>:<span class="string">&#x27;5-10 years&#x27;</span>&#125;)</span><br><span class="line">        .replace([<span class="string">&#x27;2-3&#x27;</span>, <span class="string">&#x27;3-4&#x27;</span>,  <span class="string">&#x27;4-5&#x27;</span>],<span class="string">&#x27;3-5 years&#x27;</span>)</span><br><span class="line">       .replace([<span class="string">&#x27;10-15&#x27;</span>, <span class="string">&#x27;15-20&#x27;</span>,<span class="string">&#x27;20-25&#x27;</span>, <span class="string">&#x27;30 +&#x27;</span>,<span class="string">&#x27;25-30&#x27;</span>],<span class="string">&#x27;10+ years&#x27;</span>))</span><br><span class="line">Exp17=(Exp17.replace(&#123;<span class="string">&#x27;More than 10 years&#x27;</span>:<span class="string">&#x27;10+ years&#x27;</span>, <span class="string">&#x27;1 to 2 years&#x27;</span>:<span class="string">&#x27;1-2 years&#x27;</span>,  <span class="string">&#x27;Less than a year&#x27;</span>:<span class="string">&#x27;&lt; 1 years&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;3 to 5 years&#x27;</span>:<span class="string">&#x27;3-5 years&#x27;</span>, <span class="string">&quot;I don&#x27;t write code to analyze data&quot;</span>:<span class="string">&#x27;&lt; 1 years&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;6 to 10 years&#x27;</span>:<span class="string">&#x27;5-10 years&#x27;</span>&#125;))</span><br><span class="line">                                                                                                                </span><br><span class="line">Exp5y= pd.concat([Exp17, Exp18, Exp19, Exp20, Exp21]).reset_index()</span><br><span class="line">Exp5y=(Exp5y.groupby([<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;Exp&#x27;</span>])</span><br><span class="line">           .size()</span><br><span class="line">           .reset_index()</span><br><span class="line">           .rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;))</span><br><span class="line"></span><br><span class="line">Exp21_percent = Exp5y[Exp5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2021&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Exp21_percent[<span class="string">&#x27;percentage&#x27;</span>] = Exp21_percent[<span class="string">&quot;Count&quot;</span>] / Exp21_percent[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Exp21_percent[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Exp21_percent[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">Exp21_percent</span><br><span class="line"></span><br><span class="line">Exp20_percent = Exp5y[Exp5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2020&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Exp20_percent[<span class="string">&#x27;percentage&#x27;</span>] = Exp20_percent[<span class="string">&quot;Count&quot;</span>] / Exp20_percent[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Exp20_percent[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Exp20_percent[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">Exp20_percent</span><br><span class="line"></span><br><span class="line">Exp19_percent = Exp5y[Exp5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2019&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Exp19_percent[<span class="string">&#x27;percentage&#x27;</span>] = Exp19_percent[<span class="string">&quot;Count&quot;</span>] / Exp19_percent[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Exp19_percent[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Exp19_percent[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">Exp19_percent</span><br><span class="line"></span><br><span class="line">Exp18_percent = Exp5y[Exp5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2018&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Exp18_percent[<span class="string">&#x27;percentage&#x27;</span>] = Exp18_percent[<span class="string">&quot;Count&quot;</span>] / Exp18_percent[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Exp18_percent[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Exp18_percent[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">Exp18_percent</span><br><span class="line"></span><br><span class="line">Exp17_percent = Exp5y[Exp5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2017&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Exp17_percent[<span class="string">&#x27;percentage&#x27;</span>] = Exp17_percent[<span class="string">&quot;Count&quot;</span>] / Exp17_percent[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Exp17_percent[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Exp17_percent[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">Exp17_percent</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line">Exp5y_percent = pd.concat([Exp17_percent, Exp18_percent, Exp19_percent, Exp20_percent, Exp21_percent], ignore_index = <span class="literal">True</span>)</span><br><span class="line">Exp5y_percent= pd.pivot(Exp5y_percent, index = <span class="string">&quot;year&quot;</span>, columns = <span class="string">&#x27;Exp&#x27;</span>, values = <span class="string">&quot;%&quot;</span>).reset_index()</span><br><span class="line">Exp5y_percent.fillna(<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Exp5y_percent_order = Exp5y_percent[<span class="string">&#x27;year&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Exp5y_percent_order, </span><br><span class="line">    y = Exp5y_percent[<span class="string">&#x27;&lt; 1 years&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;&lt; 1 years&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">0.5</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#F2798F&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Exp5y_percent_order, </span><br><span class="line">    y = Exp5y_percent[<span class="string">&#x27;1-2 years&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;1-2 years&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">0.5</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#88BFBA&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Exp5y_percent_order, </span><br><span class="line">    y = Exp5y_percent[<span class="string">&#x27;3-5 years&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;3-5 years&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">0.5</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#CDD9A3&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Exp5y_percent_order, </span><br><span class="line">    y = Exp5y_percent[<span class="string">&#x27;5-10 years&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;5-10 years&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">0.5</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#F28705&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Exp5y_percent_order, </span><br><span class="line">    y = Exp5y_percent[<span class="string">&#x27;10+ years&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;10+ years&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">0.5</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#D9946C&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Exp5y_percent_order, </span><br><span class="line">    y = Exp5y_percent[<span class="string">&#x27;etc&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;etc&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">0.5</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span>,</span><br><span class="line">    marker_color=<span class="string">&#x27;#F2D64B&#x27;</span>))</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;y&#125;%&lt;br&gt;&#x27;</span>)</span><br><span class="line">fig.update_layout(yaxis_range = (<span class="number">0</span>, <span class="number">100</span>),</span><br><span class="line">                  title_text=<span class="string">&quot;&lt;b&gt;Experience in East Asia&lt;/b&gt;&quot;</span>,</span><br><span class="line">                  height=<span class="number">500</span>, width=<span class="number">700</span>, title_font_size=<span class="number">20</span>,</span><br><span class="line">                  title_x=<span class="number">0.5</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.2</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h1 id="3-1-7-Salary-transformation"><a href="#3-1-7-Salary-transformation" class="headerlink" title="3.1.7 Salary transformation"></a>3.1.7 Salary transformation</h1><hr>
<h2> World & East Asia Annual salary: Bar-H plot
</h2>

<ul>
<li>$ 200,000 ~ : World (2.9%) is more than 50% compared to East Asia (1.3%)</li>
<li>$ ~250,000 : World (59.2%) is less than East Asia (50.3%) <br><br>  = East Asia’s annual salary gap between rich and poor is less.</li>
<li>$ 25,000~60,000: The highest section in East Asia at 24%. <br><br>= The annual salary section that we aim for.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line">df21_salary_=df21[<span class="string">&#x27;Q25&#x27;</span>].value_counts().to_frame().rename(index=&#123;<span class="string">&#x27;$0-999&#x27;</span>:<span class="string">&#x27;&lt;999&#x27;</span>,<span class="string">&#x27;&gt;$1,000,000&#x27;</span>:<span class="string">&#x27;1,000,000~&#x27;</span>,<span class="string">&#x27;$500,000-999,999&#x27;</span>:<span class="string">&#x27;500,000-999,999&#x27;</span>&#125;).fillna(<span class="number">0</span>)</span><br><span class="line">df21_Ea_salary_=df21_Ea[<span class="string">&#x27;Q25&#x27;</span>].value_counts().to_frame().rename(index=&#123;<span class="string">&#x27;$0-999&#x27;</span>:<span class="string">&#x27;&lt;999&#x27;</span>,<span class="string">&#x27;&gt;$1,000,000&#x27;</span>:<span class="string">&#x27;1,000,000~&#x27;</span>,<span class="string">&#x27;$500,000-999,999&#x27;</span>:<span class="string">&#x27;500,000-999,999&#x27;</span>&#125;).fillna(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#퍼센트</span></span><br><span class="line">df21_salary__=(df21_salary_[<span class="string">&#x27;Q25&#x27;</span>]/(df21_salary_[<span class="string">&#x27;Q25&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">1</span>).to_frame().rename(columns=&#123;<span class="string">&#x27;Q25&#x27;</span>:<span class="string">&#x27;World&#x27;</span>&#125;)</span><br><span class="line">df21_Ea_salary__=(df21_Ea_salary_[<span class="string">&#x27;Q25&#x27;</span>]/(df21_Ea_salary_[<span class="string">&#x27;Q25&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">1</span>).to_frame().rename(columns=&#123;<span class="string">&#x27;Q25&#x27;</span>:<span class="string">&#x27;EA&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">#그룹화</span></span><br><span class="line">df21_salary=(df21_salary__.rename(index=</span><br><span class="line">                               &#123;<span class="string">&#x27;1,000-1,999&#x27;</span>:<span class="string">&#x27;1,000-7,499&#x27;</span>,</span><br><span class="line">                                <span class="string">&#x27;2,000-2,999&#x27;</span>:<span class="string">&#x27;1,000-7,499&#x27;</span>,</span><br><span class="line">                                <span class="string">&#x27;3,000-3,999&#x27;</span>:<span class="string">&#x27;1,000-7,499&#x27;</span>,</span><br><span class="line">                                <span class="string">&#x27;4,000-4,999&#x27;</span>:<span class="string">&#x27;1,000-7,499&#x27;</span>,</span><br><span class="line">                                <span class="string">&#x27;5,000-7,499&#x27;</span>:<span class="string">&#x27;1,000-7,499&#x27;</span>&#125;)</span><br><span class="line">                                .rename(index=&#123;<span class="string">&#x27;7,500-9,999&#x27;</span>:<span class="string">&#x27;7,500-24,999&#x27;</span>,</span><br><span class="line">                                <span class="string">&#x27;10,000-14,999&#x27;</span>:<span class="string">&#x27;7,500-24,999&#x27;</span>,</span><br><span class="line">                                <span class="string">&#x27;15,000-19,999&#x27;</span>:<span class="string">&#x27;7,500-24,999&#x27;</span>,</span><br><span class="line">                                <span class="string">&#x27;20,000-24,999&#x27;</span>:<span class="string">&#x27;7,500-24,999&#x27;</span> &#125;)</span><br><span class="line">                                .rename(index=&#123;<span class="string">&#x27;25,000-29,999&#x27;</span>:<span class="string">&#x27;25,000-59,999&#x27;</span>,</span><br><span class="line">                                 <span class="string">&#x27;30,000-39,999&#x27;</span>:<span class="string">&#x27;25,000-59,999&#x27;</span>,</span><br><span class="line">                                 <span class="string">&#x27;40,000-49,999&#x27;</span>:<span class="string">&#x27;25,000-59,999&#x27;</span>,</span><br><span class="line">                                 <span class="string">&#x27;50,000-59,999&#x27;</span>:<span class="string">&#x27;25,000-59,999&#x27;</span>&#125;)</span><br><span class="line">                                .rename(index=&#123;<span class="string">&#x27;60,000-69,999&#x27;</span>:<span class="string">&#x27;60,000-99,999&#x27;</span>,</span><br><span class="line">                                 <span class="string">&#x27;70,000-79,999&#x27;</span>:<span class="string">&#x27;60,000-99,999&#x27;</span>,</span><br><span class="line">                                 <span class="string">&#x27;80,000-89,999&#x27;</span>:<span class="string">&#x27;60,000-99,999&#x27;</span>,</span><br><span class="line">                                 <span class="string">&#x27;90,000-99,999&#x27;</span>:<span class="string">&#x27;60,000-99,999&#x27;</span>&#125;)</span><br><span class="line">                                .rename(index=&#123;<span class="string">&#x27;100,000-124,999&#x27;</span>:<span class="string">&#x27;100,000-199,999&#x27;</span>,</span><br><span class="line">                                 <span class="string">&#x27;125,000-149,999&#x27;</span>:<span class="string">&#x27;100,000-199,999&#x27;</span>,</span><br><span class="line">                                 <span class="string">&#x27;150,000-199,999&#x27;</span>:<span class="string">&#x27;100,000-199,999&#x27;</span>&#125;)</span><br><span class="line">                                .rename(index=&#123;<span class="string">&#x27;200,000-249,999&#x27;</span>:<span class="string">&#x27;200,000-1,000,000~&#x27;</span>,</span><br><span class="line">                                 <span class="string">&#x27;250,000-299,999&#x27;</span>:<span class="string">&#x27;200,000-1,000,000~&#x27;</span>,</span><br><span class="line">                                 <span class="string">&#x27;300,000-499,999&#x27;</span>:<span class="string">&#x27;200,000-1,000,000~&#x27;</span>,</span><br><span class="line">                                 <span class="string">&#x27;500,000-999,999&#x27;</span>:<span class="string">&#x27;200,000-1,000,000~&#x27;</span>,</span><br><span class="line">                                 <span class="string">&#x27;1,000,000~&#x27;</span>:<span class="string">&#x27;200,000-1,000,000~&#x27;</span>&#125;)</span><br><span class="line">                                .reset_index().groupby(<span class="string">&#x27;index&#x27;</span>).<span class="built_in">sum</span>()</span><br><span class="line">                                 .reindex(index = [<span class="string">&#x27;&lt;999&#x27;</span>, </span><br><span class="line">                                                  <span class="string">&#x27;1,000-7,499&#x27;</span>,</span><br><span class="line">                                                  <span class="string">&#x27;7,500-24,999&#x27;</span>, </span><br><span class="line">                                                  <span class="string">&#x27;25,000-59,999&#x27;</span>, </span><br><span class="line">                                                  <span class="string">&#x27;60,000-99,999&#x27;</span>, </span><br><span class="line">                                                 <span class="string">&#x27;100,000-199,999&#x27;</span>, </span><br><span class="line">                                                 <span class="string">&#x27;200,000-1,000,000~&#x27;</span>]))</span><br><span class="line"></span><br><span class="line">df21_Ea_salary=(df21_Ea_salary__.rename(index=</span><br><span class="line">                               &#123;<span class="string">&#x27;1,000-1,999&#x27;</span>:<span class="string">&#x27;1,000-7,499&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;2,000-2,999&#x27;</span>:<span class="string">&#x27;1,000-7,499&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;3,000-3,999&#x27;</span>:<span class="string">&#x27;1,000-7,499&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;4,000-4,999&#x27;</span>:<span class="string">&#x27;1,000-7,499&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;5,000-7,499&#x27;</span>:<span class="string">&#x27;1,000-7,499&#x27;</span>&#125;)</span><br><span class="line">                                .rename(index=&#123;<span class="string">&#x27;7,500-9,999&#x27;</span>:<span class="string">&#x27;7,500-24,999&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;10,000-14,999&#x27;</span>:<span class="string">&#x27;7,500-24,999&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;15,000-19,999&#x27;</span>:<span class="string">&#x27;7,500-24,999&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;20,000-24,999&#x27;</span>:<span class="string">&#x27;7,500-24,999&#x27;</span>&#125;)</span><br><span class="line">                                .rename(index=&#123;<span class="string">&#x27;25,000-29,999&#x27;</span>:<span class="string">&#x27;25,000-59,999&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;30,000-39,999&#x27;</span>:<span class="string">&#x27;25,000-59,999&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;40,000-49,999&#x27;</span>:<span class="string">&#x27;25,000-59,999&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;50,000-59,999&#x27;</span>:<span class="string">&#x27;25,000-59,999&#x27;</span>&#125;)</span><br><span class="line">                                .rename(index=&#123;<span class="string">&#x27;60,000-69,999&#x27;</span>:<span class="string">&#x27;60,000-99,999&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;70,000-79,999&#x27;</span>:<span class="string">&#x27;60,000-99,999&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;80,000-89,999&#x27;</span>:<span class="string">&#x27;60,000-99,999&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;90,000-99,999&#x27;</span>:<span class="string">&#x27;60,000-99,999&#x27;</span>&#125;)</span><br><span class="line">                                .rename(index=&#123;<span class="string">&#x27;100,000-124,999&#x27;</span>:<span class="string">&#x27;100,000-199,999&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;125,000-149,999&#x27;</span>:<span class="string">&#x27;100,000-199,999&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;150,000-199,999&#x27;</span>:<span class="string">&#x27;100,000-199,999&#x27;</span>&#125;)</span><br><span class="line">                                .rename(index=&#123;<span class="string">&#x27;200,000-249,999&#x27;</span>:<span class="string">&#x27;200,000-1,000,000~&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;250,000-299,999&#x27;</span>:<span class="string">&#x27;200,000-1,000,000~&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;300,000-499,999	&#x27;</span>:<span class="string">&#x27;200,000-1,000,000~&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;500,000-999,999&#x27;</span>:<span class="string">&#x27;200,000-1,000,000~&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;1,000,000~&#x27;</span>:<span class="string">&#x27;200,000-1,000,000~&#x27;</span>&#125;)</span><br><span class="line">                                .reset_index().groupby(<span class="string">&#x27;index&#x27;</span>).<span class="built_in">sum</span>()</span><br><span class="line">                                .reindex(index = [<span class="string">&#x27;&lt;999&#x27;</span>, </span><br><span class="line">                                                  <span class="string">&#x27;1,000-7,499&#x27;</span>,</span><br><span class="line">                                                  <span class="string">&#x27;7,500-24,999&#x27;</span>, </span><br><span class="line">                                                  <span class="string">&#x27;25,000-59,999&#x27;</span>, </span><br><span class="line">                                                  <span class="string">&#x27;60,000-99,999&#x27;</span>, </span><br><span class="line">                                                 <span class="string">&#x27;100,000-199,999&#x27;</span>, </span><br><span class="line">                                                 <span class="string">&#x27;200,000-1,000,000~&#x27;</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line">World = df21_salary[<span class="string">&#x27;World&#x27;</span>].values</span><br><span class="line">East_Asia = df21_Ea_salary[<span class="string">&#x27;EA&#x27;</span>].values</span><br><span class="line">y = df21_salary.index</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[</span><br><span class="line">    go.Bar(y=y, x=World, orientation=<span class="string">&#x27;h&#x27;</span>, name=<span class="string">&quot;World&quot;</span>, base=<span class="number">0</span>, hovertemplate=<span class="string">&#x27;&lt;b&gt;World&lt;/b&gt;: %&#123;x&#125;%&lt;br&gt;&#x27;</span>, marker_color=<span class="string">&#x27;#979DA6&#x27;</span>),</span><br><span class="line">    go.Bar(y=y, x=-East_Asia, orientation=<span class="string">&#x27;h&#x27;</span>, name=<span class="string">&quot;East Asia&quot;</span>, base=<span class="number">0</span>, hovertemplate=<span class="string">&#x27;&lt;b&gt;East Asia&lt;/b&gt;: %&#123;x&#125;%&lt;br&gt;&#x27;</span>, marker_color=<span class="string">&#x27;#F2D64B&#x27;</span>)</span><br><span class="line">    ])</span><br><span class="line"></span><br><span class="line">fig.update_layout(barmode=<span class="string">&#x27;stack&#x27;</span>)</span><br><span class="line">fig.update_layout(</span><br><span class="line">    margin=<span class="built_in">dict</span>(l=<span class="number">200</span>, r=<span class="number">0</span>, t=<span class="number">200</span>, b=<span class="number">100</span>),</span><br><span class="line">    autosize=<span class="literal">False</span>,</span><br><span class="line">    title_text=<span class="string">&quot;&lt;b&gt;                       Salary in East Asia vs World&lt;/b&gt;&quot;</span>, height=<span class="number">600</span>, width=<span class="number">700</span>, title_font_size=<span class="number">20</span>, title_x=<span class="number">0.5</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_layout(legend=<span class="built_in">dict</span>(</span><br><span class="line">    orientation=<span class="string">&quot;h&quot;</span>,</span><br><span class="line">    yanchor=<span class="string">&quot;bottom&quot;</span>,</span><br><span class="line">    y=<span class="number">1.1</span>,</span><br><span class="line">    xanchor=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    x=<span class="number">1</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h2> World experience and annual salary: Heat Map </h2>

<h4>Relatively **positive correlation.** </h4>

<ul>
<li><p>Even with 5-10 years of experience, more than 45% has an annual salary of less than $20,000</p>
</li>
<li><p>With more than 10 years of experience, more than 30% receive an annual salary of $100,000.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line">SalExp21= df21.loc[:, [<span class="string">&#x27;region&#x27;</span>, <span class="string">&#x27;Q25&#x27;</span>, <span class="string">&#x27;Q6&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q6&#x27;</span>:<span class="string">&#x27;Exp&#x27;</span>, <span class="string">&#x27;Q25&#x27;</span>:<span class="string">&#x27;Salary&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SalExp21=(SalExp21</span><br><span class="line">          .replace([<span class="string">&#x27;0-999&#x27;</span>,<span class="string">&#x27;$0-999&#x27;</span>,<span class="string">&#x27;0&#x27;</span>], <span class="string">&#x27;&lt; 999&#x27;</span>)</span><br><span class="line">          .replace(&#123;<span class="string">&#x27;&gt;$1,000,000&#x27;</span>:<span class="string">&#x27;200,000~&#x27;</span>&#125;)</span><br><span class="line">          .replace([<span class="string">&#x27;1,000-1,999&#x27;</span>,<span class="string">&#x27;2,000-2,999&#x27;</span>,<span class="string">&#x27;3,000-3,999&#x27;</span>, </span><br><span class="line">        <span class="string">&#x27;4,000-4,999&#x27;</span>,<span class="string">&#x27;5,000-7,499&#x27;</span>,<span class="string">&#x27;7,500-9,999&#x27;</span>,<span class="string">&#x27;10,000-14,999&#x27;</span>, <span class="string">&#x27;15,000-19,999&#x27;</span>],<span class="string">&#x27;1,000-20,000&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;20,000-24,999&#x27;</span><span class="string">&#x27;25,000-29,999&#x27;</span>,<span class="string">&#x27;30,000-39,999&#x27;</span>, <span class="string">&#x27;40,000-49,999&#x27;</span>, </span><br><span class="line">        <span class="string">&#x27;50,000-59,999&#x27;</span>],<span class="string">&#x27;20,000-59,999&#x27;</span>) </span><br><span class="line">           .replace([<span class="string">&#x27;60,000-69,999&#x27;</span>, <span class="string">&#x27;70,000-79,999&#x27;</span>, <span class="string">&#x27;80,000-89,999&#x27;</span>, </span><br><span class="line">        <span class="string">&#x27;90,000-99,999&#x27;</span>], <span class="string">&#x27;60,000-99,999&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;100,000-124,999&#x27;</span>, <span class="string">&#x27;300,000-499,999&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;125,000-149,999&#x27;</span>, <span class="string">&#x27;125,000-149,999&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;150,000-199,999&#x27;</span>],<span class="string">&#x27;100,000-199,999&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;200,000-249,999&#x27;</span>, <span class="string">&#x27;250,000-299,999&#x27;</span>, </span><br><span class="line">        <span class="string">&#x27;1,000,000&#x27;</span>,<span class="string">&#x27;$500,000-999,999&#x27;</span>], <span class="string">&#x27;200,000~&#x27;</span>)</span><br><span class="line">        .replace(&#123;<span class="string">&#x27;I have never written code&#x27;</span>: <span class="string">&#x27;&lt; 1 years&#x27;</span>&#125;)</span><br><span class="line">          .replace([<span class="string">&#x27;10-20 years&#x27;</span>, <span class="string">&#x27;20+ years&#x27;</span>], <span class="string">&#x27;10+ years&#x27;</span> )</span><br><span class="line">         )</span><br><span class="line"></span><br><span class="line">sal_order=[<span class="string">&#x27;&lt; 999&#x27;</span>, <span class="string">&#x27;1,000-20,000&#x27;</span>, <span class="string">&#x27;20,000-59,999&#x27;</span>, <span class="string">&#x27;60,000-99,999&#x27;</span>,<span class="string">&#x27;100,000-199,999&#x27;</span>, <span class="string">&#x27;200,000~&#x27;</span>]</span><br><span class="line">Exp21_order=[<span class="string">&#x27;&lt; 1 years&#x27;</span>, <span class="string">&#x27;1-3 years&#x27;</span>,<span class="string">&#x27;3-5 years&#x27;</span>, <span class="string">&#x27;5-10 years&#x27;</span>, <span class="string">&#x27;10+ years&#x27;</span> ]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SalExp21_Ea = SalExp21[SalExp21[<span class="string">&#x27;region&#x27;</span>] == <span class="string">&quot;EastAsia&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">SalExp21_Ea=(SalExp21_Ea.groupby([<span class="string">&#x27;Exp&#x27;</span>, <span class="string">&#x27;Salary&#x27;</span>])</span><br><span class="line">           .size()</span><br><span class="line">          .unstack().fillna(<span class="number">0</span>).astype(<span class="string">&#x27;int64&#x27;</span>))</span><br><span class="line"></span><br><span class="line">SalExp21_Wo = SalExp21[SalExp21[<span class="string">&#x27;region&#x27;</span>] == <span class="string">&quot;World&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">SalExp21_Wo=(SalExp21_Wo.groupby([<span class="string">&#x27;Exp&#x27;</span>, <span class="string">&#x27;Salary&#x27;</span>])</span><br><span class="line">           .size()</span><br><span class="line">          .unstack().fillna(<span class="number">0</span>).astype(<span class="string">&#x27;int64&#x27;</span>))</span><br><span class="line">SalExp21_Wo</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line"><span class="comment">#World</span></span><br><span class="line">z = SalExp21_Wo</span><br><span class="line">z = z[sal_order]</span><br><span class="line">z = z.reindex(Exp21_order)</span><br><span class="line"></span><br><span class="line">z_data = z.apply(<span class="keyword">lambda</span> x:np.<span class="built_in">round</span>(x/x.<span class="built_in">sum</span>()*<span class="number">100</span>, <span class="number">2</span>), axis = <span class="number">1</span>).to_numpy() <span class="comment"># convert to correlation matrix</span></span><br><span class="line">x = sal_order</span><br><span class="line">y = Exp21_order</span><br><span class="line"></span><br><span class="line">fig = ff.create_annotated_heatmap(z_data, x = x, y = y, colorscale = <span class="string">&quot;sunset&quot;</span>)</span><br><span class="line">fig.update_layout( title_text=<span class="string">&quot;&lt;b&gt;Experience and salary in World&lt;/b&gt;&quot;</span>,</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">700</span>, title_font_size=<span class="number">20</span>,</span><br><span class="line">                  title_x=<span class="number">0.5</span>,</span><br><span class="line">                  margin=<span class="built_in">dict</span>(l=<span class="number">100</span>, r=<span class="number">100</span>, t=<span class="number">200</span>, b=<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.85</span>,</span><br><span class="line">                                    y=-<span class="number">0.1</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#East Asia</span></span><br><span class="line">z = SalExp21_Ea</span><br><span class="line">z = z[sal_order]</span><br><span class="line">z = z.reindex(Exp21_order)</span><br><span class="line">z_data = z.apply(<span class="keyword">lambda</span> x:np.<span class="built_in">round</span>(x/x.<span class="built_in">sum</span>(), <span class="number">2</span>), axis = <span class="number">1</span>).to_numpy() <span class="comment"># convert to correlation matrix</span></span><br><span class="line">x = sal_order</span><br><span class="line">y = Exp21_order</span><br><span class="line"></span><br><span class="line">fig = ff.create_annotated_heatmap(z_data, x = x, y = y, colorscale = <span class="string">&quot;sunset&quot;</span>)</span><br><span class="line">fig.update_layout(title_text=<span class="string">&quot;&lt;b&gt;Experience and salary in East Asia&lt;/b&gt;&quot;</span>,</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">700</span>, title_font_size=<span class="number">20</span>,</span><br><span class="line">                  title_x=<span class="number">0.5</span>,</span><br><span class="line">                  margin=<span class="built_in">dict</span>(l=<span class="number">100</span>, r=<span class="number">100</span>, t=<span class="number">200</span>, b=<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.85</span>,</span><br><span class="line">                                    y=-<span class="number">0.1</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h2> World & East Asia Degree/Annual salary: Heat Map </h2>

<ul>
<li>\$ ~20,000 : Regardless of degree, about 40% of the annual salary is $ 20,000 or less. <br><br>  Guess it’s the ratio that comes from a student. <br></li>
<li>$ 25,000-100,000 : Earned more than 40% with a bachelor’s degree alone in East Asia  <br><br>  (World: less than 20%) <br></li>
<li>$ 200,000~ : Even with a doctorate or higher, it is difficult to obtain it from East Asia.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line">Salary21= df21.loc[:, [<span class="string">&#x27;region&#x27;</span>, <span class="string">&#x27;Q25&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q25&#x27;</span>:<span class="string">&#x27;Salary&#x27;</span>&#125;)</span><br><span class="line">salary21_Index=[<span class="string">&#x27;&lt; 999&#x27;</span>, <span class="string">&#x27;1,000-20,000&#x27;</span>, <span class="string">&#x27;20,000-59,999&#x27;</span>, <span class="string">&#x27;60,000-99,999&#x27;</span>,<span class="string">&#x27;100,000-199,999&#x27;</span>, <span class="string">&#x27;200,000~&#x27;</span>]</span><br><span class="line"></span><br><span class="line">Salary21=(Salary21</span><br><span class="line">          .replace([<span class="string">&#x27;0-999&#x27;</span>,<span class="string">&#x27;$0-999&#x27;</span>,<span class="string">&#x27;0&#x27;</span>], <span class="string">&#x27;&lt; 999&#x27;</span>)</span><br><span class="line">          .replace(&#123;<span class="string">&#x27;&gt;$1,000,000&#x27;</span>:<span class="string">&#x27;200,000~&#x27;</span>&#125;)</span><br><span class="line">          .replace([<span class="string">&#x27;1,000-1,999&#x27;</span>,<span class="string">&#x27;2,000-2,999&#x27;</span>,<span class="string">&#x27;3,000-3,999&#x27;</span>, <span class="string">&#x27;4,000-4,999&#x27;</span>,<span class="string">&#x27;5,000-7,499&#x27;</span>,<span class="string">&#x27;7,500-9,999&#x27;</span>,<span class="string">&#x27;10,000-14,999&#x27;</span>, <span class="string">&#x27;15,000-19,999&#x27;</span>],<span class="string">&#x27;1,000-20,000&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;20,000-24,999&#x27;</span><span class="string">&#x27;25,000-29,999&#x27;</span>,<span class="string">&#x27;30,000-39,999&#x27;</span>, <span class="string">&#x27;40,000-49,999&#x27;</span>,  <span class="string">&#x27;50,000-59,999&#x27;</span>],<span class="string">&#x27;20,000-59,999&#x27;</span>) </span><br><span class="line">           .replace([<span class="string">&#x27;60,000-69,999&#x27;</span>, <span class="string">&#x27;70,000-79,999&#x27;</span>, <span class="string">&#x27;80,000-89,999&#x27;</span>,<span class="string">&#x27;90,000-99,999&#x27;</span>], <span class="string">&#x27;60,000-99,999&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;100,000-124,999&#x27;</span>, <span class="string">&#x27;300,000-499,999&#x27;</span>, <span class="string">&#x27;125,000-149,999&#x27;</span>, <span class="string">&#x27;125,000-149,999&#x27;</span>, <span class="string">&#x27;150,000-199,999&#x27;</span>],<span class="string">&#x27;100,000-199,999&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;200,000-249,999&#x27;</span>, <span class="string">&#x27;250,000-299,999&#x27;</span>,<span class="string">&#x27;1,000,000&#x27;</span>,<span class="string">&#x27;$500,000-999,999&#x27;</span>], <span class="string">&#x27;200,000~&#x27;</span>)).fillna(<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">sal_order=[<span class="string">&#x27;&lt; 999&#x27;</span>, <span class="string">&#x27;1,000-20,000&#x27;</span>, <span class="string">&#x27;20,000-59,999&#x27;</span>, <span class="string">&#x27;60,000-99,999&#x27;</span>,<span class="string">&#x27;100,000-199,999&#x27;</span>, <span class="string">&#x27;200,000~&#x27;</span>]</span><br><span class="line"></span><br><span class="line">Salary21=(Salary21.groupby([<span class="string">&#x27;region&#x27;</span>, <span class="string">&#x27;Salary&#x27;</span>])</span><br><span class="line">           .size()</span><br><span class="line">           .reset_index()</span><br><span class="line">           .rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;))</span><br><span class="line"></span><br><span class="line">Salary21_Ea = Salary21[Salary21[<span class="string">&#x27;region&#x27;</span>] == <span class="string">&quot;EastAsia&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Salary21_Ea[<span class="string">&#x27;%&#x27;</span>]=((Salary21_Ea[<span class="string">&#x27;Count&#x27;</span>] / Salary21_Ea[<span class="string">&#x27;Count&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line">Salary21_Wo = Salary21[Salary21[<span class="string">&#x27;region&#x27;</span>] == <span class="string">&quot;World&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Salary21_Wo[<span class="string">&#x27;%&#x27;</span>]=((Salary21_Wo[<span class="string">&#x27;Count&#x27;</span>] / Salary21_Wo[<span class="string">&#x27;Count&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">Dgr_Sal_21= df21.loc[:, [<span class="string">&#x27;region&#x27;</span>, <span class="string">&#x27;Q25&#x27;</span>, <span class="string">&#x27;Q4&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q4&#x27;</span>:<span class="string">&#x27;Dgree&#x27;</span>, <span class="string">&#x27;Q25&#x27;</span>:<span class="string">&#x27;Salary&#x27;</span>&#125;)</span><br><span class="line">Dgr_Sal_21 = (Dgr_Sal_21.replace([<span class="string">&#x27;0-999&#x27;</span>,<span class="string">&#x27;$0-999&#x27;</span>,<span class="string">&#x27;0&#x27;</span>], <span class="string">&#x27;&lt; 999&#x27;</span>)</span><br><span class="line">          .replace(&#123;<span class="string">&#x27;&gt;$1,000,000&#x27;</span>:<span class="string">&#x27;200,000~&#x27;</span>&#125;)</span><br><span class="line">          .replace([<span class="string">&#x27;1,000-1,999&#x27;</span>,<span class="string">&#x27;2,000-2,999&#x27;</span>,<span class="string">&#x27;3,000-3,999&#x27;</span>, <span class="string">&#x27;4,000-4,999&#x27;</span>,<span class="string">&#x27;5,000-7,499&#x27;</span>,<span class="string">&#x27;7,500-9,999&#x27;</span>,<span class="string">&#x27;10,000-14,999&#x27;</span>, <span class="string">&#x27;15,000-19,999&#x27;</span>],<span class="string">&#x27;1,000-20,000&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;20,000-24,999&#x27;</span><span class="string">&#x27;25,000-29,999&#x27;</span>,<span class="string">&#x27;30,000-39,999&#x27;</span>, <span class="string">&#x27;40,000-49,999&#x27;</span>, <span class="string">&#x27;50,000-59,999&#x27;</span>],<span class="string">&#x27;20,000-59,999&#x27;</span>) </span><br><span class="line">          .replace([<span class="string">&#x27;60,000-69,999&#x27;</span>, <span class="string">&#x27;70,000-79,999&#x27;</span>, <span class="string">&#x27;80,000-89,999&#x27;</span>, <span class="string">&#x27;90,000-99,999&#x27;</span>], <span class="string">&#x27;60,000-99,999&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;100,000-124,999&#x27;</span>, <span class="string">&#x27;300,000-499,999&#x27;</span>, <span class="string">&#x27;125,000-149,999&#x27;</span>, <span class="string">&#x27;125,000-149,999&#x27;</span>,<span class="string">&#x27;150,000-199,999&#x27;</span>],<span class="string">&#x27;100,000-199,999&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;200,000-249,999&#x27;</span>, <span class="string">&#x27;250,000-299,999&#x27;</span>,<span class="string">&#x27;1,000,000&#x27;</span>,<span class="string">&#x27;$500,000-999,999&#x27;</span>], <span class="string">&#x27;200,000~&#x27;</span>)</span><br><span class="line">          .replace(&#123;<span class="string">&#x27;I prefer not to answer&#x27;</span>:<span class="string">&#x27;etc&#x27;</span>&#125;)</span><br><span class="line">          .replace([<span class="string">&#x27;No formal education past high school&#x27;</span>, <span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>, <span class="string">&#x27;Professional doctorate&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#EastAsia 뽑기</span></span><br><span class="line">Dgr_Sal_21_Ea= Dgr_Sal_21[Dgr_Sal_21[<span class="string">&#x27;region&#x27;</span>] == <span class="string">&quot;EastAsia&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Dgr_Sal_21_Ea = Dgr_Sal_21_Ea.groupby([<span class="string">&#x27;Dgree&#x27;</span>, <span class="string">&#x27;Salary&#x27;</span>]).size().unstack().fillna(<span class="number">0</span>).astype(<span class="string">&#x27;int64&#x27;</span>)</span><br><span class="line"></span><br><span class="line">dgree_order=[ <span class="string">&#x27;~college&#x27;</span>,<span class="string">&#x27;Bachelor’s degree&#x27;</span>, <span class="string">&#x27;Master’s degree&#x27;</span>, <span class="string">&#x27;Doctoral degree~&#x27;</span>, <span class="string">&#x27;etc&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line"><span class="comment">#World</span></span><br><span class="line">z = Dgr_Sal_21.groupby([<span class="string">&#x27;Dgree&#x27;</span>, <span class="string">&#x27;Salary&#x27;</span>]).size().unstack().fillna(<span class="number">0</span>).astype(<span class="string">&#x27;int64&#x27;</span>)</span><br><span class="line">z = z[sal_order]</span><br><span class="line">z = z.reindex(dgree_order)</span><br><span class="line"></span><br><span class="line">z_data = z.apply(<span class="keyword">lambda</span> x:np.<span class="built_in">round</span>(x/x.<span class="built_in">sum</span>()*<span class="number">100</span>, <span class="number">2</span>), axis = <span class="number">1</span>).to_numpy() <span class="comment"># convert to correlation matrix</span></span><br><span class="line">x = sal_order</span><br><span class="line">y = dgree_order</span><br><span class="line"></span><br><span class="line">fig = ff.create_annotated_heatmap(z_data, x = x, y = y, colorscale = <span class="string">&quot;sunset&quot;</span>)</span><br><span class="line">fig.update_layout( title_text=<span class="string">&quot;&lt;b&gt;    Degree-Salary in World&lt;/b&gt;&quot;</span>,</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">700</span>, title_font_size=<span class="number">20</span>,</span><br><span class="line">                  title_x=<span class="number">0.5</span>,</span><br><span class="line">                  margin=<span class="built_in">dict</span>(l=<span class="number">150</span>, r=<span class="number">100</span>, t=<span class="number">200</span>, b=<span class="number">50</span>))</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Degree&lt;/b&gt;: %&#123;y&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Salary&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;z&#125;%&#x27;</span>)</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.1</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#East Asia</span></span><br><span class="line">z = Dgr_Sal_21_Ea</span><br><span class="line">z = z[sal_order]</span><br><span class="line">z = z.reindex(dgree_order)</span><br><span class="line">z_data = z.apply(<span class="keyword">lambda</span> x:np.<span class="built_in">round</span>(x/x.<span class="built_in">sum</span>()*<span class="number">100</span>, <span class="number">2</span>), axis = <span class="number">1</span>).to_numpy() <span class="comment"># convert to correlation matrix</span></span><br><span class="line">x = sal_order</span><br><span class="line">y = dgree_order</span><br><span class="line"></span><br><span class="line">fig = ff.create_annotated_heatmap(z_data, x = x, y = y, colorscale = <span class="string">&quot;sunset&quot;</span>)</span><br><span class="line">fig.update_layout(title_text=<span class="string">&quot;&lt;b&gt;    Degree-Salary in East Asia&lt;/b&gt;&quot;</span>,</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">700</span>, title_font_size=<span class="number">20</span>,</span><br><span class="line">                  title_x=<span class="number">0.5</span>,</span><br><span class="line">                  margin=<span class="built_in">dict</span>(l=<span class="number">150</span>, r=<span class="number">100</span>, t=<span class="number">200</span>, b=<span class="number">50</span>))</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Degree&lt;/b&gt;: %&#123;y&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Salary&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;z&#125;%&#x27;</span>)</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.1</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h1 id="3-1-8-Language-transformation"><a href="#3-1-8-Language-transformation" class="headerlink" title="3.1.8 Language transformation"></a>3.1.8 Language transformation</h1><hr>
<h2>World & East Asia Programming Language: Bar plot </h2>
- Python: 80% of the world and 85% of East Asia use it.

<h4>
<p style="color:#FF0000";>
We've been working on the project as python, so I hope we can continue to learn python and become experienced Data Scientists!
    </p></h4>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line"><span class="comment">#world</span></span><br><span class="line">programming_list = [<span class="string">&quot;Python&quot;</span>, <span class="string">&quot;R&quot;</span>, <span class="string">&quot;SQL&quot;</span>, <span class="string">&quot;Java&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;Bash&quot;</span>, <span class="string">&quot;Javascript&quot;</span>, <span class="string">&quot;C++&quot;</span>]</span><br><span class="line">programming_df = pd.Series(programming_list)</span><br><span class="line"></span><br><span class="line">df_2019 = df19[df19[<span class="string">&#x27;Q19&#x27;</span>].isin(programming_df)]</span><br><span class="line">df_2020 = df20[df20[<span class="string">&#x27;Q8&#x27;</span>].isin(programming_df)]</span><br><span class="line">df_2021 = df21[df21[<span class="string">&#x27;Q8&#x27;</span>].isin(programming_df)]</span><br><span class="line"></span><br><span class="line">df19Lag = df_2019.loc[:, [<span class="string">&#x27;region&#x27;</span>, <span class="string">&#x27;Q5&#x27;</span>, <span class="string">&#x27;Q19&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]]</span><br><span class="line">df19Lag = df19Lag.rename(columns = &#123;<span class="string">&#x27;Q19&#x27;</span>: <span class="string">&#x27;Language&#x27;</span>&#125;, inplace = <span class="literal">False</span>) <span class="comment"># To match with other datasets</span></span><br><span class="line">df20Lag = df_2020.loc[:, [<span class="string">&#x27;region&#x27;</span>, <span class="string">&#x27;Q5&#x27;</span>, <span class="string">&#x27;Q8&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].rename(columns = &#123;<span class="string">&#x27;Q8&#x27;</span>: <span class="string">&#x27;Language&#x27;</span>&#125;, inplace = <span class="literal">False</span>)</span><br><span class="line">df21Lag = df_2021.loc[:, [<span class="string">&#x27;region&#x27;</span>, <span class="string">&#x27;Q5&#x27;</span>, <span class="string">&#x27;Q8&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].rename(columns = &#123;<span class="string">&#x27;Q8&#x27;</span>: <span class="string">&#x27;Language&#x27;</span>&#125;, inplace = <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">df3y_Lag = pd.concat([df19Lag, df20Lag, df21Lag])</span><br><span class="line">df3y_Lag = df3y_Lag.groupby([<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;Language&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df3y_Lag</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2019</span></span><br><span class="line">dfLang_19 = df3y_Lag[df3y_Lag[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2019&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">dfLang_19[<span class="string">&#x27;percentage&#x27;</span>] = dfLang_19[<span class="string">&quot;Count&quot;</span>] / dfLang_19[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">dfLang_19[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(dfLang_19[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2020</span></span><br><span class="line">dfLang_20 = df3y_Lag[df3y_Lag[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2020&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">dfLang_20[<span class="string">&#x27;percentage&#x27;</span>] = dfLang_20[<span class="string">&quot;Count&quot;</span>] / dfLang_20[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">dfLang_20[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(dfLang_20[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2021</span></span><br><span class="line">dfLang_21 = df3y_Lag[df3y_Lag[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2021&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">dfLang_21[<span class="string">&#x27;percentage&#x27;</span>] = dfLang_21[<span class="string">&quot;Count&quot;</span>] / dfLang_21[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">dfLang_21[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(dfLang_21[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">dfLang_19=dfLang_19.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">dfLang_20=dfLang_20.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">dfLang_21=dfLang_21.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfLang_19[<span class="string">&#x27;Language&#x27;</span>], </span><br><span class="line">                     y = dfLang_19[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;2019&quot;</span>, </span><br><span class="line">                     text = dfLang_19[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>, marker_color=<span class="string">&#x27;#CDD9A3&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfLang_20[<span class="string">&#x27;Language&#x27;</span>], </span><br><span class="line">                     y = dfLang_20[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;2020&quot;</span>, </span><br><span class="line">                     text = dfLang_20[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>, marker_color=<span class="string">&#x27;#F28705&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfLang_21[<span class="string">&#x27;Language&#x27;</span>], </span><br><span class="line">                     y = dfLang_21[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;2021&quot;</span>, </span><br><span class="line">                     text = dfLang_21[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>, marker_color=<span class="string">&#x27;#88BFBA&#x27;</span>))</span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;&lt;b&gt;Language in World&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">20</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">100</span>, l=<span class="number">100</span>, r=<span class="number">50</span>, b=<span class="number">100</span>),</span><br><span class="line">                  height=<span class="number">600</span>, width=<span class="number">700</span>,</span><br><span class="line">                  xaxis_title=<span class="literal">None</span>,</span><br><span class="line">                  yaxis_title=<span class="literal">None</span>)</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;y&#125;%&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Language&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_layout(legend=<span class="built_in">dict</span>(</span><br><span class="line">    orientation=<span class="string">&quot;v&quot;</span>,</span><br><span class="line">    yanchor=<span class="string">&quot;bottom&quot;</span>,</span><br><span class="line">    y=<span class="number">0.8</span>,</span><br><span class="line">    xanchor=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    x=<span class="number">1</span>))</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.2</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data prprocessing</span></span><br><span class="line"><span class="comment">#Ea</span></span><br><span class="line"></span><br><span class="line">df_2019 = df19_Ea[df19_Ea[<span class="string">&#x27;Q19&#x27;</span>].isin(programming_df)]</span><br><span class="line">df_2020 = df20_Ea[df20_Ea[<span class="string">&#x27;Q8&#x27;</span>].isin(programming_df)]</span><br><span class="line">df_2021 = df21_Ea[df21_Ea[<span class="string">&#x27;Q8&#x27;</span>].isin(programming_df)]</span><br><span class="line"></span><br><span class="line">df19Lag = df_2019.loc[:, [<span class="string">&#x27;region&#x27;</span>, <span class="string">&#x27;Q5&#x27;</span>, <span class="string">&#x27;Q19&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]]</span><br><span class="line">df19Lag = df19Lag.rename(columns = &#123;<span class="string">&#x27;Q19&#x27;</span>: <span class="string">&#x27;Language&#x27;</span>&#125;, inplace = <span class="literal">False</span>) <span class="comment"># To match with other datasets</span></span><br><span class="line">df20Lag = df_2020.loc[:, [<span class="string">&#x27;region&#x27;</span>, <span class="string">&#x27;Q5&#x27;</span>, <span class="string">&#x27;Q8&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].rename(columns = &#123;<span class="string">&#x27;Q8&#x27;</span>: <span class="string">&#x27;Language&#x27;</span>&#125;, inplace = <span class="literal">False</span>)</span><br><span class="line">df21Lag = df_2021.loc[:, [<span class="string">&#x27;region&#x27;</span>, <span class="string">&#x27;Q5&#x27;</span>, <span class="string">&#x27;Q8&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].rename(columns = &#123;<span class="string">&#x27;Q8&#x27;</span>: <span class="string">&#x27;Language&#x27;</span>&#125;, inplace = <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df3y_Lag = pd.concat([df19Lag, df20Lag, df21Lag])</span><br><span class="line">df3y_Lag = df3y_Lag.groupby([<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;Language&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df3y_Lag</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2019</span></span><br><span class="line">dfLang_19 = df3y_Lag[df3y_Lag[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2019&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">dfLang_19[<span class="string">&#x27;percentage&#x27;</span>] = dfLang_19[<span class="string">&quot;Count&quot;</span>] / dfLang_19[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">dfLang_19[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(dfLang_19[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2020</span></span><br><span class="line">dfLang_20 = df3y_Lag[df3y_Lag[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2020&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">dfLang_20[<span class="string">&#x27;percentage&#x27;</span>] = dfLang_20[<span class="string">&quot;Count&quot;</span>] / dfLang_20[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">dfLang_20[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(dfLang_20[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2021</span></span><br><span class="line">dfLang_21 = df3y_Lag[df3y_Lag[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2021&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">dfLang_21[<span class="string">&#x27;percentage&#x27;</span>] = dfLang_21[<span class="string">&quot;Count&quot;</span>] / dfLang_21[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">dfLang_21[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(dfLang_21[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">dfLang_19=dfLang_19.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">dfLang_20=dfLang_20.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">dfLang_21=dfLang_21.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfLang_19[<span class="string">&#x27;Language&#x27;</span>], </span><br><span class="line">                     y = dfLang_19[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;2019&quot;</span>, </span><br><span class="line">                     text = dfLang_19[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>, marker_color=<span class="string">&#x27;#CDD9A3&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfLang_20[<span class="string">&#x27;Language&#x27;</span>], </span><br><span class="line">                     y = dfLang_20[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;2020&quot;</span>, </span><br><span class="line">                     text = dfLang_20[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>, marker_color=<span class="string">&#x27;#F28705&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfLang_21[<span class="string">&#x27;Language&#x27;</span>], </span><br><span class="line">                     y = dfLang_21[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;2021&quot;</span>, </span><br><span class="line">                     text = dfLang_21[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>, marker_color=<span class="string">&#x27;#88BFBA&#x27;</span>))</span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;&lt;b&gt;Language in EastAsia&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">20</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">100</span>, l=<span class="number">100</span>, r=<span class="number">50</span>, b=<span class="number">100</span>),</span><br><span class="line">                  height=<span class="number">600</span>, width=<span class="number">700</span>,</span><br><span class="line">                  xaxis_title=<span class="literal">None</span>,</span><br><span class="line">                  yaxis_title=<span class="literal">None</span>)</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;text&#125;&#x27;</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.2</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h1 id="3-2-Position-of-Data-Scientist-in-East-Asia"><a href="#3-2-Position-of-Data-Scientist-in-East-Asia" class="headerlink" title="3.2 Position of Data Scientist in East Asia"></a>3.2 Position of Data Scientist in East Asia</h1><hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># data preprocessing</span></span><br><span class="line">df21_Ea_DS = df21_Ea[df21_Ea[<span class="string">&#x27;Q5&#x27;</span>].isin(Data_Scientist)].fillna(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">salary_order= [<span class="string">&#x27;&lt;999&#x27;</span>, <span class="string">&#x27;1,000-19,999&#x27;</span>, <span class="string">&#x27;20,000-59,999&#x27;</span>, <span class="string">&#x27;60,000-99,999&#x27;</span>,<span class="string">&#x27;100,000-199,999&#x27;</span>, <span class="string">&#x27;200,000~&#x27;</span>]</span><br><span class="line">dgree_order=[ <span class="string">&#x27;~college&#x27;</span>,<span class="string">&#x27;Bachelor’s degree&#x27;</span>, <span class="string">&#x27;Master’s degree&#x27;</span>, <span class="string">&#x27;Doctoral degree~&#x27;</span>, <span class="string">&#x27;etc&#x27;</span>]</span><br><span class="line"></span><br><span class="line">df21_Ea_DS=(df21_Ea_DS</span><br><span class="line">  <span class="comment">#salary      </span></span><br><span class="line">          .replace(&#123;<span class="string">&#x27;$0-999&#x27;</span>:<span class="string">&#x27;&lt;999&#x27;</span>,<span class="string">&#x27;&gt;$1,000,000&#x27;</span>:<span class="string">&#x27;1,000,000~&#x27;</span>,<span class="string">&#x27;$500,000-999,999&#x27;</span>:<span class="string">&#x27;500,000-999,999&#x27;</span>&#125;)</span><br><span class="line">         </span><br><span class="line">          .replace([<span class="string">&#x27;1,000-1,999&#x27;</span>,<span class="string">&#x27;2,000-2,999&#x27;</span>,<span class="string">&#x27;3,000-3,999&#x27;</span>, <span class="string">&#x27;4,000-4,999&#x27;</span>,<span class="string">&#x27;5,000-7,499&#x27;</span>,<span class="string">&#x27;7,500-9,999&#x27;</span>,<span class="string">&#x27;10,000-14,999&#x27;</span>, <span class="string">&#x27;15,000-19,999&#x27;</span>],<span class="string">&#x27;1,000-19,999&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;20,000-24,999&#x27;</span>,<span class="string">&#x27;25,000-29,999&#x27;</span>,<span class="string">&#x27;30,000-39,999&#x27;</span>, <span class="string">&#x27;40,000-49,999&#x27;</span>, <span class="string">&#x27;50,000-59,999&#x27;</span>],<span class="string">&#x27;20,000-59,999&#x27;</span>) </span><br><span class="line">          .replace([<span class="string">&#x27;60,000-69,999&#x27;</span>, <span class="string">&#x27;70,000-79,999&#x27;</span>, <span class="string">&#x27;80,000-89,999&#x27;</span>, <span class="string">&#x27;90,000-99,999&#x27;</span>], <span class="string">&#x27;60,000-99,999&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;100,000-124,999&#x27;</span>,<span class="string">&#x27;125,000-149,999&#x27;</span>,<span class="string">&#x27;150,000-199,999&#x27;</span>],<span class="string">&#x27;100,000-199,999&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;200,000-249,999&#x27;</span>, <span class="string">&#x27;250,000-299,999&#x27;</span>, <span class="string">&#x27;300,000-499,999&#x27;</span>,<span class="string">&#x27;500,000-999,999&#x27;</span>, <span class="string">&#x27;1,000,000~&#x27;</span>], <span class="string">&#x27;200,000~&#x27;</span>)</span><br><span class="line">  <span class="comment">#degree          </span></span><br><span class="line">          .replace(&#123;<span class="string">&#x27;I prefer not to answer&#x27;</span>:<span class="string">&#x27;etc&#x27;</span>&#125;)</span><br><span class="line">          .replace([<span class="string">&#x27;No formal education past high school&#x27;</span>,<span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>, <span class="string">&#x27;Professional doctorate&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>)</span><br><span class="line">          )</span><br><span class="line">sal_order= [<span class="string">&#x27;&lt;999&#x27;</span>, <span class="string">&#x27;1,000-19,999&#x27;</span>, <span class="string">&#x27;20,000-59,999&#x27;</span>, <span class="string">&#x27;60,000-99,999&#x27;</span>,<span class="string">&#x27;100,000-199,999&#x27;</span>, <span class="string">&#x27;200,000~&#x27;</span>]</span><br><span class="line">dgree_order=[ <span class="string">&#x27;~college&#x27;</span>,<span class="string">&#x27;Bachelor’s degree&#x27;</span>, <span class="string">&#x27;Master’s degree&#x27;</span>, <span class="string">&#x27;Doctoral degree~&#x27;</span>, <span class="string">&#x27;etc&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="3-2-1-Salary"><a href="#3-2-1-Salary" class="headerlink" title="3.2.1 Salary"></a>3.2.1 Salary</h1><hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">df21_Ea_DS_= df21_Ea_DS.loc[:,[<span class="string">&#x27;Q5&#x27;</span>,<span class="string">&#x27;Q25&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q5&#x27;</span>:<span class="string">&#x27;Data_Scientist&#x27;</span>, <span class="string">&#x27;Q25&#x27;</span>:<span class="string">&#x27;Salary&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">df21_Ea_DS_= (df21_Ea_DS_.groupby([<span class="string">&#x27;Data_Scientist&#x27;</span>, <span class="string">&#x27;Salary&#x27;</span>]).size()</span><br><span class="line">                         .reset_index()</span><br><span class="line">                         .rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">#Data Scientist</span></span><br><span class="line">df21_Ea_DS_Ds = df21_Ea_DS_[df21_Ea_DS_[<span class="string">&#x27;Data_Scientist&#x27;</span>] == <span class="string">&quot;Data Scientist&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">df21_Ea_DS_Ds[<span class="string">&#x27;%&#x27;</span>]=((df21_Ea_DS_Ds[<span class="string">&#x27;Count&#x27;</span>] / df21_Ea_DS_Ds[<span class="string">&#x27;Count&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Machine Learning Engineer</span></span><br><span class="line">df21_Ea_DS_Mle = df21_Ea_DS_[df21_Ea_DS_[<span class="string">&#x27;Data_Scientist&#x27;</span>] == <span class="string">&quot;Machine Learning Engineer&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">df21_Ea_DS_Mle[<span class="string">&#x27;%&#x27;</span>]=((df21_Ea_DS_Mle[<span class="string">&#x27;Count&#x27;</span>] / df21_Ea_DS_Mle[<span class="string">&#x27;Count&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Research Scientist</span></span><br><span class="line">df21_Ea_DS_Rs = df21_Ea_DS_[df21_Ea_DS_[<span class="string">&#x27;Data_Scientist&#x27;</span>] == <span class="string">&quot;Research Scientist&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">df21_Ea_DS_Rs[<span class="string">&#x27;%&#x27;</span>]=((df21_Ea_DS_Rs[<span class="string">&#x27;Count&#x27;</span>] / df21_Ea_DS_Rs[<span class="string">&#x27;Count&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line">df21_Ea_DS_Rs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df21_Ea_DS_salary = pd.concat([df21_Ea_DS_Ds, df21_Ea_DS_Mle, df21_Ea_DS_Rs], ignore_index = <span class="literal">True</span>)</span><br><span class="line">df21_Ea_DS_salary= pd.pivot(df21_Ea_DS_salary, index = <span class="string">&quot;Salary&quot;</span>, columns = <span class="string">&#x27;Data_Scientist&#x27;</span>, values = <span class="string">&quot;%&quot;</span>).reset_index().fillna(<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">df21_Ea_DS_salary= df21_Ea_DS_salary.set_index(<span class="string">&quot;Salary&quot;</span>).reindex(sal_order)</span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Bar(x = df21_Ea_DS_salary.index, </span><br><span class="line">                     y = df21_Ea_DS_salary[<span class="string">&#x27;Data Scientist&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;Data Scientist&quot;</span>, </span><br><span class="line">                     text = df21_Ea_DS_salary[<span class="string">&#x27;Data Scientist&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>, marker_color=<span class="string">&#x27;#F2798F&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = df21_Ea_DS_salary.index, </span><br><span class="line">                     y = df21_Ea_DS_salary[<span class="string">&#x27;Machine Learning Engineer&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;Machine Learning Engineer&quot;</span>, </span><br><span class="line">                     text = df21_Ea_DS_salary[<span class="string">&#x27;Machine Learning Engineer&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>, marker_color=<span class="string">&#x27;#CDD9A3&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = df21_Ea_DS_salary.index, </span><br><span class="line">                     y = df21_Ea_DS_salary[<span class="string">&#x27;Research Scientist&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;Research Scientist&quot;</span>, </span><br><span class="line">                     text = df21_Ea_DS_salary[<span class="string">&#x27;Research Scientist&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>, marker_color=<span class="string">&#x27;#88BFBA&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.update_layout(barmode=<span class="string">&#x27;stack&#x27;</span>,</span><br><span class="line">                 showlegend=<span class="literal">True</span>,</span><br><span class="line">                 height=<span class="number">600</span>, width=<span class="number">700</span>,</span><br><span class="line">                 title_text=<span class="string">&quot;&lt;b&gt;Data Scientist&#x27;s Salary in East Asia&lt;/b&gt;&quot;</span>,</span><br><span class="line">                 title_x=<span class="number">0.5</span>,</span><br><span class="line">                 title_font_size=<span class="number">20</span>, </span><br><span class="line">                  margin=<span class="built_in">dict</span>(l=<span class="number">100</span>, r=<span class="number">100</span>, t=<span class="number">100</span>, b=<span class="number">100</span>))</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;y&#125;%&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Salary&lt;/b&gt;: %&#123;x&#125;$&lt;br&gt;&#x27;</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_layout(legend=<span class="built_in">dict</span>(</span><br><span class="line">    orientation=<span class="string">&quot;v&quot;</span>,</span><br><span class="line">    yanchor=<span class="string">&quot;bottom&quot;</span>,</span><br><span class="line">    y=<span class="number">0.8</span>,</span><br><span class="line">    xanchor=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    x=<span class="number">1.2</span>))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h1 id="3-2-2-Salary-Experience"><a href="#3-2-2-Salary-Experience" class="headerlink" title="3.2.2 Salary-Experience"></a>3.2.2 Salary-Experience</h1><hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">df21Ea_DS_ExSal = df21_Ea_DS.loc[:,[<span class="string">&#x27;Q6&#x27;</span>,<span class="string">&#x27;Q25&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q25&#x27;</span>:<span class="string">&#x27;Salary&#x27;</span>, <span class="string">&#x27;Q6&#x27;</span>:<span class="string">&#x27;Exp&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">df21Ea_DS_ExSal= (df21Ea_DS_ExSal.groupby([<span class="string">&#x27;Exp&#x27;</span>, <span class="string">&#x27;Salary&#x27;</span>]).size().unstack().fillna(<span class="number">0</span>).astype(<span class="string">&#x27;int64&#x27;</span>))</span><br><span class="line"></span><br><span class="line">Exp_order=[<span class="string">&#x27;&lt; 1 years&#x27;</span>,<span class="string">&#x27;1-3 years&#x27;</span>,<span class="string">&#x27;3-5 years&#x27;</span>, <span class="string">&#x27;5-10 years&#x27;</span>, <span class="string">&#x27;10-20 years&#x27;</span>, <span class="string">&#x27;20+ years&#x27;</span>, <span class="string">&#x27;I have never written code&#x27;</span>]</span><br><span class="line"></span><br><span class="line">df21Ea_DS_ExSal</span><br><span class="line"></span><br><span class="line">z = df21Ea_DS_ExSal</span><br><span class="line">z = z[sal_order]</span><br><span class="line">z = z.reindex(Exp_order)</span><br><span class="line"></span><br><span class="line">z_data = z.apply(<span class="keyword">lambda</span> x:np.<span class="built_in">round</span>(x/x.<span class="built_in">sum</span>()*<span class="number">100</span>, <span class="number">2</span>), axis = <span class="number">1</span>).to_numpy() <span class="comment"># convert to correlation matrix</span></span><br><span class="line">x = sal_order</span><br><span class="line">y = Exp_order</span><br><span class="line"></span><br><span class="line">fig = ff.create_annotated_heatmap(z_data, x = x, y = y, colorscale = <span class="string">&quot;sunset&quot;</span>)</span><br><span class="line">fig.update_layout(title_text=<span class="string">&quot;&lt;b&gt;    Data Scientist&#x27;s Experience &amp; Salary &lt;/b&gt;&quot;</span>,title_font_size=<span class="number">20</span>,</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">700</span>,</span><br><span class="line">                  title_x=<span class="number">0.5</span>,</span><br><span class="line">                  margin=<span class="built_in">dict</span>(l=<span class="number">100</span>, r=<span class="number">100</span>, t=<span class="number">200</span>, b=<span class="number">100</span>))</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Salary&lt;/b&gt;: %&#123;y&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Experience&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;z&#125;%&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h1 id="3-2-3-Degree"><a href="#3-2-3-Degree" class="headerlink" title="3.2.3 Degree"></a>3.2.3 Degree</h1><hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">df21_Ea_degree = df21_Ea_DS[<span class="string">&#x27;Q4&#x27;</span>].value_counts().to_frame()</span><br><span class="line">degree = df21_Ea_degree.index</span><br><span class="line">values = df21_Ea_degree[<span class="string">&#x27;Q4&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line">colors = [<span class="string">&#x27;#F2798F&#x27;</span>,<span class="string">&#x27;#88BFBA&#x27;</span>, <span class="string">&#x27;#CDD9A3&#x27;</span>, <span class="string">&#x27;#F28705&#x27;</span>, <span class="string">&#x27;#D9946C&#x27;</span>]</span><br><span class="line">fig = go.Figure(data=[go.Bar(name=<span class="string">&#x27;Degree&#x27;</span>, x=degree, y=values ,orientation=<span class="string">&#x27;v&#x27;</span>, marker_color=colors, text=values, textposition=<span class="string">&#x27;outside&#x27;</span>)])</span><br><span class="line">fig.update_layout(title_text=<span class="string">&quot;&lt;b&gt;Data Scientist&#x27;s Degree (2021)&lt;/b&gt;&quot;</span>, title_font_size=<span class="number">20</span>,</span><br><span class="line">                  height=<span class="number">600</span>, width=<span class="number">700</span>,</span><br><span class="line">                  title_x=<span class="number">0.5</span>,</span><br><span class="line">                  margin=<span class="built_in">dict</span>(l=<span class="number">100</span>, r=<span class="number">100</span>, t=<span class="number">200</span>, b=<span class="number">100</span>))</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Count&lt;/b&gt;: %&#123;y&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Degree&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.2</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h1 id="3-2-4-Salary-Degree"><a href="#3-2-4-Salary-Degree" class="headerlink" title="3.2.4 Salary-Degree"></a>3.2.4 Salary-Degree</h1><hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">df21Ea_DS_EduSal= df21_Ea_DS.loc[:, [<span class="string">&#x27;Q4&#x27;</span>, <span class="string">&#x27;Q25&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q4&#x27;</span>:<span class="string">&#x27;Edu&#x27;</span>, <span class="string">&#x27;Q25&#x27;</span>:<span class="string">&#x27;Salary&#x27;</span>&#125;)</span><br><span class="line">df21Ea_DS_EduSal[<span class="string">&#x27;Edu&#x27;</span>].unique()</span><br><span class="line">Edu_order=[<span class="string">&#x27;~college&#x27;</span>, <span class="string">&#x27;Bachelor’s degree&#x27;</span>,<span class="string">&#x27;Master’s degree&#x27;</span>, <span class="string">&#x27;Doctoral degree~&#x27;</span>, <span class="string">&#x27;etc&#x27;</span>]</span><br><span class="line"></span><br><span class="line">df21Ea_DS_EduSal= (df21Ea_DS_EduSal.groupby([<span class="string">&#x27;Edu&#x27;</span>, <span class="string">&#x27;Salary&#x27;</span>]).size().unstack().fillna(<span class="number">0</span>).astype(<span class="string">&#x27;int64&#x27;</span>))</span><br><span class="line">df21Ea_DS_EduSal</span><br><span class="line"></span><br><span class="line">z = df21Ea_DS_EduSal</span><br><span class="line">z = z[sal_order]</span><br><span class="line">z = z.reindex(Edu_order)</span><br><span class="line"></span><br><span class="line">z_data = z.apply(<span class="keyword">lambda</span> x:np.<span class="built_in">round</span>(x/x.<span class="built_in">sum</span>()*<span class="number">100</span>, <span class="number">2</span>), axis = <span class="number">1</span>).to_numpy() <span class="comment"># convert to correlation matrix</span></span><br><span class="line">x = sal_order</span><br><span class="line">y = Edu_order</span><br><span class="line"></span><br><span class="line">fig = ff.create_annotated_heatmap(z_data, x = x, y = y, colorscale = <span class="string">&quot;sunset&quot;</span>)</span><br><span class="line">fig.update_layout(title_text=<span class="string">&quot;&lt;b&gt;       Data Scientist&#x27;s Degree &amp; Salary &lt;/b&gt;&quot;</span>, title_font_size=<span class="number">20</span>,</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">700</span>,</span><br><span class="line">                  title_x=<span class="number">0.5</span>,</span><br><span class="line">                  margin=<span class="built_in">dict</span>(l=<span class="number">150</span>, r=<span class="number">100</span>, t=<span class="number">200</span>, b=<span class="number">50</span>))</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Degree&lt;/b&gt;: %&#123;y&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Salary&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;z&#125;%&#x27;</span>)</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.1</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h1 id="3-2-5-Language"><a href="#3-2-5-Language" class="headerlink" title="3.2.5 Language"></a>3.2.5 Language</h1><hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data preprocessing</span></span><br><span class="line">df20_Ea_DS = df20_Ea[df20_Ea[<span class="string">&#x27;Q5&#x27;</span>].isin(Data_Scientist)]</span><br><span class="line">df19_Ea_DS =df19_Ea[df19_Ea[<span class="string">&#x27;Q5&#x27;</span>].isin(Data_Scientist)]</span><br><span class="line">df19Ea_DSLag = df19_Ea_DS.loc[:, [ <span class="string">&#x27;Q5&#x27;</span>, <span class="string">&#x27;Q19&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]]</span><br><span class="line">df19Ea_DSLag = df19Ea_DSLag.rename(columns = &#123;<span class="string">&#x27;Q19&#x27;</span>: <span class="string">&#x27;Language&#x27;</span>&#125;, inplace = <span class="literal">False</span>) <span class="comment"># To match with other datasets</span></span><br><span class="line">df20Ea_DSLag = df20_Ea_DS.loc[:, [ <span class="string">&#x27;Q5&#x27;</span>, <span class="string">&#x27;Q8&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].rename(columns = &#123;<span class="string">&#x27;Q8&#x27;</span>: <span class="string">&#x27;Language&#x27;</span>&#125;, inplace = <span class="literal">False</span>)</span><br><span class="line">df21Ea_DSLag = df21_Ea_DS.loc[:, [ <span class="string">&#x27;Q5&#x27;</span>, <span class="string">&#x27;Q8&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].rename(columns = &#123;<span class="string">&#x27;Q8&#x27;</span>: <span class="string">&#x27;Language&#x27;</span>&#125;, inplace = <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">df3y_Ds_Lag = pd.concat([df19Ea_DSLag, df20Ea_DSLag, df21Ea_DSLag])</span><br><span class="line">df3y_Ds_Lag = df3y_Ds_Lag.groupby([<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;Language&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df3y_Ds_Lag</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2019</span></span><br><span class="line">dfLang_Ds_19 = df3y_Ds_Lag[df3y_Ds_Lag[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2019&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">dfLang_Ds_19[<span class="string">&#x27;percentage&#x27;</span>] = dfLang_Ds_19[<span class="string">&quot;Count&quot;</span>] / dfLang_Ds_19[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">dfLang_Ds_19[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(dfLang_Ds_19[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2020</span></span><br><span class="line">dfLang_Ds_20 = df3y_Ds_Lag[df3y_Ds_Lag[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2020&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">dfLang_Ds_20[<span class="string">&#x27;percentage&#x27;</span>] = dfLang_Ds_20[<span class="string">&quot;Count&quot;</span>] / dfLang_Ds_20[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">dfLang_Ds_20[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(dfLang_Ds_20[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2021</span></span><br><span class="line">dfLang_Ds_21 = df3y_Ds_Lag[df3y_Ds_Lag[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2021&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">dfLang_Ds_21[<span class="string">&#x27;percentage&#x27;</span>] = dfLang_Ds_21[<span class="string">&quot;Count&quot;</span>] / dfLang_Ds_21[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">dfLang_Ds_21[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(dfLang_Ds_21[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">dfLang_Ds_19=dfLang_Ds_19.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">dfLang_Ds_20=dfLang_Ds_20.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">dfLang_Ds_21=dfLang_Ds_21.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#graph</span></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfLang_Ds_19[<span class="string">&#x27;Language&#x27;</span>], </span><br><span class="line">                     y = dfLang_Ds_19[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;2019&quot;</span>, </span><br><span class="line">                     text = dfLang_Ds_19[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>, </span><br><span class="line">                     marker_color=<span class="string">&#x27;#CDD9A3&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfLang_Ds_20[<span class="string">&#x27;Language&#x27;</span>], </span><br><span class="line">                     y = dfLang_Ds_20[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;2020&quot;</span>, </span><br><span class="line">                     text = dfLang_Ds_20[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>, </span><br><span class="line">                     marker_color=<span class="string">&#x27;#F28705&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfLang_Ds_21[<span class="string">&#x27;Language&#x27;</span>], </span><br><span class="line">                     y = dfLang_Ds_21[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;2021&quot;</span>, </span><br><span class="line">                     text = dfLang_Ds_21[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>, </span><br><span class="line">                     marker_color=<span class="string">&#x27;#88BFBA&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;&lt;b&gt;        The language used by the data scientist&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">22</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">120</span>, l=<span class="number">100</span>, r=<span class="number">10</span>, b=<span class="number">150</span>),</span><br><span class="line">                  height=<span class="number">600</span>, width=<span class="number">700</span>)</span><br><span class="line">fig.update_traces(hovertemplate=<span class="string">&#x27;&lt;b&gt;Percent&lt;/b&gt;: %&#123;y&#125;%&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Language&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_layout(legend=<span class="built_in">dict</span>(</span><br><span class="line">    orientation=<span class="string">&quot;h&quot;</span>,</span><br><span class="line">    yanchor=<span class="string">&quot;bottom&quot;</span>,</span><br><span class="line">    y=<span class="number">0.8</span>,</span><br><span class="line">    xanchor=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    x=<span class="number">1</span>))</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.2</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ds_pc=(df21_Ea_DS.loc[:, [<span class="string">&#x27;Q5&#x27;</span>,<span class="string">&#x27;Q25&#x27;</span>,<span class="string">&#x27;Q6&#x27;</span>,<span class="string">&#x27;Q4&#x27;</span>,<span class="string">&#x27;Q8&#x27;</span>]]</span><br><span class="line">                 .replace(&#123;<span class="string">&#x27;I have never written code&#x27;</span>: <span class="string">&#x27;&lt; 1 years&#x27;</span>,  <span class="string">&#x27;1-3 years&#x27;</span>: <span class="string">&#x27;1-2 years&#x27;</span>&#125;)</span><br><span class="line">                 .replace([<span class="string">&#x27;10-20 years&#x27;</span>, <span class="string">&#x27;20+ years&#x27;</span>], <span class="string">&#x27;10+ years&#x27;</span> )</span><br><span class="line">                 .replace([<span class="number">0</span>,<span class="string">&#x27;&lt;999&#x27;</span>])</span><br><span class="line">                 )</span><br><span class="line">fig = px.parallel_categories(ds_pc, labels=&#123;<span class="string">&#x27;Q5&#x27;</span>:<span class="string">&#x27;Job&#x27;</span>, <span class="string">&#x27;Q25&#x27;</span>:<span class="string">&#x27;Salary&#x27;</span>, <span class="string">&#x27;Q6&#x27;</span>:<span class="string">&#x27;Experience&#x27;</span>, <span class="string">&#x27;Q4&#x27;</span>:<span class="string">&#x27;Degree&#x27;</span>, <span class="string">&#x27;Q8&#x27;</span>:<span class="string">&#x27;Language&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">fig.update_layout(hovermode = <span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;&lt;b&gt;        Data Scientist&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">20</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">120</span>, l=<span class="number">100</span>, r=<span class="number">10</span>, b=<span class="number">150</span>),</span><br><span class="line">                  height=<span class="number">600</span>, width=<span class="number">700</span>)</span><br><span class="line">fig.add_annotation(<span class="built_in">dict</span>(font=<span class="built_in">dict</span>(size=<span class="number">14</span>),</span><br><span class="line">                                    x=<span class="number">0.8</span>,</span><br><span class="line">                                    y=-<span class="number">0.2</span>,</span><br><span class="line">                                    showarrow=<span class="literal">False</span>,</span><br><span class="line">                                    text=<span class="string">&quot;@green_yhjw&quot;</span>,</span><br><span class="line">                                    xanchor=<span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                                    xref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">                                    yref=<span class="string">&quot;paper&quot;</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<h1 id="4-Ref"><a href="#4-Ref" class="headerlink" title="4. Ref."></a>4. Ref.</h1><hr>
<h2> Ref. </h2>

<ul>
<li><p>동아시아 지역 <a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/%EB%8F%99%EC%95%84%EC%8B%9C%EC%95%84">https://ko.wikipedia.org/wiki/%EB%8F%99%EC%95%84%EC%8B%9C%EC%95%84</a></p>
</li>
<li><p>동아시아 인구 <a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/%EC%95%84%EC%8B%9C%EC%95%84%EC%9D%98_%EC%9D%B8%EA%B5%AC">https://ko.wikipedia.org/wiki/%EC%95%84%EC%8B%9C%EC%95%84%EC%9D%98_%EC%9D%B8%EA%B5%AC</a></p>
</li>
<li><p>세계 인구 <a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/%EC%84%B8%EA%B3%84_%EC%9D%B8%EA%B5%AC">https://ko.wikipedia.org/wiki/%EC%84%B8%EA%B3%84_%EC%9D%B8%EA%B5%AC</a></p>
<pre><code>     https://ko.wikipedia.org/wiki/%EC%9D%B8%EA%B0%84_%EA%B0%9C%EB%B0%9C_%EC%A7%80%EC%88%98#2020%EB%85%84
</code></pre>
</li>
<li><p>동아시아 인간개발지수  <a target="_blank" rel="noopener" href="https://namu.wiki/w/%EB%8F%99%EC%95%84%EC%8B%9C%EC%95%84">https://namu.wiki/w/%EB%8F%99%EC%95%84%EC%8B%9C%EC%95%84</a></p>
</li>
<li><p>Data Scientist란  <a target="_blank" rel="noopener" href="https://dataprofessional.tistory.com/126">https://dataprofessional.tistory.com/126</a> </p>
<pre><code>      https://terms.naver.com/entry.naver?docId=1691563&amp;cid=42171&amp;categoryId=42183
</code></pre>
</li>
<li><p>Kaggle이란 <a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/%EC%BA%90%EA%B8%80">https://ko.wikipedia.org/wiki/%EC%BA%90%EA%B8%80</a></p>
</li>
<li><p>Python이란 <a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/%ED%8C%8C%EC%9D%B4%EC%8D%AC">https://ko.wikipedia.org/wiki/%ED%8C%8C%EC%9D%B4%EC%8D%AC</a></p>
</li>
<li><p>Kaggle competition Ref. <a target="_blank" rel="noopener" href="https://www.kaggle.com/miguelfzzz/the-typical-kaggle-data-scientist-in-2021">https://www.kaggle.com/miguelfzzz/the-typical-kaggle-data-scientist-in-2021</a></p>
<pre><code>          https://www.kaggle.com/desalegngeb/how-popular-is-kaggle-in-africa
</code></pre>
</li>
</ul>
<ul>
<li>flaricon: <div>Icons made by <a target="_blank" rel="noopener" href="https://www.freepik.com" title="Freepik">Freepik</a> from <a target="_blank" rel="noopener" href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div></li>
</ul>
<h1 id="5-close"><a href="#5-close" class="headerlink" title="5. close"></a>5. close</h1><hr>
<p>안녕하세요 한국에 사는 YH입니다. <br><br>python을 배운지 한달이 채 안되서 명이 한 팀이 되어  이번 대회에 참가 하게 되었습니다. <br><br>많이 부족하지만 여기까지 읽어 주셔서 감사합니다. <br><br>아직은 너무너무 부족한 제출물 이지만, 앞으로 열심히 해서 케글 대회에서 1등하는 그 날까지 지켜봐 주세요 ^^! <br><br> 혹시 코멘트로 다 전하지 못하셨던 말이 있으시다면, 저의 <a href="https://yoonhwa-p.github.io/">github blog</a>에 방문하여 도움을 주세요!  <br><br>별거 없지만 놀러오세요  ;-)</p>
<p>Hello, I’m YH and I live in Korea.<br><br>Less than a month after learning python, people became a team and participated in this competition.  <br><br>It’s not enough, but thank you for reading it up to here.  <br><br>It’s still not enough, but please watch until the day we win first place at the Kaggle competition ^^! <br><br> <br><br>If there’s anything you haven’t said in the comments, please visit my <a href="https://yoonhwa-p.github.io/">github blog</a> and help me! <br><br> It’s nothing special, but come and play. ;-) <br></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-11-23T04:18:29.000Z" title="2021. 11. 23. 오후 1:18:29">2021-11-23</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2021-11-28T05:45:37.089Z" title="2021. 11. 28. 오후 2:45:37">2021-11-28</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/python-plotly/">python - plotly</a></span><span class="level-item">13분안에 읽기 (약 1953 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/23/kgg/Kgg_EastAsia_DataScientist/">East Asia, Data Scientist (kaggle in East-Asia)</a></h1><div class="content"><h1 id="Data-scientist-in-East-Asia"><a href="#Data-scientist-in-East-Asia" class="headerlink" title="Data scientist in East Asia"></a>Data scientist in East Asia</h1><p><br><br></p>
<hr>




<h2 id="Data-scientist로써-East-Asia-에서-살아-남아보자"><a href="#Data-scientist로써-East-Asia-에서-살아-남아보자" class="headerlink" title="Data scientist로써 East Asia 에서 살아 남아보자 !"></a>Data scientist로써 East Asia 에서 살아 남아보자 !</h2><h3 id="Data-Import"><a href="#Data-Import" class="headerlink" title="Data Import"></a>Data Import</h3><h4 id="East-asia-data에서-DS-Data-scientist-뽑아내기"><a href="#East-asia-data에서-DS-Data-scientist-뽑아내기" class="headerlink" title="East asia data에서 DS(Data scientist)뽑아내기"></a>East asia data에서 DS(Data scientist)뽑아내기</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 21년 EastAsia 의 Data Scientist</span></span><br><span class="line"><span class="comment"># 21년 EastAsia의 Data Scientist는 &#x27;Data Scientist&#x27;, &#x27;Machine Learning Engineer&#x27;, &#x27;Scientist/Researcher&#x27;</span></span><br><span class="line"><span class="comment"># Data_Scientist =[&#x27;Data Scientist&#x27;,  &#x27;Research Scientist&#x27;, &#x27;Researcher&#x27;,&#x27;Machine Learning Engineer&#x27;, &#x27;Scientist/Researcher&#x27;]</span></span><br><span class="line">df21_Ea_DS = df21_Ea[df21_Ea[<span class="string">&#x27;Q5&#x27;</span>].isin(Data_Scientist)]</span><br><span class="line"><span class="comment">#21년 EastAsia의 Data Scientist 설문조사 응답자 리스트 </span></span><br><span class="line"></span><br><span class="line">dgree_order=[ <span class="string">&#x27;~college&#x27;</span>,<span class="string">&#x27;Bachelor’s degree&#x27;</span>, <span class="string">&#x27;Master’s degree&#x27;</span>, <span class="string">&#x27;Doctoral degree~&#x27;</span>, <span class="string">&#x27;etc&#x27;</span>]</span><br><span class="line">sal_order=[<span class="string">&#x27;&lt; 999&#x27;</span>, <span class="string">&#x27;1,000-7,499&#x27;</span>, <span class="string">&#x27;7,500-24,999&#x27;</span>, <span class="string">&#x27;25,000-59,999&#x27;</span>, <span class="string">&#x27;60,000-99,999&#x27;</span>,<span class="string">&#x27;100,000-199,999&#x27;</span>, <span class="string">&#x27;200,000~&#x27;</span>]</span><br><span class="line"></span><br><span class="line">df21_Ea_DS=(df21_Ea_DS.replace([<span class="string">&#x27;0-999&#x27;</span>,<span class="string">&#x27;$0-999&#x27;</span>,<span class="string">&#x27;0&#x27;</span>], <span class="string">&#x27;&lt; 999&#x27;</span>)</span><br><span class="line">          .replace(&#123;<span class="string">&#x27;&gt;$1,000,000&#x27;</span>:<span class="string">&#x27;200,000~&#x27;</span>&#125;)</span><br><span class="line">          .replace([<span class="string">&#x27;1,000-1,999&#x27;</span>,<span class="string">&#x27;2,000-2,999&#x27;</span>,<span class="string">&#x27;3,000-3,999&#x27;</span>, </span><br><span class="line">        <span class="string">&#x27;4,000-4,999&#x27;</span>,<span class="string">&#x27;5,000-7,499&#x27;</span>],<span class="string">&#x27;1,000-7,499&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;7,500-9,999&#x27;</span>,<span class="string">&#x27;10,000-14,999&#x27;</span>, <span class="string">&#x27;15,000-19,999&#x27;</span>, </span><br><span class="line">        <span class="string">&#x27;20,000-24,999&#x27;</span>],<span class="string">&#x27;7,500-24,999&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;25,000-29,999&#x27;</span>,<span class="string">&#x27;30,000-39,999&#x27;</span>, <span class="string">&#x27;40,000-49,999&#x27;</span>, </span><br><span class="line">        <span class="string">&#x27;50,000-59,999&#x27;</span>],<span class="string">&#x27;25,000-59,999&#x27;</span>) </span><br><span class="line">           .replace([<span class="string">&#x27;60,000-69,999&#x27;</span>, <span class="string">&#x27;70,000-79,999&#x27;</span>, <span class="string">&#x27;80,000-89,999&#x27;</span>, </span><br><span class="line">        <span class="string">&#x27;90,000-99,999&#x27;</span>], <span class="string">&#x27;60,000-99,999&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;100,000-124,999&#x27;</span>, <span class="string">&#x27;300,000-499,999&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;125,000-149,999&#x27;</span>, <span class="string">&#x27;125,000-149,999&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;150,000-199,999&#x27;</span>],<span class="string">&#x27;100,000-199,999&#x27;</span>)</span><br><span class="line">          .replace([<span class="string">&#x27;200,000-249,999&#x27;</span>, <span class="string">&#x27;250,000-299,999&#x27;</span>, </span><br><span class="line">        <span class="string">&#x27;1,000,000&#x27;</span>,<span class="string">&#x27;$500,000-999,999&#x27;</span>], <span class="string">&#x27;200,000~&#x27;</span>)</span><br><span class="line">           .replace(&#123;<span class="string">&#x27;I prefer not to answer&#x27;</span>:<span class="string">&#x27;etc&#x27;</span>&#125;).replace([<span class="string">&#x27;No formal education past high school&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">             .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Professional doctorate&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h4 id="replace"><a href="#replace" class="headerlink" title="replace.()"></a>replace.()</h4><ul>
<li>replace.()를 data를 뽑아 내면서 사용 하면, 편하다. </li>
<li>다음 project 부터는 그렇게 사용하자!</li>
<li>순차적으로 적용 하더라도 replace.()는 맨 앞에 사용하자.</li>
<li>data를 정제할 때 구획을 어디서 나누느냐는 <strong>presentation</strong>에 중요한 구성 요소이다.(강조할 부분이 바뀐다.)</li>
</ul>
<br>
<hr>
<br>


<h3 id="Ds의-연봉-뽑아내기"><a href="#Ds의-연봉-뽑아내기" class="headerlink" title="Ds의 연봉 뽑아내기"></a>Ds의 연봉 뽑아내기</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">df21_Ea_DS_= df21_Ea_DS.loc[:,[<span class="string">&#x27;Q5&#x27;</span>,<span class="string">&#x27;Q25&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q5&#x27;</span>:<span class="string">&#x27;Data_Scientist&#x27;</span>, <span class="string">&#x27;Q25&#x27;</span>:<span class="string">&#x27;Salary&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">df21_Ea_DS_= (df21_Ea_DS_.groupby([<span class="string">&#x27;Data_Scientist&#x27;</span>, <span class="string">&#x27;Salary&#x27;</span>]).size()</span><br><span class="line">           .reset_index()</span><br><span class="line">           .rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">             )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#Data Scientist</span></span><br><span class="line">df21_Ea_DS_Ds = df21_Ea_DS_[df21_Ea_DS_[<span class="string">&#x27;Data_Scientist&#x27;</span>] == <span class="string">&quot;Data Scientist&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">df21_Ea_DS_Ds[<span class="string">&#x27;%&#x27;</span>]=((df21_Ea_DS_Ds[<span class="string">&#x27;Count&#x27;</span>] / df21_Ea_DS_Ds[<span class="string">&#x27;Count&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># Salary21_Ea=Salary21_Ea.sort_values(by=&#x27;%&#x27;, ascending=False)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Machine Learning Engineer</span></span><br><span class="line">df21_Ea_DS_Mle = df21_Ea_DS_[df21_Ea_DS_[<span class="string">&#x27;Data_Scientist&#x27;</span>] == <span class="string">&quot;Machine Learning Engineer&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">df21_Ea_DS_Mle[<span class="string">&#x27;%&#x27;</span>]=((df21_Ea_DS_Mle[<span class="string">&#x27;Count&#x27;</span>] / df21_Ea_DS_Mle[<span class="string">&#x27;Count&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Research Scientist</span></span><br><span class="line">df21_Ea_DS_Rs = df21_Ea_DS_[df21_Ea_DS_[<span class="string">&#x27;Data_Scientist&#x27;</span>] == <span class="string">&quot;Research Scientist&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">df21_Ea_DS_Rs[<span class="string">&#x27;%&#x27;</span>]=((df21_Ea_DS_Rs[<span class="string">&#x27;Count&#x27;</span>] / df21_Ea_DS_Rs[<span class="string">&#x27;Count&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line">df21_Ea_DS_Rs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df21_Ea_DS_salary = pd.concat([df21_Ea_DS_Ds, df21_Ea_DS_Mle, df21_Ea_DS_Rs], ignore_index = <span class="literal">True</span>)</span><br><span class="line">df21_Ea_DS_salary= pd.pivot(df21_Ea_DS_salary, index = <span class="string">&quot;Salary&quot;</span>, columns = <span class="string">&#x27;Data_Scientist&#x27;</span>, values = <span class="string">&quot;%&quot;</span>).reset_index().fillna(<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">df21_Ea_DS_salary= df21_Ea_DS_salary.set_index(<span class="string">&quot;Salary&quot;</span>).reindex(sal_order)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>뽑아낸 data를 합쳐서 하나의 표로 만든다. </p>
<p>Excel에서 하는게 더 편하고 익숙하지만,<br>python을 능숙 하게 다룰 수 잇는 언젠가가 오지 않을까 싶다.<br><br><br></p>
<hr>

<h3 id="Ds의-연봉-bar-graph-만들기"><a href="#Ds의-연봉-bar-graph-만들기" class="headerlink" title="Ds의 연봉 bar graph 만들기"></a>Ds의 연봉 bar graph 만들기</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = df21_Ea_DS_salary.index, </span><br><span class="line">                     y = df21_Ea_DS_salary[<span class="string">&#x27;Data Scientist&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;Data Scientist&quot;</span>, </span><br><span class="line">                     text = df21_Ea_DS_salary[<span class="string">&#x27;Data Scientist&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = df21_Ea_DS_salary.index, </span><br><span class="line">                     y = df21_Ea_DS_salary[<span class="string">&#x27;Machine Learning Engineer&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;Machine Learning Engineer&quot;</span>, </span><br><span class="line">                     text = df21_Ea_DS_salary[<span class="string">&#x27;Machine Learning Engineer&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = df21_Ea_DS_salary.index, </span><br><span class="line">                     y = df21_Ea_DS_salary[<span class="string">&#x27;Research Scientist&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;Research Scientist&quot;</span>, </span><br><span class="line">                     text = df21_Ea_DS_salary[<span class="string">&#x27;Research Scientist&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.update_layout(barmode=<span class="string">&#x27;stack&#x27;</span>,</span><br><span class="line">                 showlegend=<span class="literal">True</span>,</span><br><span class="line">                 margin=<span class="built_in">dict</span>(pad=<span class="number">20</span>),</span><br><span class="line">                 height=<span class="number">500</span>,</span><br><span class="line">                 yaxis_title=<span class="literal">None</span>,</span><br><span class="line">                 xaxis_title=<span class="literal">None</span>,</span><br><span class="line">                 title_text=<span class="string">&quot;&lt;b&gt;21년 East Asia의 Data Scientist의 연봉&lt;/b&gt;&quot;</span>,</span><br><span class="line">                 title_x=<span class="number">0.5</span>,</span><br><span class="line">                 font=<span class="built_in">dict</span>(size=<span class="number">17</span>, color=<span class="string">&#x27;#000000&#x27;</span>),</span><br><span class="line">                 title_font_size=<span class="number">35</span>)</span><br><span class="line"></span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>


<p><img src="/../imeges/img/2021_DS_Salary.png" alt="2021_DS_Salary"></p>
<ul>
<li>[25,000-59,999] 이 구간이 East asia의 data scientist 들의 빈도가 가장 높은 연봉 구간이다. </li>
<li>[7,500-24,999] 이 구간을 없애버리고 싶지만 (편입), 우선은 그냥 두기로 한다. </li>
</ul>
<h3 id="HeatMap을-그려보자"><a href="#HeatMap을-그려보자" class="headerlink" title="HeatMap을 그려보자"></a>HeatMap을 그려보자</h3><h4 id="East-asia의-DS들의-연봉과-경력간의-관계를-알아보고자-한다"><a href="#East-asia의-DS들의-연봉과-경력간의-관계를-알아보고자-한다" class="headerlink" title="East asia의 DS들의 연봉과 경력간의 관계를 알아보고자 한다."></a>East asia의 DS들의 연봉과 경력간의 관계를 알아보고자 한다.</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">df21Ea_DS_ExSal = df21_Ea_DS.loc[:,[<span class="string">&#x27;Q6&#x27;</span>,<span class="string">&#x27;Q25&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q25&#x27;</span>:<span class="string">&#x27;Salary&#x27;</span>, <span class="string">&#x27;Q6&#x27;</span>:<span class="string">&#x27;Exp&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">df21Ea_DS_ExSal= (df21Ea_DS_ExSal.groupby([<span class="string">&#x27;Exp&#x27;</span>, <span class="string">&#x27;Salary&#x27;</span>]).size().unstack().fillna(<span class="number">0</span>).astype(<span class="string">&#x27;int64&#x27;</span>))</span><br><span class="line"><span class="comment"># df21Ea_DS_ExSal[&#x27;Exp&#x27;].unique()</span></span><br><span class="line">Exp_order=[<span class="string">&#x27;&lt; 1 years&#x27;</span>,<span class="string">&#x27;1-3 years&#x27;</span>,<span class="string">&#x27;3-5 years&#x27;</span>, <span class="string">&#x27;5-10 years&#x27;</span>, <span class="string">&#x27;10-20 years&#x27;</span>, <span class="string">&#x27;20+ years&#x27;</span>, <span class="string">&#x27;I have never written code&#x27;</span>]</span><br><span class="line"></span><br><span class="line">df21Ea_DS_ExSal</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">z = df21Ea_DS_ExSal</span><br><span class="line">z = z[sal_order]</span><br><span class="line">z = z.reindex(Exp_order)</span><br><span class="line"></span><br><span class="line">z_data = z.apply(<span class="keyword">lambda</span> x:np.<span class="built_in">round</span>(x/x.<span class="built_in">sum</span>()*<span class="number">100</span>, <span class="number">2</span>), axis = <span class="number">1</span>).to_numpy() <span class="comment"># convert to correlation matrix</span></span><br><span class="line">x = sal_order</span><br><span class="line">y = Exp_order</span><br><span class="line"></span><br><span class="line">fig = ff.create_annotated_heatmap(z_data, x = x, y = y, colorscale = <span class="string">&quot;sunset&quot;</span>)</span><br><span class="line">fig.update_layout( title_text=<span class="string">&quot;&lt;b&gt;Data Scientist의 경력과 연봉 &lt;/b&gt;&quot;</span>,</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">800</span>,</span><br><span class="line">                 title_x=<span class="number">0.5</span>,</span><br><span class="line">                  margin=<span class="built_in">dict</span>(l=<span class="number">200</span>, r=<span class="number">100</span>, t=<span class="number">200</span>, b=<span class="number">100</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>


<p><img src="/../imeges/img/2021_DS_SalExp.png" alt="2021_DS_SalExp"></p>
<br>

<ul>
<li>data Scientist의 경력과 연봉 상관관계를 Heatmap으로 그렸다. </li>
<li>정말 재미있는 사실은 [7,500-24,999], [60,000-99,999] 등의 구간이 비어 보인다. <ul>
<li>혹시 연봉이 반올림되는 구간이 아닐까 생각한다. </li>
<li>다음에 연봉 구획을 다시 나눈다면 이런 부분을 신경쓰면서 나누어야 할 듯.</li>
</ul>
</li>
<li>[&lt;999] 구간은 생각보다 비율이 높은 걸을 알 수 있는데 이는 survey의 오류인듯 하다. <ul>
<li>연봉인데 월급으로 생각했다던가… </li>
</ul>
</li>
</ul>
<p><br><br></p>
<hr>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">df21_Ea_degree = df21_Ea_DS[<span class="string">&#x27;Q4&#x27;</span>].value_counts().to_frame()</span><br><span class="line">degree = df21_Ea_degree.index</span><br><span class="line">values = df21_Ea_degree[<span class="string">&#x27;Q4&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;Degree&#x27;</span>, x=degree, y=values ,orientation=<span class="string">&#x27;v&#x27;</span>)])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">                 title_text=<span class="string">&quot;&lt;b&gt;21년 East Asia의 Data Scientist의 학력&lt;/b&gt;&quot;</span>,</span><br><span class="line">                 )</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>


<p><img src="/../imeges/img/2021_DS_Edu.png" alt="2021_DS_Edu"></p>
<p><br><br></p>
<hr>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">df21Ea_DS_EduSal= df21_Ea_DS.loc[:, [<span class="string">&#x27;Q4&#x27;</span>, <span class="string">&#x27;Q25&#x27;</span>]].rename(columns=&#123;<span class="string">&#x27;Q4&#x27;</span>:<span class="string">&#x27;Edu&#x27;</span>, <span class="string">&#x27;Q25&#x27;</span>:<span class="string">&#x27;Salary&#x27;</span>&#125;)</span><br><span class="line">df21Ea_DS_EduSal[<span class="string">&#x27;Edu&#x27;</span>].unique()</span><br><span class="line">Edu_order=[<span class="string">&#x27;~college&#x27;</span>, <span class="string">&#x27;Bachelor’s degree&#x27;</span>,<span class="string">&#x27;Master’s degree&#x27;</span>, <span class="string">&#x27;Doctoral degree~&#x27;</span>, <span class="string">&#x27;etc&#x27;</span>]</span><br><span class="line"></span><br><span class="line">df21Ea_DS_EduSal= (df21Ea_DS_EduSal.groupby([<span class="string">&#x27;Edu&#x27;</span>, <span class="string">&#x27;Salary&#x27;</span>]).size().unstack().fillna(<span class="number">0</span>).astype(<span class="string">&#x27;int64&#x27;</span>))</span><br><span class="line">df21Ea_DS_EduSal</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">z = df21Ea_DS_EduSal</span><br><span class="line">z = z[sal_order]</span><br><span class="line">z = z.reindex(Edu_order)</span><br><span class="line"></span><br><span class="line">z_data = z.apply(<span class="keyword">lambda</span> x:np.<span class="built_in">round</span>(x/x.<span class="built_in">sum</span>()*<span class="number">100</span>, <span class="number">2</span>), axis = <span class="number">1</span>).to_numpy() <span class="comment"># convert to correlation matrix</span></span><br><span class="line">x = sal_order</span><br><span class="line">y = Edu_order</span><br><span class="line"></span><br><span class="line">fig = ff.create_annotated_heatmap(z_data, x = x, y = y, colorscale = <span class="string">&quot;sunset&quot;</span>)</span><br><span class="line">fig.update_layout( title_text=<span class="string">&quot;&lt;b&gt;Data Scientist의 경력과 연봉 &lt;/b&gt;&quot;</span>,</span><br><span class="line">                  height=<span class="number">700</span>, width=<span class="number">800</span>,</span><br><span class="line">                 title_x=<span class="number">0.5</span>,</span><br><span class="line">                  margin=<span class="built_in">dict</span>(l=<span class="number">200</span>, r=<span class="number">100</span>, t=<span class="number">200</span>, b=<span class="number">100</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<p><img src="/../imeges/img/2021_DS_Exp_sal.png" alt="2021_DS_Exp_sal"></p>
<ul>
<li>East Asia의 ds들의 연봉은 거의 [25000-60000] 구간에 들어잇는 것 같다. </li>
<li>학위랑은 많이 상관 없어 보이며</li>
<li>심지어 200,000~$를 받는 학사학력자가 있다. 몹시 바람직하다. </li>
</ul>
<p><br><br></p>
<hr>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">df20_Ea_DS = df20_Ea[df20_Ea[<span class="string">&#x27;Q5&#x27;</span>].isin(Data_Scientist)]</span><br><span class="line">df19_Ea_DS =df19_Ea[df19_Ea[<span class="string">&#x27;Q5&#x27;</span>].isin(Data_Scientist)]</span><br><span class="line">df19Ea_DSLag = df19_Ea_DS.loc[:, [ <span class="string">&#x27;Q5&#x27;</span>, <span class="string">&#x27;Q19&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]]</span><br><span class="line">df19Ea_DSLag = df19Ea_DSLag.rename(columns = &#123;<span class="string">&#x27;Q19&#x27;</span>: <span class="string">&#x27;Language&#x27;</span>&#125;, inplace = <span class="literal">False</span>) <span class="comment"># To match with other datasets</span></span><br><span class="line">df20Ea_DSLag = df20_Ea_DS.loc[:, [ <span class="string">&#x27;Q5&#x27;</span>, <span class="string">&#x27;Q8&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].rename(columns = &#123;<span class="string">&#x27;Q8&#x27;</span>: <span class="string">&#x27;Language&#x27;</span>&#125;, inplace = <span class="literal">False</span>)</span><br><span class="line">df21Ea_DSLag = df21_Ea_DS.loc[:, [ <span class="string">&#x27;Q5&#x27;</span>, <span class="string">&#x27;Q8&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].rename(columns = &#123;<span class="string">&#x27;Q8&#x27;</span>: <span class="string">&#x27;Language&#x27;</span>&#125;, inplace = <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df3y_Ds_Lag = pd.concat([df19Ea_DSLag, df20Ea_DSLag, df21Ea_DSLag])</span><br><span class="line">df3y_Ds_Lag = df3y_Ds_Lag.groupby([<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;Language&#x27;</span>]).size().reset_index().rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">df3y_Ds_Lag</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2019</span></span><br><span class="line">dfLang_Ds_19 = df3y_Ds_Lag[df3y_Ds_Lag[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2019&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">dfLang_Ds_19[<span class="string">&#x27;percentage&#x27;</span>] = dfLang_Ds_19[<span class="string">&quot;Count&quot;</span>] / dfLang_Ds_19[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">dfLang_Ds_19[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(dfLang_Ds_19[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2020</span></span><br><span class="line">dfLang_Ds_20 = df3y_Ds_Lag[df3y_Ds_Lag[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2020&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">dfLang_Ds_20[<span class="string">&#x27;percentage&#x27;</span>] = dfLang_Ds_20[<span class="string">&quot;Count&quot;</span>] / dfLang_Ds_20[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">dfLang_Ds_20[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(dfLang_Ds_20[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2021</span></span><br><span class="line">dfLang_Ds_21 = df3y_Ds_Lag[df3y_Ds_Lag[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2021&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">dfLang_Ds_21[<span class="string">&#x27;percentage&#x27;</span>] = dfLang_Ds_21[<span class="string">&quot;Count&quot;</span>] / dfLang_Ds_21[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">dfLang_Ds_21[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(dfLang_Ds_21[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">dfLang_Ds_19=dfLang_Ds_19.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">dfLang_Ds_20=dfLang_Ds_20.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">dfLang_Ds_21=dfLang_Ds_21.sort_values(by=<span class="string">&#x27;%&#x27;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfLang_Ds_19[<span class="string">&#x27;Language&#x27;</span>], </span><br><span class="line">                     y = dfLang_Ds_19[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;2019&quot;</span>, </span><br><span class="line">                     text = dfLang_Ds_19[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfLang_Ds_20[<span class="string">&#x27;Language&#x27;</span>], </span><br><span class="line">                     y = dfLang_Ds_20[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;2020&quot;</span>, </span><br><span class="line">                     text = dfLang_Ds_20[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Bar(x = dfLang_Ds_21[<span class="string">&#x27;Language&#x27;</span>], </span><br><span class="line">                     y = dfLang_Ds_21[<span class="string">&#x27;%&#x27;</span>], </span><br><span class="line">                     name = <span class="string">&quot;2021&quot;</span>, </span><br><span class="line">                     text = dfLang_Ds_21[<span class="string">&#x27;%&#x27;</span>].astype(<span class="built_in">str</span>) + <span class="string">&quot;%&quot;</span>, </span><br><span class="line">                     textposition=<span class="string">&#x27;auto&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>


<p><img src="/../imeges/img/2021_DS_Langu.png" alt="2021_DS_Langu"></p>
<p>이 plot은 강사쌤의 도움을 많이 받았다. </p>
<p>2017, 2018년도도 넣고 싶었으나 data 찾는데 너무 시간이 많이 걸리는 것이</p>
<p>대회 마감이 얼마 남지 않은 이 시점에서 바람직 하지 못한 계획이라는 생각이 들어 </p>
<p>이쯤에서 만족 하기로 했다. </p>
<p><br><br><hr><br></p>
<p>비록 이 대회에서 우승 하지 못하겠지만,<br>나에게 있어 이번 대회는 의미가 크다. </p>
<p>내 경력에는 큰 의미가 없을지언정 ㅎㅎ</p>
<p><br><br><hr></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> matplotlib.pylab <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> plotly.io <span class="keyword">as</span> pio</span><br><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> plotly.figure_factory <span class="keyword">as</span> ff</span><br><span class="line"><span class="keyword">from</span> plotly.subplots <span class="keyword">import</span> make_subplots</span><br><span class="line"><span class="keyword">from</span> plotly.offline <span class="keyword">import</span> init_notebook_mode, iplot</span><br><span class="line">init_notebook_mode(connected=<span class="literal">True</span>)</span><br><span class="line">pio.templates.default = <span class="string">&quot;none&quot;</span></span><br><span class="line"><span class="comment"># import plotly.offline as py</span></span><br><span class="line"><span class="comment"># py.offline.init_notebook_mode()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">for</span> dirname, _, filenames <span class="keyword">in</span> os.walk(<span class="string">&#x27;/kaggle/input&#x27;</span>):</span><br><span class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> filenames:</span><br><span class="line">        <span class="built_in">print</span>(os.path.join(dirname, filename))</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#joypy를 쓰고 싶다면, sns에 싣어야 하는데 고민.</span></span><br><span class="line"><span class="comment">#pip install joypy</span></span><br><span class="line"><span class="comment"># import joypy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># fig,axes =  joypy.joyplot(df_duration, by=&#x27;year&#x27;,color=palette18, alpha=0.8)</span></span><br><span class="line"><span class="comment"># plt.title(&#x27;Time taken to complete the survey (in seconds)&#x27;, size=14, fontweight=&#x27;bold&#x27;)</span></span><br><span class="line"><span class="comment"># plt.show()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># https://ichi.pro/ko/joypyleul-sayonghayeo-joy-plot-mandeulgi-113466494282576</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ds_pc=df21_Ea_DS.loc[:, [<span class="string">&#x27;Q5&#x27;</span>,<span class="string">&#x27;Q25&#x27;</span>,<span class="string">&#x27;Q6&#x27;</span>,<span class="string">&#x27;Q4&#x27;</span>,<span class="string">&#x27;Q8&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">fig = px.parallel_categories(ds_pc, labels=&#123;<span class="string">&#x27;Q5&#x27;</span>:<span class="string">&#x27;Job&#x27;</span>, <span class="string">&#x27;Q25&#x27;</span>:<span class="string">&#x27;Salary&#x27;</span>, <span class="string">&#x27;Q6&#x27;</span>:<span class="string">&#x27;Experience&#x27;</span>, <span class="string">&#x27;Q4&#x27;</span>:<span class="string">&#x27;Degree&#x27;</span>, <span class="string">&#x27;Q8&#x27;</span>:<span class="string">&#x27;Language&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">fig.update_layout(hovermode = <span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;&lt;b&gt;        Data Scientist&lt;/b&gt;&#x27;</span>,title_font_size=<span class="number">20</span>,</span><br><span class="line">                  margin = <span class="built_in">dict</span>(t=<span class="number">120</span>, l=<span class="number">100</span>, r=<span class="number">10</span>, b=<span class="number">150</span>),</span><br><span class="line">                  height=<span class="number">600</span>, width=<span class="number">700</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-11-22T03:10:27.000Z" title="2021. 11. 22. 오후 12:10:27">2021-11-22</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2021-11-22T12:30:11.872Z" title="2021. 11. 22. 오후 9:30:11">2021-11-22</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/python-plotly/">python - plotly</a></span><span class="level-item">12분안에 읽기 (약 1782 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/22/kgg/kgg_EastAsia_varH/">Scatter with bar</a></h1><div class="content"><p>#Kgg 대회 준비</p>
<h2 id="Scatter와-bar가-함께-있는-Graph를-그려-보았다"><a href="#Scatter와-bar가-함께-있는-Graph를-그려-보았다" class="headerlink" title="Scatter와 bar가 함께 있는 Graph를 그려 보았다."></a>Scatter와 bar가 함께 있는 Graph를 그려 보았다.</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">fig = go.Figure()</span><br><span class="line">y=[<span class="built_in">len</span>(df17_Ea),<span class="built_in">len</span>(df18_Ea), <span class="built_in">len</span>(df19_Ea),<span class="built_in">len</span>(df20_Ea),<span class="built_in">len</span>(df21_Ea)]</span><br><span class="line">fig.add_trace(go.Bar(x=years, y=y,</span><br><span class="line">                base=<span class="number">0</span>,</span><br><span class="line">                marker_color=<span class="string">&#x27;#D9946C&#x27;</span>,</span><br><span class="line">                      yaxis = <span class="string">&quot;y1&quot;</span>,</span><br><span class="line">                name=<span class="string">&#x27;East Asia&#x27;</span>,</span><br><span class="line">                text= percent,</span><br><span class="line">                texttemplate=<span class="string">&#x27;%&#123;text&#125;  %&#x27;</span>, </span><br><span class="line">                  textposition=<span class="string">&#x27;outside&#x27;</span>,</span><br><span class="line">                  hovertemplate=<span class="string">&#x27;&lt;b&gt;KaggleUser&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Count&lt;/b&gt;: %&#123;y&#125;&#x27;</span>,</span><br><span class="line">                  textfont_size=<span class="number">14</span></span><br><span class="line">                ))</span><br><span class="line">fig.add_trace(</span><br><span class="line">    go.Scatter(name = <span class="string">&quot;World&quot;</span>,</span><br><span class="line">           x=years, </span><br><span class="line">            y=[<span class="built_in">len</span>(df17), <span class="built_in">len</span>(df18), <span class="built_in">len</span>(df19), <span class="built_in">len</span>(df20), <span class="built_in">len</span>(df21)],</span><br><span class="line">               marker_color=<span class="string">&#x27;#88BFBA&#x27;</span>,</span><br><span class="line">           mode = <span class="string">&#x27;lines+markers&#x27;</span>, <span class="comment"># please check option here</span></span><br><span class="line">           yaxis = <span class="string">&quot;y2&quot;</span>))</span><br><span class="line"></span><br><span class="line">fig.update_layout(yaxis  = <span class="built_in">dict</span>(title = <span class="string">&quot;KaggleUser in World&quot;</span>, showgrid = <span class="literal">False</span>, <span class="built_in">range</span>=[<span class="number">0</span>, <span class="built_in">len</span>(df21_Ea)*<span class="number">1.2</span>]),</span><br><span class="line">                  yaxis2 = <span class="built_in">dict</span>(title = <span class="string">&quot;KaggleUser in East Asia&quot;</span>, overlaying = <span class="string">&quot;y1&quot;</span>, side = <span class="string">&quot;right&quot;</span>, showgrid = <span class="literal">False</span>, </span><br><span class="line">                                zeroline = <span class="literal">False</span>, </span><br><span class="line">                                <span class="built_in">range</span>=[<span class="number">0</span>, <span class="built_in">len</span>(df21)*<span class="number">1.2</span>]), <span class="comment"># This code solves the different zero set but with same zero values.</span></span><br><span class="line">                  template = <span class="string">&quot;plotly_white&quot;</span>, height=<span class="number">500</span>, width=<span class="number">700</span>,)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<p><img src="../../imeges/kgg/vbar_scatters.png" alt="vbar_scatters"></p>
<h2 id="age-data-연도별로"><a href="#age-data-연도별로" class="headerlink" title="age data , 연도별로"></a>age data , 연도별로</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#age data 전처리</span></span><br><span class="line"><span class="comment"># age 뽑아오기</span></span><br><span class="line">Age21_W = df21.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Age20_W = df20.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Age19_W = df19.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Age18_W = df18.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q2&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q2&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#data 정제(한꺼번에 이름바꾸기)</span></span><br><span class="line">Age5y_W= pd.concat([Age21_W, Age20_W, Age19_W, Age18_W])</span><br><span class="line">Age5y_W= (Age5y_W.replace([<span class="string">&#x27;60-69&#x27;</span>, <span class="string">&#x27;70+&#x27;</span>, <span class="string">&#x27;70-79&#x27;</span>, <span class="string">&#x27;80+&#x27;</span>], <span class="string">&#x27;60+&#x27;</span>)</span><br><span class="line">           .replace([<span class="string">&#x27;22-24&#x27;</span>, <span class="string">&#x27;25-29&#x27;</span>], <span class="string">&#x27;22-29&#x27;</span>)</span><br><span class="line">           .replace([<span class="string">&#x27;30-34&#x27;</span>, <span class="string">&#x27;35-39&#x27;</span>], <span class="string">&#x27;30-39&#x27;</span>)</span><br><span class="line">            .replace([<span class="string">&#x27;40-44&#x27;</span>, <span class="string">&#x27;45-49&#x27;</span>], <span class="string">&#x27;40-49&#x27;</span>)</span><br><span class="line">        .replace([<span class="string">&#x27;50-54&#x27;</span>, <span class="string">&#x27;55-59&#x27;</span>], <span class="string">&#x27;50-59&#x27;</span>)</span><br><span class="line">           .groupby([<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;age&#x27;</span>])</span><br><span class="line">           .size()</span><br><span class="line">           .reset_index()</span><br><span class="line">           .rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">#percent data 넣기</span></span><br><span class="line">Age21_percent_W = Age5y_W[Age5y_W[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2021&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age21_percent_W[<span class="string">&#x27;percentage&#x27;</span>] = Age21_percent_W[<span class="string">&quot;Count&quot;</span>] / Age21_percent_W[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age21_percent_W[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age21_percent_W[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Age20_percent_W = Age5y_W[Age5y_W[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2020&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age20_percent_W[<span class="string">&#x27;percentage&#x27;</span>] = Age20_percent_W[<span class="string">&quot;Count&quot;</span>] / Age20_percent_W[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age20_percent_W[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age20_percent_W[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Age19_percent_W = Age5y_W[Age5y_W[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2019&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age19_percent_W[<span class="string">&#x27;percentage&#x27;</span>] = Age19_percent_W[<span class="string">&quot;Count&quot;</span>] / Age19_percent_W[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age19_percent_W[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age19_percent_W[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Age18_percent_W = Age5y_W[Age5y_W[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2018&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age18_percent_W[<span class="string">&#x27;percentage&#x27;</span>] = Age18_percent_W[<span class="string">&quot;Count&quot;</span>] / Age18_percent_W[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age18_percent_W[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age18_percent_W[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#data 완성</span></span><br><span class="line">Age5y_percent_W = pd.concat([Age18_percent_W, Age19_percent_W, Age20_percent_W, Age21_percent_W], ignore_index = <span class="literal">True</span>)</span><br><span class="line">Age5y_percent_W= pd.pivot(Age5y_percent_W, index = <span class="string">&quot;year&quot;</span>, columns = <span class="string">&#x27;age&#x27;</span>, values = <span class="string">&quot;%&quot;</span>).reset_index()</span><br><span class="line">Age5y_percent_W</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#age data 전처리</span></span><br><span class="line"><span class="comment"># age 뽑아오기</span></span><br><span class="line">Age21 = df21_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>, <span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Age20 = df20_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Age19 = df19_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line">Age18 = df18_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q2&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q2&#x27;</span>:<span class="string">&#x27;age&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#data 정제(한꺼번에 이름바꾸기)</span></span><br><span class="line">Age5y= pd.concat([Age21, Age20, Age19, Age18])</span><br><span class="line">Age5y= (Age5y.replace([<span class="string">&#x27;60-69&#x27;</span>, <span class="string">&#x27;70+&#x27;</span>, <span class="string">&#x27;70-79&#x27;</span>, <span class="string">&#x27;80+&#x27;</span>], <span class="string">&#x27;60+&#x27;</span>)</span><br><span class="line">           .replace([<span class="string">&#x27;22-24&#x27;</span>, <span class="string">&#x27;25-29&#x27;</span>], <span class="string">&#x27;22-29&#x27;</span>)</span><br><span class="line">           .replace([<span class="string">&#x27;30-34&#x27;</span>, <span class="string">&#x27;35-39&#x27;</span>], <span class="string">&#x27;30-39&#x27;</span>)</span><br><span class="line">            .replace([<span class="string">&#x27;40-44&#x27;</span>, <span class="string">&#x27;45-49&#x27;</span>], <span class="string">&#x27;40-49&#x27;</span>)</span><br><span class="line">        .replace([<span class="string">&#x27;50-54&#x27;</span>, <span class="string">&#x27;55-59&#x27;</span>], <span class="string">&#x27;50-59&#x27;</span>)</span><br><span class="line">           .groupby([<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;age&#x27;</span>])</span><br><span class="line">           .size()</span><br><span class="line">           .reset_index()</span><br><span class="line">           .rename(columns = &#123;<span class="number">0</span>:<span class="string">&quot;Count&quot;</span>&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">#percent data 넣기</span></span><br><span class="line">Age21_percent = Age5y[Age5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2021&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age21_percent[<span class="string">&#x27;percentage&#x27;</span>] = Age21_percent[<span class="string">&quot;Count&quot;</span>] / Age21_percent[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age21_percent[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age21_percent[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">Age21_percent</span><br><span class="line"></span><br><span class="line">Age20_percent = Age5y[Age5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2020&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age20_percent[<span class="string">&#x27;percentage&#x27;</span>] = Age20_percent[<span class="string">&quot;Count&quot;</span>] / Age20_percent[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age20_percent[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age20_percent[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">Age20_percent</span><br><span class="line"></span><br><span class="line">Age19_percent = Age5y[Age5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2019&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age19_percent[<span class="string">&#x27;percentage&#x27;</span>] = Age19_percent[<span class="string">&quot;Count&quot;</span>] / Age19_percent[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age19_percent[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age19_percent[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">Age19_percent</span><br><span class="line"></span><br><span class="line">Age18_percent = Age5y[Age5y[<span class="string">&#x27;year&#x27;</span>] == <span class="string">&quot;2018&quot;</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">Age18_percent[<span class="string">&#x27;percentage&#x27;</span>] = Age18_percent[<span class="string">&quot;Count&quot;</span>] / Age18_percent[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">Age18_percent[<span class="string">&#x27;%&#x27;</span>] = np.<span class="built_in">round</span>(Age18_percent[<span class="string">&#x27;percentage&#x27;</span>] * <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">Age18_percent</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#data 완성</span></span><br><span class="line">Age5y_percent = pd.concat([Age18_percent, Age19_percent, Age20_percent, Age21_percent], ignore_index = <span class="literal">True</span>)</span><br><span class="line">Age5y_percent= pd.pivot(Age5y_percent, index = <span class="string">&quot;year&quot;</span>, columns = <span class="string">&#x27;age&#x27;</span>, values = <span class="string">&quot;%&quot;</span>).reset_index()</span><br><span class="line">Age5y_percent</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Graph-그리기-1-World"><a href="#Graph-그리기-1-World" class="headerlink" title="Graph 그리기 _1_World"></a>Graph 그리기 _1_World</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Age5y_percent_order = Age5y_percent_W[<span class="string">&#x27;year&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Age5y_order = Age5y_W[<span class="string">&#x27;age&#x27;</span>].unique().tolist()</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent_W[<span class="string">&#x27;18-21&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;18-21&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent_W[<span class="string">&#x27;22-29&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;20s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span></span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent_W[<span class="string">&#x27;30-39&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;30s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent_W[<span class="string">&#x27;40-49&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;40s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span></span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent_W[<span class="string">&#x27;50-59&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;50s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span></span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent_W[<span class="string">&#x27;60+&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;60s&lt;&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.update_layout(yaxis_range = (<span class="number">0</span>, <span class="number">100</span>), height=<span class="number">500</span>, width=<span class="number">600</span>,</span><br><span class="line">                 title_text=<span class="string">&quot;&lt;b&gt;in world 나이의 변화&lt;/b&gt;&quot;</span>,</span><br><span class="line">                 title_x=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>


<p><img src="../../imeges/kgg/AgePerYears_Inwo.png" alt="AgePerYears_Inwo"></p>
<h2 id="Graph-그리기-1-in-East-Asia"><a href="#Graph-그리기-1-in-East-Asia" class="headerlink" title="Graph 그리기 _1_in East Asia"></a>Graph 그리기 _1_in East Asia</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Age5y_percent_order = Age5y_percent[<span class="string">&#x27;year&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Age5y_order = Age5y[<span class="string">&#x27;age&#x27;</span>].unique().tolist()</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent[<span class="string">&#x27;18-21&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&#x27;18-21&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent[<span class="string">&#x27;22-29&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;20s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span></span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent[<span class="string">&#x27;30-39&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;30s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent[<span class="string">&#x27;40-49&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;40s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span></span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent[<span class="string">&#x27;50-59&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;50s&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span></span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x = Age5y_percent_order, </span><br><span class="line">    y = Age5y_percent[<span class="string">&#x27;60+&#x27;</span>].tolist(), </span><br><span class="line">    mode = <span class="string">&quot;lines&quot;</span>, </span><br><span class="line">    name = <span class="string">&quot;60s&lt;&quot;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(width = <span class="number">1</span>),</span><br><span class="line">    stackgroup = <span class="string">&quot;one&quot;</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.update_layout(yaxis_range = (<span class="number">0</span>, <span class="number">100</span>), height=<span class="number">500</span>, width=<span class="number">600</span>,</span><br><span class="line">                 title_text=<span class="string">&quot;&lt;b&gt;East Asia 나이의 변화&lt;/b&gt;&quot;</span>,</span><br><span class="line">                 title_x=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>


<p><img src="../../imeges/kgg/AgePerYears_InEa.png" alt="AgePerYears_InEa"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 연도별 나이 </span></span><br><span class="line">df21Age_Ea = df21_Ea.loc[:,[<span class="string">&#x27;Q3&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>]].reset_index().rename(columns=&#123;<span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;East_Asia&#x27;</span>, <span class="string">&#x27;Q1&#x27;</span>:<span class="string">&#x27;2021&#x27;</span>&#125;).fillna(<span class="string">&#x27;etc&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 연령-지역 %</span></span><br><span class="line">dfKo_Age21= df21Age_Ea[df21Age_Ea[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&#x27;South Korea&#x27;</span>]</span><br><span class="line">dfKo_Age21_per=dfKo_Age21[<span class="string">&#x27;2021&#x27;</span>].value_counts().to_frame().reset_index()</span><br><span class="line">dfKo_Age21_per[<span class="string">&#x27;South Korea&#x27;</span>]=((dfKo_Age21_per[<span class="string">&#x27;2021&#x27;</span>] / <span class="built_in">len</span>(dfKo_Age21))*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">dfTw_Age21= df21Age_Ea[df21Age_Ea[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&#x27;Taiwan&#x27;</span>]</span><br><span class="line">dfTw_Age21_per=dfTw_Age21[<span class="string">&#x27;2021&#x27;</span>].value_counts().to_frame().reset_index()</span><br><span class="line">dfTw_Age21_per[<span class="string">&#x27;Taiwan&#x27;</span>]=((dfTw_Age21_per[<span class="string">&#x27;2021&#x27;</span>] / <span class="built_in">len</span>(dfTw_Age21))*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line">dfTw_Age21_per</span><br><span class="line"></span><br><span class="line">dfCh_Age21= df21Age_Ea[df21Age_Ea[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&#x27;China&#x27;</span>]</span><br><span class="line">dfCh_Age21_per=dfCh_Age21[<span class="string">&#x27;2021&#x27;</span>].value_counts().to_frame().reset_index()</span><br><span class="line">dfCh_Age21_per[<span class="string">&#x27;China&#x27;</span>]=((dfCh_Age21_per[<span class="string">&#x27;2021&#x27;</span>] / <span class="built_in">len</span>(dfCh_Age21))*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line">dfCh_Age21_per</span><br><span class="line"></span><br><span class="line">df21Age_Ea.head()</span><br><span class="line">dfJp_Age21= df21Age_Ea[df21Age_Ea[<span class="string">&#x27;East_Asia&#x27;</span>]==<span class="string">&#x27;Japan&#x27;</span>]</span><br><span class="line">dfJp_Age21_per=dfJp_Age21[<span class="string">&#x27;2021&#x27;</span>].value_counts().to_frame().reset_index()</span><br><span class="line">dfJp_Age21_per[<span class="string">&#x27;Japan&#x27;</span>]=((dfJp_Age21_per[<span class="string">&#x27;2021&#x27;</span>] / <span class="built_in">len</span>(dfJp_Age21))*<span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line">dfJp_Age21_per</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#g 그리기(heatMap)</span></span><br><span class="line">merge1= pd.merge(dfKo_Age21_per,dfTw_Age21_per, on=<span class="string">&#x27;index&#x27;</span>, how=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line">merge2= pd.merge(dfCh_Age21_per,dfJp_Age21_per, on=<span class="string">&#x27;index&#x27;</span>, how=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line">merge= pd.merge(merge1,merge2, on=<span class="string">&#x27;index&#x27;</span>, how=<span class="string">&#x27;outer&#x27;</span>).fillna(<span class="number">0</span>).sort_values(by=[<span class="string">&#x27;index&#x27;</span>],ascending=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">merge.iloc[:,[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>]]</span><br><span class="line">merge.iloc[:,[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>]].to_numpy()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Heatmap(</span><br><span class="line">                   z=merge.iloc[:,[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>]].to_numpy(),</span><br><span class="line">                   x=[<span class="string">&#x27;South Korea&#x27;</span>,<span class="string">&#x27;Taiwan&#x27;</span>,<span class="string">&#x27;China&#x27;</span>,<span class="string">&#x27;Japan&#x27;</span>],</span><br><span class="line">                   y=merge.sort_values(by=[<span class="string">&#x27;index&#x27;</span>],ascending=<span class="literal">True</span>)[<span class="string">&#x27;index&#x27;</span>].tolist(),</span><br><span class="line">                   hoverongaps = <span class="literal">False</span>,</span><br><span class="line">                   opacity=<span class="number">1.0</span>, xgap=<span class="number">2.5</span>, ygap=<span class="number">2.5</span>, colorscale=<span class="string">&#x27;orrd&#x27;</span>),</span><br><span class="line">                   )</span><br><span class="line"></span><br><span class="line">fig.update_layout( height=<span class="number">500</span>, width=<span class="number">600</span>,</span><br><span class="line">                 title_text=<span class="string">&quot;&lt;b&gt;East Asia 나이 2021&lt;/b&gt;&quot;</span>,</span><br><span class="line">                 title_x=<span class="number">0.5</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>


<p><img src="../../imeges/kgg/HeatMap_Eastandage.png" alt="HeatMap_Eastandage"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#데이터 전처리</span></span><br><span class="line">df21_Ea_degree=(df21_Ea[<span class="string">&#x27;Q4&#x27;</span>].replace([<span class="string">&#x27;No formal education past high school&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">             .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Professional doctorate&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>).value_counts().to_frame().rename(columns=&#123;<span class="string">&#x27;Q4&#x27;</span>:<span class="string">&#x27;2021&#x27;</span>&#125;))</span><br><span class="line">df20_Ea_degree=(df20_Ea[<span class="string">&#x27;Q4&#x27;</span>].replace([<span class="string">&#x27;No formal education past high school&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">             .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Professional doctorate&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>).value_counts().to_frame().rename(columns=&#123;<span class="string">&#x27;Q4&#x27;</span>:<span class="string">&#x27;2020&#x27;</span>&#125;))</span><br><span class="line">df19_Ea_degree=(df19_Ea[<span class="string">&#x27;Q4&#x27;</span>].replace([<span class="string">&#x27;No formal education past high school&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">             .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Professional doctorate&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>).value_counts().to_frame().rename(columns=&#123;<span class="string">&#x27;Q4&#x27;</span>:<span class="string">&#x27;2019&#x27;</span>&#125;))</span><br><span class="line">df18_Ea_degree=(df18_Ea[<span class="string">&#x27;Q4&#x27;</span>].replace([<span class="string">&#x27;No formal education past high school&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">             .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Professional doctorate&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>).value_counts().to_frame().rename(columns=&#123;<span class="string">&#x27;Q4&#x27;</span>:<span class="string">&#x27;2018&#x27;</span>&#125;))</span><br><span class="line">df17_Ea_degree=(df17_Ea[<span class="string">&#x27;FormalEducation&#x27;</span>].replace([<span class="string">&#x27;No formal education past high school&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Some college/university study without earning a bachelor’s degree&#x27;</span>],<span class="string">&#x27;~college&#x27;</span>)</span><br><span class="line">             .replace([<span class="string">&#x27;Doctoral degree&#x27;</span>,</span><br><span class="line">                       <span class="string">&#x27;Professional doctorate&#x27;</span>],<span class="string">&#x27;Doctoral degree~&#x27;</span>)</span><br><span class="line">                .value_counts().to_frame()</span><br><span class="line">                .rename(columns=&#123;<span class="string">&#x27;FormalEducation&#x27;</span>:<span class="string">&#x27;2017&#x27;</span>&#125;)</span><br><span class="line">                .rename(index = &#123;<span class="string">&#x27;I did not complete any formal education past high school&#x27;</span>:<span class="string">&#x27;No formal education past high school&#x27;</span>&#125;))</span><br><span class="line"></span><br><span class="line">concat1 = pd.concat([df21_Ea_degree,df20_Ea_degree],axis=<span class="number">1</span>, join=<span class="string">&#x27;outer&#x27;</span>)  </span><br><span class="line">concat2 = pd.concat([df19_Ea_degree,df18_Ea_degree],axis=<span class="number">1</span>, join=<span class="string">&#x27;outer&#x27;</span>)  </span><br><span class="line">concat3 = pd.concat([concat1,concat2],axis=<span class="number">1</span>, join=<span class="string">&#x27;outer&#x27;</span>) </span><br><span class="line"></span><br><span class="line">df21_Ea_degree_yearly_=concat3.join(df17_Ea_degree).fillna(<span class="number">0</span>).transpose() <span class="comment">#.transpose() 행 열 바꾸기</span></span><br><span class="line">df21_Ea_degree_yearly=df21_Ea_degree_yearly_.stack().to_frame().reset_index().rename(columns=&#123;<span class="string">&#x27;level_0&#x27;</span>:<span class="string">&#x27;year&#x27;</span>,<span class="string">&#x27;level_1&#x27;</span>:<span class="string">&#x27;degree&#x27;</span>,<span class="number">0</span>:<span class="string">&#x27;value&#x27;</span>&#125;)</span><br><span class="line">df21_Ea_degree_yearly</span><br><span class="line"></span><br><span class="line"><span class="comment">#그래프 그리기</span></span><br><span class="line">fig = px.sunburst(df21_Ea_degree_yearly, path=[<span class="string">&#x27;year&#x27;</span>,<span class="string">&#x27;degree&#x27;</span>], values=df21_Ea_degree_yearly[<span class="string">&#x27;value&#x27;</span>].tolist())</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>


<p><img src="../../imeges/kgg/piepie_G.png" alt="piepie_G"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-11-19T09:10:27.000Z" title="2021. 11. 19. 오후 6:10:27">2021-11-19</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2021-11-19T09:18:40.319Z" title="2021. 11. 19. 오후 6:18:40">2021-11-19</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/python-plotly/">python - plotly</a></span><span class="level-item">1분안에 읽기 (약 206 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/19/blog/columnPOP/">Column 뽑아오기</a></h1><div class="content"><p>-python: for문으로 뽑아오기 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> column <span class="keyword">in</span> df17_Ea:</span><br><span class="line"><span class="meta">... </span>  <span class="built_in">print</span>(column)</span><br><span class="line"></span><br><span class="line">df.coulumns</span><br><span class="line"><span class="comment">#이건 column 이름 나옴</span></span><br></pre></td></tr></table></figure>
<p><img src="/imeges/kgg/Q17_column.png" alt="Q17_column"></p>
<p>경력은  Tenure 인거 같다. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df18.loc[:<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<p>Question을 다 삭제 해 버렸는데</p>
<p>질문 정히 해 놓은 것이 사라지면 어쩔 수 없이 다시 불러와야지 </p>
<p><img src="/imeges/kgg/Q17_Question.png" alt="Q17_Question"></p>
<h2 id="판다스-옵션"><a href="#판다스-옵션" class="headerlink" title="판다스 옵션"></a>판다스 옵션</h2><ul>
<li>pandas 옵션을 조정하여 생략없이 긴 data를 볼 수 있다. </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.describe_option()</span><br></pre></td></tr></table></figure>


<p><img src="/imeges/kgg/PandasOPtion.png" alt="PandasOPtion"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.set_option(<span class="string">&#x27;display.max_seq_items&#x27;</span>, <span class="literal">None</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># row 생략 없이 출력</span></span><br><span class="line">pd.set_option(<span class="string">&#x27;display.max_rows&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line"><span class="comment"># col 생략 없이 출력</span></span><br><span class="line">pd.set_option(<span class="string">&#x27;display.max_columns&#x27;</span>, <span class="literal">None</span>)</span><br></pre></td></tr></table></figure>


<p>경력 : [Tenure] in df17, [Q8] in df18, [Q15] in 19, [Q6] in 20, [Q6]in 21<br>연봉 : [Q9] in df18, [Q10] in df19, [Q24] in 20, [Q25]in 21<br>*2017연봉의 경우 ‘CompensationAmount’ 컬럼에 있지만, 통화가 다르므로 하지 말자. </p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-11-19T03:10:27.000Z" title="2021. 11. 19. 오후 12:10:27">2021-11-19</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2021-11-19T09:17:08.401Z" title="2021. 11. 19. 오후 6:17:08">2021-11-19</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/python-plotly/">python - plotly</a></span><span class="level-item">10분안에 읽기 (약 1562 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/19/kgg/Kgg_compt/">kgg compete data 정리</a></h1><div class="content"><h2 id="data-Import"><a href="#data-Import" class="headerlink" title="data Import"></a>data Import</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> matplotlib.pylab <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> plotly.io <span class="keyword">as</span> pio</span><br><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> plotly.figure_factory <span class="keyword">as</span> ff</span><br><span class="line"><span class="keyword">from</span> plotly.subplots <span class="keyword">import</span> make_subplots</span><br><span class="line"><span class="keyword">from</span> plotly.offline <span class="keyword">import</span> init_notebook_mode, iplot</span><br><span class="line">init_notebook_mode(connected=<span class="literal">True</span>)</span><br><span class="line">pio.templates.default = <span class="string">&quot;none&quot;</span></span><br><span class="line"><span class="comment"># import plotly.offline as py</span></span><br><span class="line"><span class="comment"># py.offline.init_notebook_mode()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">for</span> dirname, _, filenames <span class="keyword">in</span> os.walk(<span class="string">&#x27;/kaggle/input&#x27;</span>):</span><br><span class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> filenames:</span><br><span class="line">        <span class="built_in">print</span>(os.path.join(dirname, filename))</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line">df17= pd.read_csv(<span class="string">&quot;/kaggle/input/kaggle-survey-2017/multipleChoiceResponses.csv&quot;</span>, encoding=<span class="string">&quot;ISO-8859-1&quot;</span>)</span><br><span class="line">df18= pd.read_csv(<span class="string">&quot;/kaggle/input/kaggle-survey-2018/multipleChoiceResponses.csv&quot;</span>, )</span><br><span class="line">df19= pd.read_csv(<span class="string">&quot;/kaggle/input/kaggle-survey-2019/multiple_choice_responses.csv&quot;</span>, )</span><br><span class="line">df20= pd.read_csv(<span class="string">&quot;/kaggle/input/kaggle-survey-2020/kaggle_survey_2020_responses.csv&quot;</span>, )</span><br><span class="line">df21= pd.read_csv(<span class="string">&quot;/kaggle/input/kaggle-survey-2021/kaggle_survey_2021_responses.csv&quot;</span>, )</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="질문-뽑는-법"><a href="#질문-뽑는-법" class="headerlink" title="질문 뽑는 법"></a>질문 뽑는 법</h2><p>18년도의 질문 frame을 확인 해 보자 .</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">questions = df18.iloc[<span class="number">0</span>, :].T</span><br><span class="line">questions</span><br></pre></td></tr></table></figure>


<p><img src="/imeges/kgg/Question.png" alt="Question"></p>
<h2 id="질문-제거하기"><a href="#질문-제거하기" class="headerlink" title="질문 제거하기"></a>질문 제거하기</h2><p>이후 data에 질문이 들어가면 안되기 때문에 질문을 제거 해 준다. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df17= df17.iloc[<span class="number">1</span>:, :].replace(<span class="string">&quot;People &#x27;s Republic of China&quot;</span>,<span class="string">&#x27;China&#x27;</span>)</span><br><span class="line">df18= df18.iloc[<span class="number">1</span>:, :].replace(<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;South Korea&#x27;</span>)</span><br><span class="line">df19= df19.iloc[<span class="number">1</span>:, :].replace(<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;South Korea&#x27;</span>)</span><br><span class="line">df20= df20.iloc[<span class="number">1</span>:, :].replace(<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;South Korea&#x27;</span>)</span><br><span class="line">df21= df21.iloc[<span class="number">1</span>:, :]</span><br></pre></td></tr></table></figure>

<h2 id="연도-추가하기"><a href="#연도-추가하기" class="headerlink" title="연도 추가하기"></a>연도 추가하기</h2><p>이후 연도별  data를 뽑기 위해서 data set에 연도를 추가 해 준다. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df21[<span class="string">&#x27;year&#x27;</span>] = <span class="string">&#x27;2021&#x27;</span></span><br><span class="line">df20[<span class="string">&#x27;year&#x27;</span>] = <span class="string">&#x27;2020&#x27;</span></span><br><span class="line">df19[<span class="string">&#x27;year&#x27;</span>] = <span class="string">&#x27;2019&#x27;</span></span><br><span class="line">df18[<span class="string">&#x27;year&#x27;</span>] = <span class="string">&#x27;2018&#x27;</span></span><br><span class="line">df17[<span class="string">&#x27;year&#x27;</span>] = <span class="string">&#x27;2017&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="동아시아와-세계-나누기"><a href="#동아시아와-세계-나누기" class="headerlink" title="동아시아와 세계 나누기"></a>동아시아와 세계 나누기</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df21[<span class="string">&#x27;Q1&#x27;</span>].unique()</span><br></pre></td></tr></table></figure>

<p><img src="/imeges/kgg/unique.png" alt="unique"></p>
<p><img src="/imeges/kgg/unique_Q3.png" alt="unique_Q3"></p>
<p>[Q3]에 나라가 있다. </p>
<p>나라를 확인하여 East Asia만 region column을 새로 만들어 분류 해 준다. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">EastAsia17 = [<span class="string">&#x27;China&#x27;</span>,<span class="string">&quot;People &#x27;s Republic of China&quot;</span>, <span class="string">&#x27;Taiwan&#x27;</span>, <span class="string">&#x27;South Korea&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>]</span><br><span class="line">EastAsia18= [<span class="string">&#x27;China&#x27;</span>, <span class="string">&#x27;South Korea&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>, <span class="string">&#x27;Republic of Korea&#x27;</span>] </span><br><span class="line">EastAsia19 = [<span class="string">&#x27;China&#x27;</span>,<span class="string">&#x27;Taiwan&#x27;</span>, <span class="string">&#x27;South Korea&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>, <span class="string">&#x27;Republic of Korea&#x27;</span>]</span><br><span class="line">EastAsia20 = [<span class="string">&#x27;China&#x27;</span>,<span class="string">&#x27;Taiwan&#x27;</span>, <span class="string">&#x27;South Korea&#x27;</span>,<span class="string">&#x27;Republic of Korea&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>]</span><br><span class="line">EastAsia21 = [<span class="string">&#x27;China&#x27;</span>,<span class="string">&#x27;Taiwan&#x27;</span>, <span class="string">&#x27;South Korea&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>]</span><br><span class="line">EastAsia = [<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;China&#x27;</span>,<span class="string">&#x27;Taiwan&#x27;</span>, <span class="string">&#x27;South Korea&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>, <span class="string">&quot;People &#x27;s Republic of China&quot;</span> ]</span><br><span class="line"></span><br><span class="line">df21_Ea = df21[df21[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df21_Wo = df21[~df21[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df21[<span class="string">&#x27;region&#x27;</span>]=[<span class="string">&quot;EastAsia&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> EastAsia <span class="keyword">else</span> <span class="string">&quot;World&quot;</span> <span class="keyword">for</span> x <span class="keyword">in</span> df21[<span class="string">&#x27;Q3&#x27;</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df20_Ea = df20[df20[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df20_Wo = df20[~df20[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df20[<span class="string">&#x27;region&#x27;</span>]=[<span class="string">&quot;EastAsia&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> EastAsia <span class="keyword">else</span> <span class="string">&quot;World&quot;</span> <span class="keyword">for</span> x <span class="keyword">in</span> df20[<span class="string">&#x27;Q3&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">df19_Ea = df19[df19[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df19_Wo = df19[~df19[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df19[<span class="string">&#x27;region&#x27;</span>]=[<span class="string">&quot;EastAsia&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> EastAsia <span class="keyword">else</span> <span class="string">&quot;World&quot;</span> <span class="keyword">for</span> x <span class="keyword">in</span> df19[<span class="string">&#x27;Q3&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">df18_Ea = df18[df18[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df18_Wo = df18[~df18[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df18[<span class="string">&#x27;region&#x27;</span>]=[<span class="string">&quot;EastAsia&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> EastAsia <span class="keyword">else</span> <span class="string">&quot;World&quot;</span> <span class="keyword">for</span> x <span class="keyword">in</span> df18[<span class="string">&#x27;Q3&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">df17_Ea = df17[df17[<span class="string">&#x27;Country&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df17_Wo = df17[~df17[<span class="string">&#x27;Country&#x27;</span>].isin(EastAsia)]</span><br><span class="line">df17[<span class="string">&#x27;region&#x27;</span>]=[<span class="string">&quot;EastAsia&quot;</span> <span class="keyword">if</span> x <span class="keyword">in</span> EastAsia <span class="keyword">else</span> <span class="string">&quot;World&quot;</span> <span class="keyword">for</span> x <span class="keyword">in</span> df17[<span class="string">&#x27;Country&#x27;</span>]]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="lng-을-이용하여-그래프-그리기"><a href="#lng-을-이용하여-그래프-그리기" class="headerlink" title="lng()을 이용하여 % 그래프 그리기"></a>lng()을 이용하여 % 그래프 그리기</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 수치 bar g = 사용자 수 비교.</span></span><br><span class="line"></span><br><span class="line">Ea21 = <span class="built_in">len</span>(df21_Ea)</span><br><span class="line">Wo21 = <span class="built_in">len</span>(df21) - <span class="built_in">len</span>(df21_Ea)</span><br><span class="line"></span><br><span class="line">Ea20 = <span class="built_in">len</span>(df20_Ea)</span><br><span class="line">Wo20 = <span class="built_in">len</span>(df20) - <span class="built_in">len</span>(df20_Ea)</span><br><span class="line"></span><br><span class="line">Ea19 = <span class="built_in">len</span>(df19_Ea)</span><br><span class="line">Wo19 = <span class="built_in">len</span>(df19) - <span class="built_in">len</span>(df19_Ea)</span><br><span class="line"></span><br><span class="line">Ea18 = <span class="built_in">len</span>(df18_Ea)</span><br><span class="line">Wo18 = <span class="built_in">len</span>(df18) -  <span class="built_in">len</span>(df18_Ea)</span><br><span class="line"></span><br><span class="line">Ea17 = <span class="built_in">len</span>(df17_Ea)</span><br><span class="line">Wo17 = <span class="built_in">len</span>(df17) - <span class="built_in">len</span>(df17_Ea)</span><br><span class="line"></span><br><span class="line">years = [<span class="string">&#x27;2017&#x27;</span>,<span class="string">&#x27;2018&#x27;</span>,<span class="string">&#x27;2019&#x27;</span>,<span class="string">&#x27;2020&#x27;</span>, <span class="string">&#x27;2021&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">percent</span> (<span class="params">a, b</span>):</span></span><br><span class="line">    result =a/(a+b)*<span class="number">100</span></span><br><span class="line">    result = np.<span class="built_in">round</span>(result)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">percentR</span> (<span class="params">b, a</span>):</span></span><br><span class="line">    result =a/(a+b)*<span class="number">100</span></span><br><span class="line">    result = np.<span class="built_in">round</span>(result)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">percent = [percent(Ea17, Wo17), percent(Ea18, Wo18), percent(Ea19, Wo19), </span><br><span class="line">                                                 percent(Ea20, Wo20), percent(Ea21, Wo21)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># percentR = [percentR(Ea17, Wo17), percentR(Ea18, Wo18), percentR(Ea19, Wo19), </span></span><br><span class="line"><span class="comment">#                                                  percentR(Ea20, Wo20), percentR(Ea21, Wo21)]</span></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Bar(x=years, y=[<span class="built_in">len</span>(df17), <span class="built_in">len</span>(df18), <span class="built_in">len</span>(df19), <span class="built_in">len</span>(df20), <span class="built_in">len</span>(df21)],</span><br><span class="line">                base=[-<span class="built_in">len</span>(df17), -<span class="built_in">len</span>(df18), -<span class="built_in">len</span>(df19), -<span class="built_in">len</span>(df20), -<span class="built_in">len</span>(df21)],</span><br><span class="line">                marker_color=<span class="string">&#x27;#88BFBA&#x27;</span>,</span><br><span class="line">                name=<span class="string">&#x27;World&#x27;</span></span><br><span class="line">                ))</span><br><span class="line">fig.add_trace(go.Bar(x=years, y=[Ea17, Ea18, Ea19, Ea20, Ea21],</span><br><span class="line">                base=<span class="number">0</span>,</span><br><span class="line">                marker_color=<span class="string">&#x27;#D9946C&#x27;</span>,</span><br><span class="line">                name=<span class="string">&#x27;East Asia&#x27;</span>,</span><br><span class="line">                text= percent,</span><br><span class="line">                texttemplate=<span class="string">&#x27;%&#123;text&#125;  %&#x27;</span>, </span><br><span class="line">                  textposition=<span class="string">&#x27;outside&#x27;</span>,</span><br><span class="line">                  hovertemplate=<span class="string">&#x27;&lt;b&gt;KaggleUser&lt;/b&gt;: %&#123;x&#125;&lt;br&gt;&#x27;</span>+</span><br><span class="line">                                <span class="string">&#x27;&lt;b&gt;Count&lt;/b&gt;: %&#123;y&#125;&#x27;</span>,</span><br><span class="line">                  textfont_size=<span class="number">14</span></span><br><span class="line">                ))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>


<p>다음과 같은 G가 그려 진다.</p>
<p><img src="/imeges/kgg/EastAsia_Kggcount.png" alt="EastAsia_Kggcount"></p>
<h2 id="East-asia와-world비교-kgg-사용자수"><a href="#East-asia와-world비교-kgg-사용자수" class="headerlink" title="East asia와 world비교 _ kgg 사용자수"></a>East asia와 world비교 _ kgg 사용자수</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#data 정제하기</span></span><br><span class="line">total17 = (</span><br><span class="line">    df17[<span class="string">&#x27;region&#x27;</span>]</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;respodents&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index()</span><br><span class="line">)</span><br><span class="line">total18 = (</span><br><span class="line">    df18[<span class="string">&#x27;region&#x27;</span>]</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;respodents&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index()</span><br><span class="line">)</span><br><span class="line">total19 = (</span><br><span class="line">    df19[<span class="string">&#x27;region&#x27;</span>]</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;respodents&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index()</span><br><span class="line">)</span><br><span class="line">total20 = (</span><br><span class="line">    df20[<span class="string">&#x27;region&#x27;</span>]</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;respodents&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index()</span><br><span class="line">)</span><br><span class="line">total21 = (</span><br><span class="line">    df21[<span class="string">&#x27;region&#x27;</span>]</span><br><span class="line">    .value_counts()</span><br><span class="line">    .to_frame()</span><br><span class="line">    .reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;region&#x27;</span>:<span class="string">&#x27;respodents&#x27;</span>&#125;)</span><br><span class="line">    .groupby(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    .<span class="built_in">sum</span>()</span><br><span class="line">    .reset_index()</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">colors = [<span class="string">&#x27;#88BFBA&#x27;</span>,<span class="string">&#x27;#F28705&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create subplots: use &#x27;domain&#x27; type for Pie subplot</span></span><br><span class="line">fig = make_subplots(rows=<span class="number">1</span>, cols=<span class="number">5</span>, specs=[[&#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;]],</span><br><span class="line">                   subplot_titles=(<span class="string">&quot;2017&quot;</span>, <span class="string">&quot;2018&quot;</span>, <span class="string">&quot;2019&quot;</span>, <span class="string">&quot;2020&quot;</span>, <span class="string">&quot;2021&quot;</span>))</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors),labels=total21[<span class="string">&#x27;type&#x27;</span>], values=total21[<span class="string">&#x27;respodents&#x27;</span>], name=<span class="string">&quot;2021&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>),</span><br><span class="line">              <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors),labels=total20[<span class="string">&#x27;type&#x27;</span>], values=total20[<span class="string">&#x27;respodents&#x27;</span>], name=<span class="string">&quot;2020&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>),</span><br><span class="line">              <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors),labels=total19[<span class="string">&#x27;type&#x27;</span>], values=total19[<span class="string">&#x27;respodents&#x27;</span>], name=<span class="string">&quot;2019&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>),</span><br><span class="line">              <span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors),labels=total18[<span class="string">&#x27;type&#x27;</span>], values=total18[<span class="string">&#x27;respodents&#x27;</span>], name=<span class="string">&quot;2018&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>),</span><br><span class="line">              <span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line">fig.add_trace(go.Pie(marker=<span class="built_in">dict</span>(colors=colors),labels=total17[<span class="string">&#x27;type&#x27;</span>], values=total17[<span class="string">&#x27;respodents&#x27;</span>], name=<span class="string">&quot;2017&quot;</span>, scalegroup=<span class="string">&#x27;one&#x27;</span>),</span><br><span class="line">              <span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Use `hole` to create a donut-like pie chart</span></span><br><span class="line">fig.update_traces(hole=<span class="number">.0</span>, hoverinfo=<span class="string">&quot;label+percent+name&quot;</span>, </span><br><span class="line">                  textfont_size=<span class="number">15</span>,)</span><br><span class="line"></span><br><span class="line">fig.update_layout(showlegend=<span class="literal">False</span>,</span><br><span class="line">                 margin=<span class="built_in">dict</span>(pad=<span class="number">20</span>),</span><br><span class="line">                 height=<span class="number">100</span>,</span><br><span class="line">                 yaxis_title=<span class="literal">None</span>,</span><br><span class="line">                 xaxis_title=<span class="literal">None</span>,</span><br><span class="line">                 title_text=<span class="string">&quot;&lt;b&gt;World vs EastAsia&lt;/b&gt;&quot;</span>,</span><br><span class="line">                 title_font_size=<span class="number">22</span>,</span><br><span class="line">                 font=<span class="built_in">dict</span>(size=<span class="number">17</span>, color=<span class="string">&#x27;#000000&#x27;</span>),</span><br><span class="line">                 autosize=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>


<p>subplot을 이용하여 원그래프 5개를 한꺼번에 묶어서 출력 할 수 있다. </p>
<p><img src="/imeges/kgg/Subplot_pie5.png" alt="Subplot_pie5"></p>
<h2 id="World-map그리기"><a href="#World-map그리기" class="headerlink" title="World map그리기"></a>World map그리기</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">world_map</span>(<span class="params">locations,counts,title</span>):</span></span><br><span class="line">    data = [ <span class="built_in">dict</span>(</span><br><span class="line">            <span class="built_in">type</span> = <span class="string">&#x27;choropleth&#x27;</span>,</span><br><span class="line">            locations = locations,</span><br><span class="line">            z = counts,</span><br><span class="line">            colorscale = <span class="string">&#x27;Blues&#x27;</span>,</span><br><span class="line">            locationmode = <span class="string">&#x27;country names&#x27;</span>,</span><br><span class="line">            autocolorscale = <span class="literal">False</span>,</span><br><span class="line">            reversescale = <span class="literal">True</span>,</span><br><span class="line">            marker = <span class="built_in">dict</span>(</span><br><span class="line">                line = <span class="built_in">dict</span>(color = <span class="string">&#x27;#F7F7F7&#x27;</span>, width = <span class="number">1.5</span>)),</span><br><span class="line">                colorbar = <span class="built_in">dict</span>(autotick = <span class="literal">True</span>, legth = <span class="number">3</span>, <span class="built_in">len</span>=<span class="number">0.75</span>, title = <span class="string">&#x27;respodents&#x27;</span>,</span><br><span class="line">                               <span class="built_in">max</span> = <span class="number">1000</span>, <span class="built_in">min</span> = <span class="number">0</span>)</span><br><span class="line">                )</span><br><span class="line">           ]</span><br><span class="line">    layout = <span class="built_in">dict</span>(</span><br><span class="line">        title = title,</span><br><span class="line">        titlefont=&#123;<span class="string">&#x27;size&#x27;</span>: <span class="number">28</span>, <span class="string">&#x27;family&#x27;</span>: <span class="string">&#x27;san serif&#x27;</span>&#125;,</span><br><span class="line">        width=<span class="number">750</span>, </span><br><span class="line">        height=<span class="number">475</span>,</span><br><span class="line">        paper_bgcolor=<span class="string">&#x27;#F7F7F7&#x27;</span>,</span><br><span class="line">        geo = <span class="built_in">dict</span>(</span><br><span class="line">            showframe = <span class="literal">True</span>,</span><br><span class="line">            showcoastlines = <span class="literal">True</span>,</span><br><span class="line">            fitbounds=<span class="string">&quot;locations&quot;</span>,</span><br><span class="line">            )</span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">    fig = <span class="built_in">dict</span>(data=data, layout=layout)</span><br><span class="line">    iplot(fig, validate=<span class="literal">False</span>, filename=<span class="string">&#x27;world-map&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">z = df21_Ea[<span class="string">&#x27;Q3&#x27;</span>].value_counts()</span><br><span class="line"> </span><br><span class="line"><span class="comment">## 메서드 호출</span></span><br><span class="line">world_map(locations=z.index, counts=z.values, title= <span class="string">&#x27;&lt;b&gt; EastAsia Countries (2021 survey) &lt;b&gt;&#x27;</span>)</span><br></pre></td></tr></table></figure>


<p><img src="/imeges/kgg/WorldMap_EastAsia.png" alt="WorldMap_EastAsia_"></p>
<h2 id="bar-mode를-stack으로-하여-G를-그릴-수-있다"><a href="#bar-mode를-stack으로-하여-G를-그릴-수-있다" class="headerlink" title="bar mode를 stack으로 하여 G를 그릴 수 있다."></a>bar mode를 stack으로 하여 G를 그릴 수 있다.</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">years = [<span class="string">&#x27;2017&#x27;</span>, <span class="string">&#x27;2018&#x27;</span>, <span class="string">&#x27;2019&#x27;</span>, <span class="string">&#x27;2020&#x27;</span>, <span class="string">&#x27;2021&#x27;</span>]</span><br><span class="line"></span><br><span class="line">df21_Ea = df21[df21[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia21)]</span><br><span class="line">Ea21= (</span><br><span class="line">    df21_Ea[<span class="string">&#x27;Q3&#x27;</span>].value_counts().to_frame()</span><br><span class="line">    .reset_index().rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;21&#x27;</span>&#125;))</span><br><span class="line"></span><br><span class="line">df20_Ea=df20[df20[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">Ea20= (</span><br><span class="line">    df20_Ea[<span class="string">&#x27;Q3&#x27;</span>].replace(<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;South Korea&#x27;</span>)</span><br><span class="line">    .value_counts().to_frame().reset_index()</span><br><span class="line">    .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;20&#x27;</span>&#125;))</span><br><span class="line"></span><br><span class="line">df19_Ea=df19[df19[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">Ea19= (df19_Ea[<span class="string">&#x27;Q3&#x27;</span>].replace(<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;South Korea&#x27;</span>)</span><br><span class="line">       .value_counts().to_frame().reset_index()</span><br><span class="line">       .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;19&#x27;</span>&#125;))</span><br><span class="line"></span><br><span class="line">df18_Ea=df18[df18[<span class="string">&#x27;Q3&#x27;</span>].isin(EastAsia)]</span><br><span class="line">Ea18= (df18_Ea[<span class="string">&#x27;Q3&#x27;</span>].replace(<span class="string">&#x27;Republic of Korea&#x27;</span>,<span class="string">&#x27;South Korea&#x27;</span>)</span><br><span class="line">       .value_counts().to_frame().reset_index()</span><br><span class="line">       .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Q3&#x27;</span>:<span class="string">&#x27;18&#x27;</span>&#125;))</span><br><span class="line">Ea18.value_counts()</span><br><span class="line"><span class="comment">#df18 열에 taiwan = 0을 추가 해야 합니다. </span></span><br><span class="line"></span><br><span class="line">df17_Ea = df17[df17[<span class="string">&#x27;Country&#x27;</span>].isin(EastAsia)]</span><br><span class="line">Ea17= (df17_Ea[<span class="string">&#x27;Country&#x27;</span>].replace(<span class="string">&quot;People &#x27;s Republic of China&quot;</span>,<span class="string">&#x27;China&#x27;</span>)</span><br><span class="line">       .value_counts().to_frame().reset_index()</span><br><span class="line">       .rename(columns=&#123;<span class="string">&#x27;index&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Country&#x27;</span>:<span class="string">&#x27;17&#x27;</span>&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">#data를 합쳐서 하나의 dataframe으로 만들어 줌.</span></span><br><span class="line">df5years = pd.merge(Ea17, Ea18, on=<span class="string">&#x27;Country&#x27;</span>, how=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line">df5year =pd.merge(Ea19,Ea20, on=<span class="string">&#x27;Country&#x27;</span>, how=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line">df5year=pd.merge(df5year, Ea21, on=<span class="string">&#x27;Country&#x27;</span>, how=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line"></span><br><span class="line">df5years = pd.merge(df5years, df5year, on=<span class="string">&#x27;Country&#x27;</span>, how=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;2017&#x27;</span>, x=df5years[<span class="string">&#x27;Country&#x27;</span>], y=df5years[<span class="string">&#x27;17&#x27;</span>]),</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;2018&#x27;</span>, x=df5years[<span class="string">&#x27;Country&#x27;</span>], y=df5years[<span class="string">&#x27;18&#x27;</span>]),</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;2019&#x27;</span>, x=df5years[<span class="string">&#x27;Country&#x27;</span>], y=df5years[<span class="string">&#x27;19&#x27;</span>]),</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;2020&#x27;</span>, x=df5years[<span class="string">&#x27;Country&#x27;</span>], y=df5years[<span class="string">&#x27;20&#x27;</span>]),</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;2021&#x27;</span>, x=df5years[<span class="string">&#x27;Country&#x27;</span>], y=df5years[<span class="string">&#x27;21&#x27;</span>])</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">fig.update_layout(barmode=<span class="string">&#x27;stack&#x27;</span>,</span><br><span class="line">                 showlegend=<span class="literal">True</span>,</span><br><span class="line">                 margin=<span class="built_in">dict</span>(pad=<span class="number">20</span>),</span><br><span class="line">                 height=<span class="number">500</span>,</span><br><span class="line">                 yaxis_title=<span class="literal">None</span>,</span><br><span class="line">                 xaxis_title=<span class="literal">None</span>,</span><br><span class="line">                 title_text=<span class="string">&quot;&lt;b&gt;연도별 동아시아 Kaggle 사용자수&lt;/b&gt;&quot;</span>,</span><br><span class="line">                 title_x=<span class="number">0.5</span>,</span><br><span class="line">                 font=<span class="built_in">dict</span>(size=<span class="number">17</span>, color=<span class="string">&#x27;#000000&#x27;</span>),</span><br><span class="line">                 title_font_size=<span class="number">35</span>)</span><br><span class="line">fig.update_xaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line">fig.update_yaxes(showgrid=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Text : percent</span></span><br></pre></td></tr></table></figure>



<p>오늘은 여기까지 정리 </p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/3/">이전</a></div><div class="pagination-next"><a href="/page/5/">다음</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><a class="pagination-link" href="/page/3/">3</a></li><li><a class="pagination-link is-current" href="/page/4/">4</a></li><li><a class="pagination-link" href="/page/5/">5</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/9/">9</a></li></ul></nav></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/../imeges/main.jpg" alt="YoonHwa Park"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">YoonHwa Park</p><p class="is-size-6 is-block">I am Living in the Mars</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Mars</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives"><p class="title">86</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories"><p class="title">20</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags"><p class="title">87</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://yoonhwa-p.github.io/" target="_blank" rel="noopener">팔로우</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/YoonHwa-P"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Naver" href="https://blog.naver.com/abcdpuh"><i class="fab fa-NAVER"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Instagram" href="https://www.instagram.com/1_haza"><i class="fab fa-instagram"></i></a></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">광고</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9661048314566450" data-ad-slot="anonymous" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">링크</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/BDS/"><span class="level-start"><span class="level-item">BDS</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/DecisionTree/"><span class="level-start"><span class="level-item">DecisionTree</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Markdown/"><span class="level-start"><span class="level-item">Markdown</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/Python/Matplotlib/"><span class="level-start"><span class="level-item">Matplotlib</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/Python/Matplotlib/Seaborn/"><span class="level-start"><span class="level-item">Seaborn</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/R/"><span class="level-start"><span class="level-item">R</span></span><span class="level-end"><span class="level-item tag">6</span></span></a><ul><li><a class="level is-mobile" href="/categories/R/data-science/"><span class="level-start"><span class="level-item">data_science</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/index/"><span class="level-start"><span class="level-item">index</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/init/"><span class="level-start"><span class="level-item">init</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/kaggle/"><span class="level-start"><span class="level-item">kaggle</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/naver/"><span class="level-start"><span class="level-item">naver</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/pharmacerical-company/"><span class="level-start"><span class="level-item">pharmacerical_company</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/python/"><span class="level-start"><span class="level-item">python</span></span><span class="level-end"><span class="level-item tag">23</span></span></a><ul><li><a class="level is-mobile" href="/categories/python/Crawling/"><span class="level-start"><span class="level-item">Crawling</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/python/machineLeaning/"><span class="level-start"><span class="level-item">machineLeaning</span></span><span class="level-end"><span class="level-item tag">13</span></span></a><ul><li><a class="level is-mobile" href="/categories/python/machineLeaning/pycaret/"><span class="level-start"><span class="level-item">pycaret</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/python/machineLeaning/sklearn/"><span class="level-start"><span class="level-item">sklearn</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/python/theory/"><span class="level-start"><span class="level-item">theory</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/python-plotly/"><span class="level-start"><span class="level-item">python - plotly</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-01-20T03:22:02.000Z">2022-01-20</time></p><p class="title"><a href="/2022/01/20/blog/Notion(01)/">Use Notion</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-01-03T08:48:48.000Z">2022-01-03</time></p><p class="title"><a href="/2022/01/03/python/Crowling_basic01/">Crawling_basic(01)</a></p><p class="categories"><a href="/categories/python/">python</a> / <a href="/categories/python/Crawling/">Crawling</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-24T23:40:13.000Z">2021-12-25</time></p><p class="title"><a href="/2021/12/25/python/ML_GridWearch_HP/">DTS: ML_Grid search(Hyper Parameter)</a></p><p class="categories"><a href="/categories/python/">python</a> / <a href="/categories/python/machineLeaning/">machineLeaning</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-24T08:04:52.000Z">2021-12-24</time></p><p class="title"><a href="/2021/12/24/python/ML_ValidationCurveG(01)/">DTS: ML_Validation CurveG(01)</a></p><p class="categories"><a href="/categories/python/">python</a> / <a href="/categories/python/machineLeaning/">machineLeaning</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-24T01:44:36.000Z">2021-12-24</time></p><p class="title"><a href="/2021/12/24/python/ML_LearningCurveG(01)/">DTS: ML_Learning CurveG(01)</a></p><p class="categories"><a href="/categories/python/">python</a> / <a href="/categories/python/machineLeaning/">machineLeaning</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">아카이브</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">1월 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">12월 2021</span></span><span class="level-end"><span class="level-item tag">30</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">11월 2021</span></span><span class="level-end"><span class="level-item tag">49</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">10월 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">태그</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/BarGraph/"><span class="tag">BarGraph</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bargraph/"><span class="tag">Bargraph</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BioDataScientist/"><span class="tag">BioDataScientist</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BioData-Science/"><span class="tag">BioData_Science</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Classifier/"><span class="tag">Classifier</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Crawling/"><span class="tag">Crawling</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DTS/"><span class="tag">DTS</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DataFrame/"><span class="tag">DataFrame</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DataScience/"><span class="tag">DataScience</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Decision-Tree/"><span class="tag">Decision Tree</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Donut-Chart/"><span class="tag">Donut_Chart</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/EDA/"><span class="tag">EDA</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HorizontalBar/"><span class="tag">HorizontalBar</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HyperParameter/"><span class="tag">HyperParameter</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/List/"><span class="tag">List</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Matplotlib/"><span class="tag">Matplotlib</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mow/"><span class="tag">Mow</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Numpy/"><span class="tag">Numpy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pandas/"><span class="tag">Pandas</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Plotly/"><span class="tag">Plotly</span><span class="tag">22</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/R4ds/"><span class="tag">R4ds</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Rss/"><span class="tag">Rss</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Scatter/"><span class="tag">Scatter</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ScatterLine/"><span class="tag">ScatterLine</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Seaborn/"><span class="tag">Seaborn</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Series/"><span class="tag">Series</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Stacked-Bar/"><span class="tag">Stacked_Bar</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Study/"><span class="tag">Study</span><span class="tag">19</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Subplots/"><span class="tag">Subplots</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Test-page/"><span class="tag">Test page,</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TextMining/"><span class="tag">TextMining</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Token/"><span class="tag">Token</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Treemap/"><span class="tag">Treemap</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tuple/"><span class="tag">Tuple</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/auto-Machine-Learning/"><span class="tag">auto Machine Learning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bioinformatics/"><span class="tag">bioinformatics</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/coding/"><span class="tag">coding</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dataScience/"><span class="tag">dataScience</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/decisionTree/"><span class="tag">decisionTree</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/draft/"><span class="tag">draft</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ggplot2/"><span class="tag">ggplot2</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/githubBlog/"><span class="tag">githubBlog</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/google-colaboratory-github-upload/"><span class="tag">google, colaboratory, github, upload</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/googleColab/"><span class="tag">googleColab</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/green/"><span class="tag">green</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/howtoGithub/"><span class="tag">howtoGithub</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kaggle/"><span class="tag">kaggle</span><span class="tag">32</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kaggleNote/"><span class="tag">kaggleNote</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kaggle-Competition/"><span class="tag">kaggle_Competition</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kaggle-dictation/"><span class="tag">kaggle_dictation</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="/tags/machineLeaning/"><span class="tag">machineLeaning</span><span class="tag">13</span></a></div><div class="control"><a class="tags has-addons" href="/tags/machineLearning/"><span class="tag">machineLearning</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/make/"><span class="tag">make</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/makeBlog/"><span class="tag">makeBlog</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/makeBlog-makegithub/"><span class="tag">makeBlog, makegithub</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/makegithub/"><span class="tag">makegithub</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/markdown/"><span class="tag">markdown</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/market/"><span class="tag">market</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/method/"><span class="tag">method</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/model-selection/"><span class="tag">model selection</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/multiplace/"><span class="tag">multiplace</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/namespace/"><span class="tag">namespace</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/naver/"><span class="tag">naver</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/notion/"><span class="tag">notion</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/panel/"><span class="tag">panel</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/paperReview/"><span class="tag">paperReview</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pipe/"><span class="tag">pipe</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/plot/"><span class="tag">plot</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/prediction/"><span class="tag">prediction</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/predictionModel/"><span class="tag">predictionModel</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pycaret/"><span class="tag">pycaret</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">28</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pythonFuction/"><span class="tag">pythonFuction</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python-basic/"><span class="tag">python_basic</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/regression/"><span class="tag">regression</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/repository/"><span class="tag">repository</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sklearn/"><span class="tag">sklearn</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/soil/"><span class="tag">soil</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/studyPython/"><span class="tag">studyPython</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/summary/"><span class="tag">summary</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/table/"><span class="tag">table</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/table-arrange/"><span class="tag">table arrange</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/timer/"><span class="tag">timer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/title/"><span class="tag">title</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EA%B9%83%ED%97%88%EB%B8%8C/"><span class="tag">깃허브</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">업데이트 소식 받기</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="구독"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="구독"></div></div></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/../imeges/main.jpg" alt="Life in the Mars" height="28"></a><p class="is-size-7"><span>&copy; 2022 YoonHwa</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9661048314566450"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'folded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-right",
        content: {
          message: "이 웹 사이트는 귀하의 경험을 향상시키기 위해 Cookie를 사용합니다.",
          dismiss: "무시",
          allow: "허용",
          deny: "거부",
          link: "더 알아보기",
          policy: "Cookie 정책",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>